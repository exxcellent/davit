(this.webpackJsonpdavit=this.webpackJsonpdavit||[]).push([[0],Array(41).concat([function(e,t,n){},,,,,,,,,,,,,,,,,,,function(e,t,n){e.exports=n.p+"static/media/exxcellent_logo_200.d20fbb57.png"},,function(e,t,n){e.exports=n(113)},,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(24),o=n.n(r),c=n(1),l=n(61),u=n(11),d=n(14),s=n.n(d),f=n(22),m=n(20),v=n(2),E=n(4),p=n(5),h=n(44),S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"New project",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Map,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Map,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new Map,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new Map,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new Map,d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:new Map,s=arguments.length>10&&void 0!==arguments[10]?arguments[10]:new Map,f=arguments.length>11&&void 0!==arguments[11]?arguments[11]:new Map,m=arguments.length>12&&void 0!==arguments[12]?arguments[12]:new Map,v=arguments.length>13&&void 0!==arguments[13]?arguments[13]:new Map,E=arguments.length>14&&void 0!==arguments[14]?arguments[14]:new Map,h=arguments.length>15&&void 0!==arguments[15]?arguments[15]:new Map,S=arguments.length>16&&void 0!==arguments[16]?arguments[16]:new Map,C=arguments.length>17&&void 0!==arguments[17]?arguments[17]:new Map,g=arguments.length>18&&void 0!==arguments[18]?arguments[18]:new Map,b=arguments.length>19&&void 0!==arguments[19]?arguments[19]:new Map,O=arguments.length>20&&void 0!==arguments[20]?arguments[20]:new Map,T=arguments.length>21&&void 0!==arguments[21]?arguments[21]:new Map;Object(p.a)(this,e),this.projectName=t,this.version=n,this.actorZoom=a,this.dataZoom=i,this.actors=r,this.groups=o,this.positions=c,this.designs=l,this.geometricalDatas=u,this.sequences=d,this.steps=s,this.actions=f,this.decisions=m,this.datas=v,this.dataConnections=E,this.sequenceConfigurations=h,this.chainConfigurations=S,this.chains=C,this.chainLinks=g,this.chainDecisions=b,this.sequenceStates=O,this.chainStates=T},C=function(e){console.info("Call davit version manager.");return e.version,{}},g=function(e){var t=!1;return void 0!==e.version&&.3===e.version?t=!0:console.warn("!!!WARNING!!! DAVIT Project has different version (".concat(e.version,")!")),t},b=function(){function e(){if(Object(p.a)(this,e),this.data=void 0,e.instance&&e.instance.data||this.readDataFromStorage(),e.instance)return e.instance;e.instance=this}return Object(h.a)(e,[{key:"readDataFromStorage",value:function(){var e=localStorage.getItem("DAVIT"),t={version:.3,projectName:"New project",actorZoom:1,dataZoom:1,actors:[],groups:[],geometricalDatas:[],positions:[],designs:[],sequences:[],steps:[],actions:[],decisions:[],datas:[],dataConnections:[],sequenceConfigurations:[],chainConfigurations:[],chains:[],chainLinks:[],chainDecisions:[],sequenceStates:[],chainStates:[]};e?(t=JSON.parse(e),g(t)||(t=C(t),this.storeFileData(JSON.stringify(t)))):localStorage.setItem("DAVIT",JSON.stringify(t)),this.readData(t)}},{key:"readData",value:function(e){var t=this;this.data=new S,Object.entries(e).forEach((function(n){var a=Object(E.a)(n,2),i=a[0],r=a[1];if(void 0===r)throw new Error("No value found for key ".concat(i));if(Array.isArray(r)){var o=Object.entries(t.data).find((function(e){return Object(E.a)(e,1)[0]===i}));if(!o)throw console.warn("Data has wrong format: key ".concat(i,", value ").concat(r)),new Error("Data has wrong format: key ".concat(i,", value ").concat(r));r.forEach((function(e){o[1].set(e.id,e)}))}t.data.projectName=e.projectName,t.data.actorZoom=e.actorZoom?e.actorZoom:1,t.data.dataZoom=e.dataZoom?e.dataZoom:1}))}},{key:"saveData",value:function(){localStorage.setItem("DAVIT",JSON.stringify(this.getDataStoreObject()))}},{key:"getDataStoreObject",value:function(){return{projectName:this.data.projectName.toString(),version:.3,actorZoom:Number(this.data.actorZoom),dataZoom:Number(this.data.dataZoom),actors:Array.from(this.data.actors.values()),groups:Array.from(this.data.groups.values()),designs:Array.from(this.data.designs.values()),geometricalDatas:Array.from(this.data.geometricalDatas.values()),positions:Array.from(this.data.positions.values()),sequences:Array.from(this.data.sequences.values()),steps:Array.from(this.data.steps.values()),actions:Array.from(this.data.actions.values()),datas:Array.from(this.data.datas.values()),dataConnections:Array.from(this.data.dataConnections.values()),sequenceConfigurations:Array.from(this.data.sequenceConfigurations.values()),chainConfigurations:Array.from(this.data.chainConfigurations.values()),decisions:Array.from(this.data.decisions.values()),chains:Array.from(this.data.chains.values()),chainLinks:Array.from(this.data.chainLinks.values()),chainDecisions:Array.from(this.data.chainDecisions.values()),sequenceStates:Array.from(this.data.sequenceStates.values()),chainStates:Array.from(this.data.chainStates.values())}}},{key:"storeFileData",value:function(e){var t=JSON.parse(e);this.readData(t),localStorage.setItem("DAVIT",e)}},{key:"downloadData",value:function(e){var t=JSON.stringify(this.getDataStoreObject()),n="data:application/json;charset=utf-8,"+encodeURIComponent(t),a=document.createElement("a");a.setAttribute("href",n),a.setAttribute("download",e+".json"),a.click()}},{key:"createNewProject",value:function(){localStorage.removeItem("DAVIT"),this.readDataFromStorage()}},{key:"commitChanges",value:function(){this.saveData(),this.readDataFromStorage()}},{key:"roleBack",value:function(){console.warn("Data Store: role back."),this.readDataFromStorage()}},{key:"getDataStore",value:function(){return this.data||this.readDataFromStorage(),this.data}}]),e}();b.instance=void 0;var O,T=new b,k={isNullOrUndefined:function(e){return null===e||void 0===e},deepCopy:function(e){return k.isNullOrUndefined(e)?e:JSON.parse(JSON.stringify(e))},isValidName:function(e){var t=!1;return this.isNullOrUndefined(e)||(t=""!==e),t}};!function(e){e.FIN="FIN",e.ERROR="ERROR",e.IDLE="IDLE",e.STEP="STEP",e.DEC="DEC"}(O||(O={}));var D,N=function(e,t){if(Array.from(t.decisions.values()).some((function(t){return t.stateFkAndStateConditions.some((function(t){return t.stateFk===e}))})))throw new Error("Sequence state.error! state with id: ".concat(e," is still connected to decisions(s)!"))},I=function(e,t){if(Array.from(t.chainDecisions.values()).some((function(t){return t.stateFkAndStateConditions.some((function(t){return t.stateFk===e}))})))throw new Error("Sequence state.error! state with id: ".concat(e," is still connected to decisions(s)!"))},y=function(e,t){var n=Array.from(t.dataConnections.values()).some((function(t){return t.data1Fk===e||t.data2Fk===e})),a=Array.from(t.actions.values()).some((function(t){return t.dataFk===e})),i=Array.from(t.decisions.values()).some((function(t){return t.conditions.some((function(t){return t.dataFk===e}))})),r=Array.from(t.chainDecisions.values()).some((function(t){return t.conditions.some((function(t){return t.dataFk===e}))}));if(n||a||i||r)throw new Error("delete.error! data with id: ".concat(e," is still connected to Object(s)!"))},A=function(e,t,n){var a=Array.from(n.actions.values()).some((function(n){return n.dataFk===e&&n.instanceFk===t})),i=Array.from(n.decisions.values()).some((function(n){return n.conditions.some((function(n){return n.dataFk===e&&n.instanceFk===t}))})),r=Array.from(n.chainDecisions.values()).some((function(n){return n.conditions.some((function(n){return n.dataFk===e&&n.instanceFk===t}))}));if(a||i||r)throw new Error("delete.error! data instance with id: ".concat(t," is still connected to Object(s)!"))},F=function(e,t){var n=Array.from(t.actions.values()).some((function(t){return t.sendingActorFk===e||t.receivingActorFk===e})),a=Array.from(t.decisions.values()).some((function(t){return t.conditions.some((function(t){return t.actorFk===e}))})),i=Array.from(t.chainDecisions.values()).some((function(t){return t.conditions.some((function(t){return t.actorFk===e}))}));if(n||a||i)throw new Error("delete.error! actor with id: ".concat(e," is still connected to Object(s)!"))},q=function(e,t){var n="delete.error! step: ".concat(e.name," with id: ").concat(e.id," is still connected to: \n"),a="",i=Array.from(t.steps.values()).find((function(t){return t.goto.type===O.STEP&&t.goto.id===e.id}));a+=i?"step: ".concat(i.name," with id: ").concat(i.id,"!"):"";var r=Array.from(t.actions.values()).find((function(t){return t.sequenceStepFk===e.id}));a+=r?"\n action: ".concat(r.actionType," with id: ").concat(r.id,"!"):"";var o=Array.from(t.decisions.values()).find((function(t){return t.ifGoTo.type===O.STEP&&t.ifGoTo.id===e.id||t.elseGoTo.type===O.STEP&&t.elseGoTo.id===e.id}));if((a+=o?"\n decision: ".concat(o.name," with id: ").concat(o.id,"!"):"").length>0)throw new Error(n+a)},j=function(e,t){var n=Array.from(t.steps.values()).some((function(t){return t.sequenceFk===e})),a=Array.from(t.decisions.values()).some((function(t){return t.sequenceFk===e}));if(n||a)throw new Error("delete.error! sequence: ".concat(e," is still connected to step(s) or decision(s)!"))},w=function(e,t){var n=Array.from(t.actors.values()).some((function(t){return t.geometricalDataFk===e})),a=Array.from(t.datas.values()).some((function(t){return t.geometricalDataFk===e}));if(n||a)throw new Error("delete.error! geometrical data with id: ".concat(e," is still connected to Object(s)!"))},x=function(e,t){if(Array.from(t.geometricalDatas.values()).some((function(t){return t.positionFk===e})))throw new Error("delete.error! position with id: ".concat(e," is still connected to GeometricalData(s)!"))},R=function(e,t){if(Array.from(t.actors.values()).some((function(t){return t.designFk===e})))throw new Error("delete.error! design with id: ".concat(e," is still connected to Actor(s)!"))},L=function(e,t){if(Array.from(t.actors.values()).some((function(t){return t.groupFks===e})))throw new Error("delete.error! group with id: ".concat(e," is still connected to Actor(s)!"))},_=function(e,t){if(k.isNullOrUndefined(e))throw console.warn("".concat(t," must not be null or undefined")),new Error("null.error! ".concat(t," must not be null or undefined"))},M=n(10),U={determineNewId:function(e){var t=Math.max.apply(Math,Object(M.a)(e.map((function(e){return e.id}))))+1;return t===-1/0&&(t=1),t},getOrCreateId:function(e,t){var n=e;return-1===n&&(n=this.determineNewId(t)),n}},G={find:function(e){return T.getDataStore().actors.get(e)},findAll:function(){return Array.from(T.getDataStore().actors.values())},delete:function(e){if(F(e.id,T.getDataStore()),!T.getDataStore().actors.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e},save:function(e){var t;return _(e,"actor"),t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().actors.set(t.id,t),t}},P={find:function(e){return T.getDataStore().groups.get(e)},findAll:function(){return Array.from(T.getDataStore().groups.values())},delete:function(e){if(L(e.id,T.getDataStore()),!T.getDataStore().groups.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e},save:function(e){var t;return _(e,"actor"),-1===e.id?(t=Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}),console.info("set new actor id: "+t.id)):t=Object(v.a)({},e),T.getDataStore().groups.set(t.id,t),t}},B={find:function(e){return T.getDataStore().designs.get(e)},findAll:function(){return Array.from(T.getDataStore().designs.values())},delete:function(e){if(R(e.id,T.getDataStore()),!T.getDataStore().designs.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e},save:function(e){var t;return t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().designs.set(t.id,t),t}},H={find:function(e){return T.getDataStore().geometricalDatas.get(e)},findAll:function(){return Array.from(T.getDataStore().geometricalDatas.values())},delete:function(e){w(e.id,T.getDataStore());var t=T.getDataStore().geometricalDatas.delete(e.id);if(!t)throw new Error("dataAccess.repository.error.notExists");return t},save:function(e){var t;return t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().geometricalDatas.set(t.id,t),t}},V={find:function(e){return T.getDataStore().positions.get(e)},findAll:function(){return Array.from(T.getDataStore().positions.values())},delete:function(e){x(e.id,T.getDataStore());var t=T.getDataStore().positions.delete(e.id);if(!t)throw new Error("dataAccess.repository.error.notExists");return t},save:function(e){var t;return t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().positions.set(t.id,t),t}},W=function(e){return T.getDataStore().projectName=e,e},z=function(e){return T.getDataStore().actorZoom=e,e},Q=function(e){return T.getDataStore().dataZoom=e,e},Z=function(){return T.getDataStore().actorZoom},K=function(){return T.getDataStore().dataZoom},J=function(e){var t=H.find(e);_(t,"geometricalData");var n=V.find(t.positionFk);return _(n,"position"),{geometricalData:t,position:n}},Y=function(e){return B.find(e)},X=function(e){_(e,"geometricalDataCTO"),_(e.position,"position");var t=V.save(e.position),n=k.deepCopy(e);return n.geometricalData.positionFk=t.id,{position:t,geometricalData:H.save(n.geometricalData)}},$=function(e){return _(e,"design"),B.save(e)},ee=function(e){_(e,"geometricalDataCTO");var t=H.delete(e.geometricalData);if(!V.delete(e.position)||!t)throw new Error("Couldn't delete");return e},te=function(e){if(!B.delete(e))throw new Error("Couldn't delete");return e},ne=function(e){return z(e)},ae=function(e){return Q(e)},ie=function(e){return W(e)},re=function(){return Z()},oe=function(){return K()},ce={findAll:function(){return G.findAll().map((function(e){return le(e)}))},findCTO:function(e){return le(G.find(e))},find:function(e){return G.find(e)},findAllGroups:function(){return P.findAll()},delete:function(e){return _(e.geometricalData,"GeometricalDataCTO"),_(e.design,"DesignTO"),_(e.actor,"ActorTO"),G.delete(e.actor),ee(e.geometricalData),te(e.design),e},deleteGroup:function(e){var t=this;return _(e,"group"),this.findAll().filter((function(t){return t.actor.groupFks===e.id})).forEach((function(e){e.actor.groupFks=-1,t.saveCTO(e)})),P.delete(e),e},saveCTO:function(e){_(e,"ActorCTO");var t=k.deepCopy(e),n=$(t.design);t.actor.designFk=n.id;var a=X(t.geometricalData);return t.actor.geometricalDataFk=a.geometricalData.id,{actor:G.save(t.actor),geometricalData:a,design:n}},saveGroup:function(e){return _(e,"group"),P.save(e)}},le=function(e){_(e,"actor");var t=Y(e.designFk);_(t,"design");var n=J(e.geometricalDataFk);return _(n,"geometricalData"),{actor:e,geometricalData:n,design:t}},ue={find:function(e){return T.getDataStore().dataConnections.get(e)},findAll:function(){return Array.from(T.getDataStore().dataConnections.values())},save:function(e){var t;return _(e,"dataConnection"),-1===e.id?(t=Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}),console.info("set new actor id: "+t.id)):t=Object(v.a)({},e),T.getDataStore().dataConnections.set(t.id,t),t},delete:function(e){if(_(e,"dataRelationTO"),!T.getDataStore().dataConnections.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e}},de={find:function(e){return T.getDataStore().datas.get(e)},findAll:function(){return Array.from(T.getDataStore().datas.values())},save:function(e){if(_(e,"data"),e.instances.length<=0)throw new Error("dataTO with id: ".concat(e.id," has no instances!"));me(e,this.findAll(),T.getDataStore());var t=Object(v.a)({},e);return(t=fe(this.findAll(),t)).instances=e.instances.map((function(t){return se(e.instances,t)})),T.getDataStore().datas.set(t.id,t),t},delete:function(e){if(y(e.id,T.getDataStore()),e.instances.forEach((function(t){return A(e.id,t.id,T.getDataStore())})),!T.getDataStore().datas.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e}},se=function(e,t){var n=k.deepCopy(t);return-1===t.id&&(n.id=U.determineNewId(e)),n},fe=function(e,t){var n=k.deepCopy(t);return-1===n.id&&(n.id=U.determineNewId(e)),n},me=function(e,t,n){if(-1!==e.id){var a=t.find((function(t){return t.id===e.id}));if(a)a.instances.filter((function(t){return!e.instances.some((function(e){return e.id===t.id}))})).forEach((function(t){return A(e.id,t.id,n)}))}},ve={findData:function(e){return de.find(e)},findDataCTO:function(e){return pe(de.find(e))},findAllDatas:function(){return de.findAll().map((function(e){return pe(e)}))},saveDataCTO:function(e){_(e,"dataCTO");var t=k.deepCopy(e),n=X(e.geometricalData);return t.data.geometricalDataFk=n.geometricalData.id,{data:de.save(t.data),geometricalData:n}},deleteDataCTO:function(e){var t=this;return _(e.geometricalData,"GeometricalDataCTO"),_(e.data,"DataTO"),this.findAllDataRelationCTOs().filter((function(t){return t.data1Fk===e.data.id||t.data2Fk===e.data.id})).forEach((function(e){return t.deleteDataRelationCTO(e)})),de.delete(e.data),ee(e.geometricalData),e},findAllDataRelationTOs:function(){return ue.findAll()},findAllDataRelationCTOs:function(){return ve.findAllDataRelationTOs().map(Ee)},saveDataRelation:function(e){return _(e,"dataRelation"),ue.save(e)},deleteDataRelationCTO:function(e){return _(e,"dataRelationCTO"),ue.delete(e),e}},Ee=function(e){_(e,"DataRelationTO");var t=pe(ve.findData(e.data1Fk));_(t,"dataTO1");var n=pe(ve.findData(e.data2Fk));return _(n,"dataTO2"),e},pe=function(e){_(e,"data");var t=J(e.geometricalDataFk);return _(t,"geometricalData"),{data:e,geometricalData:t}},he=n(7),Se=n(6);!function(e){e.FIN="FIN",e.ERROR="ERROR",e.LINK="LINK",e.DEC="DEC"}(D||(D={}));var Ce=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;Object(p.a)(this,e),this.id=t},ge=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{type:D.ERROR},c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:-1;return Object(p.a)(this,n),(e=t.call(this)).name=a,e.sequenceFk=i,e.sequenceConfigurationFk=r,e.goto=o,e.root=c,e.chainFk=l,e}return n}(Ce),be=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Object(p.a)(this,n),(e=t.call(this)).name=a,e.note=i,e.sequenceFk=r,e.initDatas=o,e.stateValues=c,e}return n}(Ce),Oe=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(p.a)(this,n),(e=t.call(this)).name=a,e.note=i,e}return n}(Ce),Te=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Oe,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];Object(p.a)(this,e),this.sequenceTO=t,this.sequenceStepCTOs=n,this.decisions=a,this.sequenceStates=i},ke=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ge,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Te,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new be;Object(p.a)(this,e),this.chainLink=t,this.sequence=n,this.sequenceConfiguration=a},De={find:function(e){return T.getDataStore().actions.get(e)},findAll:function(){return Array.from(T.getDataStore().actions.values())},findAllForStep:function(e){return this.findAll().filter((function(t){return t.sequenceStepFk===e}))},save:function(e){var t;return _(e,"actorData"),t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().actions.set(t.id,t),t},delete:function(e){if(!T.getDataStore().actions.delete(e))throw Error("could not delete action with id: "+e)}},Ne={find:function(e){return T.getDataStore().chainConfigurations.get(e)},findAll:function(){return Array.from(T.getDataStore().chainConfigurations.values())},save:function(e){var t;return _(e,"ChainConfiguration"),t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().chainConfigurations.set(t.id,t),t},delete:function(e){if(!T.getDataStore().chainConfigurations.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e}},Ie={find:function(e){return T.getDataStore().chainDecisions.get(e)},findAll:function(){return Array.from(T.getDataStore().chainDecisions.values())},findAllForChain:function(e){return this.findAll().filter((function(t){return t.chainFk===e}))},delete:function(e){if(!T.getDataStore().chainDecisions.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e},save:function(e){var t;return _(e,"decision"),t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().chainDecisions.set(t.id,t),t}},ye={find:function(e){return T.getDataStore().chainLinks.get(e)},findAll:function(){return Array.from(T.getDataStore().chainLinks.values())},findAllForChain:function(e){return this.findAll().filter((function(t){return t.chainFk===e}))},delete:function(e){if(!T.getDataStore().chainLinks.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e},save:function(e){var t;return _(e,"chainlink"),t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().chainLinks.set(t.id,t),t}},Ae={find:function(e){return T.getDataStore().chains.get(e)},findAll:function(){return Array.from(T.getDataStore().chains.values())},saveTO:function(e){var t;return _(e,"chain"),t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().chains.set(t.id,t),t},delete:function(e){if(!T.getDataStore().chains.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e}},Fe={findAll:function(){return Array.from(T.getDataStore().chainStates.values())},findAllByChainId:function(e){return this.findAll().filter((function(t){return t.chainFk===e}))},find:function(e){return T.getDataStore().chainStates.get(e)},save:function(e){var t;_(e,"chainState");var n=e.id;return n=U.getOrCreateId(n,this.findAll()),t=Object(v.a)(Object(v.a)({},e),{},{id:n}),T.getDataStore().chainStates.set(n,t),t},delete:function(e){if(I(e.id,T.getDataStore()),!T.getDataStore().chainStates.delete(e.id))throw new Error("Try to delete chain state: Chain state with ID: ".concat(e.id," dos not exists in data store!"));return e}},qe={find:function(e){return T.getDataStore().decisions.get(e)},findAll:function(){return Array.from(T.getDataStore().decisions.values())},findAllForSequence:function(e){return this.findAll().filter((function(t){return t.sequenceFk===e}))},save:function(e){var t;_(e,"decision");var n=k.deepCopy(e);return n.conditions.map((function(t){return-1===t.id&&(t.id=U.determineNewId(e.conditions)),t})),t=-1===n.id?Object(v.a)(Object(v.a)({},n),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},n),T.getDataStore().decisions.set(t.id,t),t},delete:function(e){if(T.getDataStore().decisions.delete(e.id))return e;throw Error("could not delete decision with id: "+e.id)}},je={find:function(e){return T.getDataStore().sequenceConfigurations.get(e)},findAll:function(){return Array.from(T.getDataStore().sequenceConfigurations.values())},save:function(e){var t;return _(e,"sequenceConfiguration"),t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().sequenceConfigurations.set(t.id,t),t},delete:function(e){if(!T.getDataStore().sequenceConfigurations.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e}},we={find:function(e){return T.getDataStore().sequences.get(e)},findAll:function(){return Array.from(T.getDataStore().sequences.values())},save:function(e){var t;return _(e,"sequence"),t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().sequences.set(t.id,t),t},delete:function(e){if(j(e.id,T.getDataStore()),!T.getDataStore().sequences.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e}},xe={findAll:function(){return Array.from(T.getDataStore().sequenceStates.values())},findAllForSequence:function(e){return this.findAll().filter((function(t){return t.sequenceFk===e}))},find:function(e){return T.getDataStore().sequenceStates.get(e)},save:function(e){var t;_(e,"sequenceState");var n=e.id;return n=U.getOrCreateId(n,this.findAll()),t=Object(v.a)(Object(v.a)({},e),{},{id:n}),T.getDataStore().sequenceStates.set(n,t),t},delete:function(e){if(N(e.id,T.getDataStore()),!T.getDataStore().sequenceStates.delete(e.id))throw new Error("Try to delete Sequence state: Sequence state with ID: ".concat(e.id," dos not exists in data store!"));return e}},Re={find:function(e){return T.getDataStore().steps.get(e)},findAll:function(){return Array.from(T.getDataStore().steps.values())},findAllForSequence:function(e){return this.findAll().filter((function(t){return t.sequenceFk===e}))},delete:function(e){if(q(e,T.getDataStore()),!T.getDataStore().steps.delete(e.id))throw new Error("dataAccess.repository.error.notExists");return e},save:function(e){var t;return _(e,"sequenceStep"),t=-1===e.id?Object(v.a)(Object(v.a)({},e),{},{id:U.determineNewId(this.findAll())}):Object(v.a)({},e),T.getDataStore().steps.set(t.id,t),t}},Le={findSequenceCTO:function(e){return _e(we.find(e))},findAll:function(){return we.findAll()},saveSequenceCTO:function(e){var t=this;_(e,"sequenceCTO");var n=we.save(e.sequenceTO);return e.sequenceStepCTOs.forEach((function(e){-1===e.sequenceStepTO.sequenceFk&&(e.sequenceStepTO.sequenceFk=n.id),t.saveSequenceStep(e)})),_e(n)},saveSequenceTO:function(e){return _(e,"sequenceTO"),we.save(e)},deleteSequenceTO:function(e){_(e,"sequenceTO");var t=_e(e);return t.sequenceStepCTOs.forEach((function(e){return Re.delete(e.sequenceStepTO)})),t.decisions.forEach((function(e){return qe.delete(e)})),we.delete(e)},deleteSequenceCTO:function(e){var t=this;return _(e.sequenceTO,"sequenceTO"),e.decisions.forEach((function(e){e.ifGoTo.type!==O.STEP&&e.ifGoTo.type!==O.DEC||(e.ifGoTo.id=-1,t.saveDecision(e)),e.elseGoTo.type!==O.STEP&&e.elseGoTo.type!==O.DEC||(e.elseGoTo.id=-1,t.saveDecision(e))})),e.sequenceStepCTOs.forEach((function(e){e.sequenceStepTO.goto.type!==O.STEP&&e.sequenceStepTO.goto.type!==O.DEC||(e.sequenceStepTO.goto.id=-1,t.saveSequenceStep(e))})),e.decisions.forEach(this.deleteDecision),e.sequenceStepCTOs.forEach(this.deleteSequenceStep),this.deleteSequenceTO(e.sequenceTO),e},setRoot:function(e,t,n){var a=null,i=qe.findAllForSequence(e),r=Re.findAllForSequence(e);if(i.forEach((function(e){e.root=!1,n&&e.id===t&&(e.root=!0,a=e)})),r.forEach((function(e){e.root=!1,n||e.id===t&&(e.root=!0,a=e)})),i.forEach((function(e){return qe.save(e)})),r.forEach((function(e){return Re.save(e)})),null===a)throw Error("no root is set!");return a},setChainRoot:function(e,t,n){var a=null,i=Ie.findAllForChain(e),r=ye.findAllForChain(e);if(i.forEach((function(e){n&&e.id===t&&(a=e)})),r.forEach((function(e){e.root=!1,n||e.id===t&&(e.root=!0,a=e)})),i.forEach((function(e){return Ie.save(e)})),r.forEach((function(e){return ye.save(e)})),null===a)throw Error("no root is set!");return a},saveSequenceStep:function(e){if(_(e,"sequenceStep"),-1===e.sequenceStepTO.sequenceFk)throw new Error("Sequence step sequenceFk is '-1'!");De.findAllForStep(e.sequenceStepTO.id).filter((function(t){return!e.actions.some((function(e){return e.id===t.id}))})).map((function(e){return e.id})).forEach(De.delete);var t=Re.save(e.sequenceStepTO);return e.actions.forEach((function(e){De.save(e)})),Me(t)},deleteSequenceStep:function(e){_(e,"step"),e.actions.map((function(e){return De.delete(e.id)})),Re.delete(e.sequenceStepTO);var t=k.deepCopy(Re.findAllForSequence(e.sequenceStepTO.sequenceFk));return t.sort((function(e,t){return e.index-t.index})),t.forEach((function(e,t){return e.index=t+1})),t.forEach(Re.save),e},findSequenceStepCTO:function(e){var t=Re.find(e);return Me(t)},saveDecision:function(e){return qe.save(e)},deleteDecision:function(e){return qe.delete(e)},findDecision:function(e){var t=qe.find(e);if(void 0===t)throw Error("Decision with id: "+e+" dos not exists!");return t},saveActionTO:function(e){_(e,"actionTO");var t=k.deepCopy(e);return De.save(t)},deleteAction:function(e){return _(e,"action"),De.delete(e.id),e},findAllSequenceConfigurations:function(){return je.findAll()},findSequenceConfigurationTO:function(e){var t=je.find(e);if(t)return t;throw new Error("Could not find Sequence configuration with ID: "+e)},saveSequenceConfigurationTO:function(e){return _(e,"sequenceConfiguration"),je.save(e)},deleteSequenceConfiguration:function(e){return _(e,"sequenceConfiguration"),je.delete(e),e},findAllSequenceStates:function(){return xe.findAll()},findAllSequenceStatesBySequenceFk:function(e){return xe.findAllForSequence(e)},saveSequenceState:function(e){return _(e,"sequenceState"),xe.save(e)},deleteSequenceState:function(e){_(e,"SequenceStateId");var t=this.findSequenceState(e);return xe.delete(t)},findSequenceState:function(e){var t=xe.find(e);if(t)return t;throw new Error("Could not find Sequence State with ID: "+e)},findAllChainStates:function(){return Fe.findAll()},findAllChainStatesByChainFk:function(e){return Fe.findAllByChainId(e)},saveChainState:function(e){return _(e,"chainState"),Fe.save(e)},deleteChainState:function(e){_(e,"chainStateId");var t=this.findChainState(e);return Fe.delete(t)},findChainState:function(e){var t=Fe.find(e);if(t)return t;throw new Error("Could not find Chain State with ID: "+e)},findAllChains:function(){return Ae.findAll()},getChainCTO:function(e){return Ue(e)},saveChainTO:function(e){return Ae.saveTO(e)},deleteChain:function(e){var t=ye.findAllForChain(e.id),n=Ie.findAllForChain(e.id);return t.forEach((function(e){return ye.delete(e)})),n.forEach((function(e){return Ie.delete(e)})),Ae.delete(e)},saveChainLink:function(e){return ye.save(e)},findAllChainLinks:function(){return ye.findAll()},deleteChainTO:function(e){return ye.delete(e)},saveChainDecision:function(e){return Ie.save(e)},findAllChainDecisions:function(){return Ie.findAll()},deleteChainDecision:function(e){return Ie.delete(e)},findChainLink:function(e){var t=ye.find(e);if(t)return t;throw Error("Try to find chain link: Could not find chain link with ID: "+e)},findChainDecision:function(e){var t=Ie.find(e);if(t)return t;throw Error("Try to find chain decision: Could not find chain decision with ID: "+e)},findAllChainConfigurations:function(){return Ne.findAll()},findChainConfigurationTO:function(e){var t=Ne.find(e);if(t)return t;throw Error("Try to find chain configuration: Could not find chain configuration with ID: "+e)},deleteChainConfiguration:function(e){return Ne.delete(e)},saveChainConfigurationTO:function(e){return Ne.save(e)}},_e=function(e){_(e,"sequence");var t=Re.findAllForSequence(e.id).map(Me);return t.sort((function(e,t){return e.sequenceStepTO.index-t.sequenceStepTO.index})),{sequenceTO:e,sequenceStepCTOs:t,decisions:qe.findAllForSequence(e.id),sequenceStates:xe.findAllForSequence(e.id)}},Me=function(e){return _(e,"sequenceStepTO"),{sequenceStepTO:e,actions:De.findAllForStep(e.id).sort((function(e,t){return e.index-t.index}))}},Ue=function(e){_(e,"chainTO");var t=k.deepCopy(e),n=ye.findAllForChain(t.id),a=[];return n&&(a=n.map((function(e){return function(e){_(e,"ChainLink");var t=new ke;t.chainLink=e;var n=je.find(e.sequenceConfigurationFk),a=we.find(e.sequenceFk);return a&&(t.sequence=_e(a)),t.sequenceConfiguration=n||new be("","",(null===a||void 0===a?void 0:a.id)||-1,[],[]),t}(e)}))),{chain:t,links:a,decisions:Ie.findAllForChain(t.id),chainStates:Fe.findAllByChainId(e.id)}},Ge=function(e){var t={object:void 0,message:"",code:500};try{return T.storeFileData(e),Object(v.a)(Object(v.a)({},t),{},{code:200})}catch(n){return Object(v.a)(Object(v.a)({},t),{},{message:n.message})}},Pe=function(){var e={object:void 0,message:"",code:500};try{return T.createNewProject(),Object(v.a)(Object(v.a)({},e),{},{code:200})}catch(t){return Object(v.a)(Object(v.a)({},e),{},{message:t.message})}},Be=function(e){var t={object:void 0,message:"",code:500};Vt((function(){return ie(e)}));try{return T.downloadData(e),Object(v.a)(Object(v.a)({},t),{},{code:200})}catch(n){return Object(v.a)(Object(v.a)({},t),{},{message:n.message})}},He=function(e){return Vt((function(){return ne(e)}))},Ve=function(e){return Vt((function(){return ae(e)}))},We=function(){return Vt(re)},ze=function(){return Vt(oe)},Qe=function(){return Vt(ce.findAll)},Ze=function(e){return Vt((function(){return ce.saveCTO(e)}))},Ke=function(e){return Vt((function(){return ce.delete(e)}))},Je=function(e){return Vt((function(){return Le.deleteSequenceCTO(e)}))},Ye=function(){return Vt(Le.findAll)},Xe=function(e){return Vt((function(){return Le.findSequenceCTO(e)}))},$e=function(e){return Vt((function(){return Le.saveSequenceTO(e)}))},et=function(e,t,n){return Vt((function(){return Le.setRoot(e,t,n)}))},tt=function(e){return Vt((function(){return Le.saveSequenceStep(e)}))},nt=function(e){return Vt((function(){return Le.deleteSequenceStep(e)}))},at=function(e){return Vt((function(){return Le.findSequenceStepCTO(e)}))},it=function(){return Vt(Le.findAllSequenceConfigurations)},rt=function(e){return Vt((function(){return Le.findSequenceConfigurationTO(e)}))},ot=function(e){return Vt((function(){return Le.deleteSequenceConfiguration(e)}))},ct=function(e){return Vt((function(){return Le.saveSequenceConfigurationTO(e)}))},lt=function(){return Vt(Le.findAllChainConfigurations)},ut=function(e){return Vt((function(){return Le.deleteChainConfiguration(e)}))},dt=function(){return Vt(ve.findAllDatas)},st=function(e){return Vt((function(){return ve.saveDataCTO(e)}))},ft=function(e){return Vt((function(){return ve.deleteDataCTO(e)}))},mt=function(e){return Vt((function(){return ve.deleteDataRelationCTO(e)}))},vt=function(){return Vt(ve.findAllDataRelationTOs)},Et=function(e){return Vt((function(){return ve.saveDataRelation(e)}))},pt=function(){return Vt(ce.findAllGroups)},ht=function(e){return Vt((function(){return ce.saveGroup(e)}))},St=function(e){return Vt((function(){return Le.deleteAction(e)}))},Ct=function(e){return Vt((function(){return Le.saveActionTO(e)}))},gt=function(e){return Vt((function(){return Le.saveDecision(e)}))},bt=function(e){return Vt((function(){return Le.deleteDecision(e)}))},Ot=function(e){return Vt((function(){return Le.findDecision(e)}))},Tt=function(){return Vt(Le.findAllChains)},kt=function(e){return Vt((function(){return Le.getChainCTO(e)}))},Dt=function(e){return Vt((function(){return Le.saveChainTO(e)}))},Nt=function(e){return Vt((function(){return Le.deleteChain(e)}))},It=function(e){return Vt((function(){return Le.saveChainLink(e)}))},yt=function(){return Vt(Le.findAllChainLinks)},At=function(e){return Vt((function(){return Le.deleteChainTO(e)}))},Ft=function(e){return Vt((function(){return Le.saveChainDecision(e)}))},qt=function(){return Vt(Le.findAllChainDecisions)},jt=function(e){return Vt((function(){return Le.deleteChainDecision(e)}))},wt=function(e,t,n){return Vt((function(){return Le.setChainRoot(e,t,n)}))},xt=function(e){return Vt((function(){return Le.findChainDecision(e)}))},Rt=function(e){return Vt((function(){return Le.findChainLink(e)}))},Lt=function(){return Vt(Le.findAllSequenceStates)},_t=function(e){return Vt((function(){return Le.findAllSequenceStatesBySequenceFk(e)}))},Mt=function(e){return Vt((function(){return Le.saveSequenceState(e)}))},Ut=function(e){return Vt((function(){return Le.deleteSequenceState(e)}))},Gt=function(){return Vt(Le.findAllChainStates)},Pt=function(e){return Vt((function(){return Le.saveChainState(e)}))},Bt=function(e){return Vt((function(){return Le.deleteChainState(e)}))},Ht=function(e){return Vt((function(){return Le.findAllChainStatesByChainFk(e)}))};function Vt(e){var t={object:{},message:"",code:500};try{var n=e();t.object="undefined"===typeof n?void 0:JSON.parse(JSON.stringify(n)),t.code=200,T.commitChanges()}catch(a){console.warn(a),t.message=a.message,T.roleBack()}return t}var Wt,zt=Object(m.b)({name:"global",initialState:{errors:[],actorZoom:1,dataZoom:1},reducers:{handleError:function(e,t){e.errors.push(t.payload)},clearErrors:function(e){e.errors=[]},removeErrorAtIndex:function(e,t){t.payload>-1&&t.payload<e.errors.length&&(e.errors=e.errors.filter((function(e,n){return n!==t.payload})))},setActorZoom:function(e,t){e.actorZoom=t.payload},setDataZoom:function(e,t){e.dataZoom=t.payload}}}),Qt={storefileData:function(e){return function(){var t=Object(f.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ge(e);case 2:200===(a=t.sent).code?window.location.reload():n(zt.actions.handleError(a.message));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},createNewProject:function(){return function(e){var t=Pe();200===t.code?window.location.reload():e(zt.actions.handleError(t.message))}},downloadData:function(e){return function(t){var n=Be(e);200!==n.code&&t(zt.actions.handleError(n.message))}},actorZoomIn:function(){return function(e,t){var n=t().global.actorZoom+.1;200===He(n).code?e(zt.actions.setActorZoom(n)):e(zt.actions.handleError("Could not save zoom!"))}},actorZoomOut:function(){return function(e,t){var n=t().global.actorZoom-.1;200===He(n).code?e(zt.actions.setActorZoom(n)):e(zt.actions.handleError("Could not save zoom!"))}},dataZoomIn:function(){return function(e,t){var n=t().global.dataZoom+.1;200===Ve(n).code?e(zt.actions.setDataZoom(n)):e(zt.actions.handleError("Could not save zoom!"))}},dataZoomOut:function(){return function(e,t){var n=t().global.dataZoom-.1;200===Ve(n).code?e(zt.actions.setDataZoom(n)):e(zt.actions.handleError("Could not save zoom!"))}},loadActorZoomFromBackend:function(){return function(e){var t=We();200===t.code?e(zt.actions.setActorZoom(t.object)):e(zt.actions.handleError("Could not save zoom!"))}},loadDataZoomFromBackend:function(){return function(e){var t=ze();200===t.code?e(zt.actions.setDataZoom(t.object)):e(zt.actions.handleError("Could not save zoom!"))}},handleError:zt.actions.handleError},Zt=function(e){return e.global.errors},Kt=function(e){return e.global.actorZoom},Jt=function(e){return e.global.dataZoom},Yt=zt.reducer,Xt=n(12),$t=n(17),en=n(25),tn=n(33),nn=n(50),an=n(49),rn=n(48),on=n(47),cn=n(45),ln=n(52),un=n(51),dn=n(53),sn=n(46),fn=n(32),mn={wrench:fn.faWrench,handPointer:cn.faHandPointer,plus:Xt.g,back:Xt.h,trash:sn.faTrashAlt,angleDown:en.faAngleDown,angleUp:tn.faAngleUp,filter:on.faFilter,pencil:Xt.e,file:rn.faFile,eye:an.faEye,warning:nn.faExclamationTriangle,error:un.faMinusCircle,info:ln.faInfoCircle,play:Xt.f,noteEmpty:Xt.a,noteFilled:Xt.b,save:dn.faSave};n(74);!function(e){e.info="info",e.warning="warning",e.error="error"}(Wt||(Wt={}));var vn,En,pn=function(e){var t=e.header,n=e.text,a=e.level,r=e.onCloseCallback;return i.a.createElement("div",{className:"notificationCard "+a},i.a.createElement("button",{className:a+" margin-medium",onClick:function(){return r()}},i.a.createElement($t.a,{icon:function(){switch(a){case"info":return mn.info;case"warning":return mn.warning;case"error":return mn.error;default:return Xt.d}}(),size:"2x",className:a})),i.a.createElement("div",null,i.a.createElement("h3",{className:a},t),i.a.createElement("label",null,n)))},hn=function(){var e=Object(c.c)(Zt),t=Object(c.b)();return i.a.createElement(i.a.Fragment,null,e.length>0&&e.map((function(e,n){return function(e,n){return i.a.createElement(pn,{key:n,header:"Error",text:e,level:Wt.error,onCloseCallback:function(){return t(zt.actions.removeErrorAtIndex(n))}})}(e,n)})))},Sn=n(21);!function(e){e.LEFT="LEFT",e.RIGHT="RIGHT",e.TOP="TOP",e.BOTTOM="BOTTOM"}(vn||(vn={})),function(e){e.IN="IN",e.OUT="OUT"}(En||(En={}));var Cn,gn,bn,On=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:vn.RIGHT,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:vn.LEFT,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:En.OUT,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:En.IN,s=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"";return Object(p.a)(this,n),(e=t.call(this)).data1Fk=a,e.data2Fk=i,e.label1=r,e.label2=o,e.direction1=c,e.direction2=l,e.type1=u,e.type2=d,e.note=s,e}return n}(Ce);n(75);!function(e){e.SEND="SEND",e.TRIGGER="TRIGGER"}(Cn||(Cn={})),function(e){e.SMOOTH="SMOOTH",e.GRID="GRID"}(gn||(gn={})),function(e){e.ARROW="ARROW"}(bn||(bn={}));var Tn,kn=function(e){var t=e.xSource,n=e.ySource,a=e.xTarget,r=e.yTarget,o=e.sourceWidth,c=e.sourceHeight,l=e.targetHeight,u=e.targetWidth,d=e.id,s=e.labels,f=e.sourceDirection,m=e.targetDirection,v=e.stroked,E=e.head,p=e.lineType,h=e.lineColor,S={x:0,y:l/2},C={x:0,y:c/2},g=function(e){switch(e){case vn.TOP:return{x:0,y:-25};case vn.LEFT:return{x:-25,y:0};case vn.RIGHT:return{x:25,y:0};case vn.BOTTOM:return{x:0,y:25};case void 0:return{x:0,y:0}}},b=function(e,t,n,a){switch(a){case vn.TOP:e.x=e.x+t/2;break;case vn.LEFT:e.y=e.y+n/2;break;case vn.RIGHT:e.x=e.x+t,e.y=e.y+n/2;break;case vn.BOTTOM:e.x=e.x+t/2,e.y=e.y+n}return e},O=function(e,t){return(t-e)/2+e},T=function(e,t,n){return"LEFT"===n?{x:e.x-t,y:e.y}:{x:e.x+t,y:e.y}},k=function(e,t){return{x:e.x-t,y:e.y}},D=function(e,t){return{x:e.x+t.x,y:e.y+t.y}},N=function(e,t){return{x:O(e.x,t.x),y:O(e.y,t.y)}},I=function(e,t){return{x:O(e.x,t.x),y:e.y}};return i.a.createElement(Sn.a.svg,{className:"componentSVGArea"},E===bn.ARROW&&i.a.createElement("defs",null,i.a.createElement("marker",{id:"arrow",markerWidth:"10",markerHeight:"10",refX:"8",refY:"3",orient:"auto",strokeWidth:"0"},i.a.createElement("path",{d:"M0,0 L0,6 L9,3 z",className:"carvArrowMarker"}))),function(e){switch(e){case gn.SMOOTH:return function(e,t,n,a){var r=n<e+o/2?"LEFT":" RIGHT",c=e<n+o/2?"LEFT":" RIGHT",l={x:"LEFT"===r?e:e+o,y:t},d={x:"LEFT"===c?n:n+u+10+20,y:a};l=D(l,C),d=D(d,S);var f=T(l,10,r);d=k(d,10);var m=N(f,d),E=I(f,m),p="LEFT"===r?"-":"",g="LEFT"===c?"":"-";return i.a.createElement(i.a.Fragment,null,i.a.createElement("path",{d:"M ".concat(l.x,",").concat(l.y," \n        l ").concat(p,"10,0\n        Q ").concat(E.x,", \n        ").concat(E.y," \n        ").concat(m.x,", \n        ").concat(m.y,"\n        T ").concat(d.x,", ").concat(d.y,"\n        l ").concat(g,"10,0\n        "),className:"carvPath ",markerEnd:"url(#arrow)",style:{stroke:h||"black",strokeDasharray:v?5.5:""}}),s.map((function(e,t){return i.a.createElement(i.a.Fragment,null,i.a.createElement("text",{x:m.x-25,y:m.y+20*t,className:"davitArrowTextBG"},e),i.a.createElement("text",{x:m.x-25,y:m.y+20*t,className:"davitArrowText"},e))})))}(t,n,a,r);case gn.GRID:return function(){var e=b({x:t,y:n},o,c,f),s=b({x:a,y:r},u,l,m),E=g(f),p=g(m),h=D(e,E),S=D(s,p);return i.a.createElement("path",{d:"M ".concat(e.x,",").concat(e.y," \n        L ").concat(h.x,",").concat(h.y,"\n        L ").concat(S.x,",").concat(S.y,"\n        L ").concat(s.x,",").concat(s.y,"\n        "),style:{strokeDasharray:v?"5,5":0,strokeWidth:"2px",fill:"transparent",stroke:"black"},id:d.toString()})}()}}(p))},Dn=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return Object(p.a)(this,n),(e=t.call(this)).decisionFk=a,e.actorFk=i,e.dataFk=r,e.instanceFk=o,e}return n}(Ce),Nn=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return Object(p.a)(this,n),(e=t.call(this)).name=a,e}return n}(Ce);!function(e){e.ADD="ADD",e.DELETE="DELETE",e.SEND="SEND",e.SEND_AND_DELETE="SEND_AND_DELETE",e.TRIGGER="TRIGGER"}(Tn||(Tn={}));var In,yn=Object(m.b)({name:"masterData",initialState:{actors:[],groups:[],datas:[],relations:[],sequences:[],sequenceConfigurations:[],chains:[],chainLinks:[],chainDecisions:[],sequenceState:[],chainState:[],chainConfigurations:[]},reducers:{setActors:function(e,t){e.actors=t.payload},setGroups:function(e,t){e.groups=t.payload},setDatas:function(e,t){e.datas=t.payload},setRelations:function(e,t){e.relations=t.payload},setSequences:function(e,t){e.sequences=t.payload},setSequenceConfigurations:function(e,t){e.sequenceConfigurations=t.payload},setChains:function(e,t){e.chains=t.payload},setChainLinks:function(e,t){e.chainLinks=t.payload},setChainDecisions:function(e,t){e.chainDecisions=t.payload},setSequenceStates:function(e,t){e.sequenceState=t.payload},setChainStates:function(e,t){e.chainState=t.payload},setChainConfigurations:function(e,t){e.chainConfigurations=t.payload}}}),An=function(){return function(){var e=Object(f.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pt();case 2:200===(n=e.sent).code?t(yn.actions.setGroups(n.object)):t(Qt.handleError(n.message));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Fn=function(){return function(){var e=Object(f.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qe();case 2:200===(n=e.sent).code?t(yn.actions.setActors(n.object)):t(Qt.handleError(n.message));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},qn=function(){return function(e){var t=dt();200===t.code?e(yn.actions.setDatas(t.object)):e(Qt.handleError(t.message))}},jn=function(){return function(e){var t=vt();200===t.code?e(yn.actions.setRelations(t.object)):e(Qt.handleError(t.message))}},wn=function(){return function(e){var t=Ye();200===t.code?e(yn.actions.setSequences(t.object)):e(Qt.handleError(t.message))}},xn=function(){return function(e){var t=it();200===t.code?e(yn.actions.setSequenceConfigurations(t.object)):e(Qt.handleError(t.message))}},Rn=function(){return function(e){var t=lt();200===t.code?e(yn.actions.setChainConfigurations(t.object)):e(Qt.handleError(t.message))}},Ln=function(){return function(e){var t=Tt();200===t.code?e(yn.actions.setChains(t.object)):e(Qt.handleError(t.message))}},_n=function(){return function(e){var t=yt();200===t.code?e(yn.actions.setChainLinks(t.object)):e(Qt.handleError(t.message))}},Mn=function(){return function(e){var t=qt();200===t.code?e(yn.actions.setChainDecisions(t.object)):e(Qt.handleError(t.message))}},Un=function(){return function(e){var t=Gt();200===t.code?e(yn.actions.setChainStates(t.object)):e(Qt.handleError(t.message))}},Gn=function(){return function(e){var t=Lt();200===t.code?e(yn.actions.setSequenceStates(t.object)):e(Qt.handleError(t.message))}},Pn=yn.reducer,Bn=function(e){return e.masterData.actors},Hn=function(e){return e.masterData.datas},Vn=function(e){return e.masterData.relations},Wn=function(e){return e.masterData.sequences},zn=function(e){return e.masterData.chains},Qn=function(e){return e.masterData.chainLinks},Zn=function(e){return e.masterData.chainDecisions},Kn=function(e){return e.masterData.sequenceConfigurations},Jn=function(e){return function(t){return void 0!==e?t.masterData.sequenceConfigurations.filter((function(t){return t.sequenceFk===e})):t.masterData.sequenceConfigurations}},Yn=function(e){return function(t){return void 0!==e?t.masterData.chainConfigurations.filter((function(t){return t.chainFk!==e})):t.masterData.chainConfigurations}},Xn=function(e){return function(t){return t.masterData.sequenceState.filter((function(t){return t.sequenceFk===e}))}},$n=function(e){return function(t){return t.masterData.chainState.filter((function(t){return t.chainFk===e}))}},ea=function(e){return function(t){return t.masterData.datas.find((function(t){return t.data.id===e}))||null}},ta=function(e){return function(t){var n=!0;return t.masterData.chainLinks.some((function(t){return t.chainFk===e}))&&(n=!1),t.masterData.chainDecisions.some((function(t){return t.chainFk===e}))&&(n=!1),n}},na=Ln,aa=_n,ia=Mn,ra=Un,oa=An,ca=Fn,la=xn,ua=jn,da=wn,sa=Gn,fa=qn,ma=Rn,va=function(){return function(e){e(An()),e(Fn()),e(xn()),e(jn()),e(wn()),e(qn()),e(Ln()),e(_n()),e(Mn()),e(Un()),e(Gn()),e(Rn())}},Ea={findSequenceStepCTO:function(e){var t,n=at(e);return 200===n.code&&(t=k.deepCopy(n.object)),t}};!function(e){e.NEW="NEW",e.UPDATED_TO="UPDATED_TO",e.UPDATED_FROM="UPDATED_FROM",e.SENT="SENT",e.PERSISTENT="PERSISTENT",e.DELETED="DELETED",e.CHECKED="CHECKED",e.CHECK_FAILED="CHECK_FAILED",e.ERROR_ADD="ERROR_ADD",e.ERROR_CHECK="ERROR_CHECK",e.ERROR_SEND="ERROR_SEND",e.ERROR_DELETE="ERROR_DELETE"}(In||(In={}));var pa=function(e,t){var n=t.filter((function(e){return!Ca(e.state)})).map((function(e){return Object(v.a)(Object(v.a)({},e),{},{state:In.PERSISTENT})})),a=[];return e.forEach((function(e){var t=Sa(e.receivingActorFk,e.dataFk,n),i=Sa(e.sendingActorFk,e.dataFk,n);switch(e.actionType){case Tn.ADD:ga(t)?n[t].instanceFk!==e.instanceFk?(n.push({actorFk:e.receivingActorFk,dataFk:e.dataFk,instanceFk:e.instanceFk,state:In.UPDATED_TO}),n[t]=Object(v.a)(Object(v.a)({},n[t]),{},{state:In.UPDATED_FROM})):a.push(e):n.push({actorFk:e.receivingActorFk,dataFk:e.dataFk,instanceFk:e.instanceFk,state:In.NEW});break;case Tn.DELETE:ga(t)?n[t].state=In.DELETED:a.push(e);break;case Tn.SEND:if(ga(i)){var r={actorFk:e.receivingActorFk,dataFk:e.dataFk,instanceFk:n[i].instanceFk,state:In.SENT};n[i].state=In.SENT,ga(t)?(n.push({actorFk:e.receivingActorFk,dataFk:e.dataFk,instanceFk:n[t].instanceFk,state:In.UPDATED_FROM}),n[t]=Object(v.a)(Object(v.a)({},r),{},{state:In.UPDATED_TO})):n.push(r)}else a.push(e);break;case Tn.SEND_AND_DELETE:if(ga(i)){var o={actorFk:e.receivingActorFk,dataFk:e.dataFk,instanceFk:n[i].instanceFk,state:In.SENT};n[i].state=In.DELETED,ga(t)?n[t]=Object(v.a)(Object(v.a)({},o),{},{state:In.UPDATED_TO}):n.push(o)}else a.push(e)}})),{actorDatas:n,errors:a,falseStates:[],trueStates:[]}},ha=function(e,t,n,a){var i=t.filter((function(e){return!Ca(e.state)})).map((function(e){return Object(v.a)(Object(v.a)({},e),{},{state:In.PERSISTENT})})),r=e.ifGoTo;e.conditions.forEach((function(t){var n=i.find((function(e){return e.actorFk===t.actorFk&&e.dataFk===t.dataFk&&e.instanceFk===t.instanceFk}));n?n.state=In.CHECKED:(i.push({actorFk:t.actorFk,dataFk:t.dataFk,instanceFk:t.instanceFk,state:In.CHECK_FAILED}),r=e.elseGoTo)}));var o=[],c=[],l=n.map((function(e){return a.forEach((function(t){e.id===t.sequenceStateFk&&(e.isState=t.value)})),e}));return e.stateFkAndStateConditions.forEach((function(t){var n=l.find((function(e){return e.id===t.stateFk}));n&&(n.isState!==t.stateCondition?(o.push(n),r=e.elseGoTo):c.push(n))})),{actorDatas:i,goto:r,falseStates:o,trueStates:c}},Sa=function(e,t,n){return n.findIndex((function(n){return n.actorFk===e&&n.dataFk===t&&!Ca(n.state)}))},Ca=function(e){return e===In.DELETED||e===In.UPDATED_FROM||e===In.CHECK_FAILED};function ga(e){return-1!==e}var ba,Oa=function(e,t,n){var a={sequenceModel:e,stepIds:[],calculatedSteps:[],terminal:{type:O.ERROR}},i=[],r=-1;if(e&&t){var o=t.initDatas.map((function(e,t){return{actionType:Tn.ADD,receivingActorFk:e.actorFk,dataFk:e.dataFk,instanceFk:e.instanceFk,id:-1,sequenceStepFk:-1,sendingActorFk:-1,triggerText:"",index:t}})),c=pa(o,n||[]);a.calculatedSteps.push(Ta(c));var l=k.deepCopy(c.actorDatas),u=ka(e);if(void 0!==u){for(var d=u,s=Ia(d),f="root";!Aa(r)&&(s===O.STEP||s===O.DEC);){if(s===O.STEP){var m=d,E=Na(m,l);l=E.actorDatas,r=ya(a,m,E),f+="_STEP_"+m.sequenceStepTO.id,i.push(f),a.calculatedSteps.push({stepId:f,actorDatas:l,errors:E.errors,modelElementFk:m.sequenceStepTO.id,type:"STEP",falseStates:E.falseStates,trueStates:E.trueStates}),Aa(r)||(d=Da(d.sequenceStepTO.goto,e),s=Ia(d))}if(s===O.DEC){var p=d,h=ha(p,l,e.sequenceStates,t.stateValues);l=h.actorDatas,d=Da(h.goto,e),s=Ia(d),f+="_DEC_"+p.id,i.push(f),a.calculatedSteps.push({stepId:f,actorDatas:l,errors:[],modelElementFk:p.id,type:"DECISION",falseStates:h.falseStates,trueStates:h.trueStates})}}if(!Aa(r)){a.terminal=d;var S=pa([],l);a.calculatedSteps.push({stepId:f+"_"+d.type,actorDatas:S.actorDatas,type:"TERMINAL",errors:S.errors,falseStates:S.falseStates,trueStates:S.trueStates}),i.push(f+"_"+d.type)}}}return Object(v.a)(Object(v.a)({},a),{},{stepIds:i,loopStartingStepIndex:Aa(r)?r:void 0})},Ta=function(e){return{stepId:"root",actorDatas:e.actorDatas,type:"INIT",errors:e.errors,falseStates:e.falseStates,trueStates:e.trueStates}},ka=function(e){var t=e.sequenceStepCTOs.find((function(e){return e.sequenceStepTO.root})),n=e.decisions.find((function(e){return e.root}));return t||(n||void 0)},Da=function(e,t){var n;switch(e.type){case O.STEP:n=function(e,t){return t.sequenceStepCTOs.find((function(t){return t.sequenceStepTO.id===e}))}(e.id,t)||{type:O.ERROR};break;case O.DEC:n=function(e,t){return t.decisions.find((function(t){return t.id===e}))}(e.id,t)||{type:O.ERROR};break;case O.FIN:n={type:O.FIN};break;case O.IDLE:n={type:O.IDLE};break;default:n={type:O.ERROR}}return n},Na=function(e,t){return pa(e.actions,t)},Ia=function(e){if(e.sequenceStepTO)return O.STEP;if(e.elseGoTo)return O.DEC;if(e.type)return e.type;throw Error("Illegal Type in Sequence")},ya=function(e,t,n){return e.calculatedSteps.findIndex((function(e){return e.modelElementFk===t.sequenceStepTO.id&&e.actorDatas.length===n.actorDatas.length&&!e.actorDatas.some((function(e){return!n.actorDatas.some((function(t){return t.actorFk===e.actorFk&&t.dataFk===e.dataFk}))}))}))},Aa=function(e){return e>-1},Fa=function(e,t){var n={calcLinks:[],linkIds:[],terminal:{type:D.ERROR}},a=-1,i=[];if(e){var r=ja(e);if(r){for(var o=r,c=xa(o),l="";!La(a)&&(c===D.LINK||c===D.DEC);){if(c===D.LINK){var u=o;a=Ra(n,u,i);var d=Oa(u.sequence,u.sequenceConfiguration,i);i=d.calculatedSteps.length>0?d.calculatedSteps[d.calculatedSteps.length-1].actorDatas:[];var s="_LINK_"+u.chainLink.id;l=""===l?u.chainLink.id.toString():l+s,n.linkIds.push(l),n.calcLinks.push({name:u.chainLink.name,chainLinkId:u.chainLink.id,stepId:l,sequence:d,sequenceConfiguration:u.sequenceConfiguration,errors:d.calculatedSteps.map((function(e){return e.errors})).flat(1)}),La(a)||(o=wa(o.chainLink.goto,e),c=xa(o))}if(c===D.DEC){var f=o,m=qa(f,i,t.stateValues);o=wa(m,e),c=xa(o);var E="_DEC_"+f.id;l=""===l?"root":l+E,n.linkIds.push(l)}}La(a)||(n.terminal=o,n.linkIds.push(l+"_"+o.type))}}return Object(v.a)(Object(v.a)({},n),{},{loopStartingIndex:La(a)?a:void 0})},qa=function(e,t,n){var a;return e.conditions!==[]&&e.conditions.forEach((function(n){t.some((function(e){return e.dataFk===n.dataFk&&e.instanceFk===n.instanceFk&&e.actorFk===n.actorFk}))||(a=e.elseGoTo)})),e.stateFkAndStateConditions.forEach((function(t){var i=n.find((function(e){return e.chainStateFk===t.stateFk}));i&&i.value!==t.stateCondition&&(a=e.elseGoTo)})),a||e.ifGoTo},ja=function(e){var t=null;return k.isNullOrUndefined(e)||(t=e.links.find((function(e){return e.chainLink.root}))||null),t},wa=function(e,t){var n={type:D.ERROR};switch(e.type){case D.LINK:n=function(e,t){return t.links.find((function(t){return t.chainLink.id===e}))}(e.id,t)||{type:D.ERROR};break;case D.DEC:n=function(e,t){return t.decisions.find((function(t){return t.id===e}))}(e.id,t)||{type:D.ERROR};break;case D.FIN:n={type:D.FIN}}return n},xa=function(e){if(e.chainLink)return D.LINK;if(e.elseGoTo)return D.DEC;if(e.type)return e.type;throw Error("Illegal Type in Sequence")},Ra=function(e,t,n){return e.calcLinks.findIndex((function(e){return e.chainLinkId===t.chainLink.id&&e.sequence.calculatedSteps[0].actorDatas.length===n.length&&!e.sequence.calculatedSteps[0].actorDatas.some((function(e){return!n.some((function(t){return t.actorFk===e.actorFk&&t.dataFk===e.dataFk}))}))}))},La=function(e){return e>-1};!function(e){e.sequence="sequence",e.chain="chain"}(ba||(ba={}));var _a={selectedSequenceModel:null,selectedSequenceConfiguration:null,calcSequence:null,calcChain:null,currentStepIndex:0,currentLinkIndex:0,errorActions:[],actions:[],actorDatas:[],activeFilter:[],selectedChain:null,selectedChainConfiguration:null,viewLevel:ba.sequence},Ma=Object(m.b)({name:"sequenceModel",initialState:_a,reducers:{setViewLevel:function(e,t){e.viewLevel=t.payload},setSelectedSequence:function(e,t){e.selectedSequenceModel=t.payload,e.selectedChain=null,e.calcChain=null,e.currentLinkIndex=0,e.currentStepIndex=0,t.payload&&e.selectedSequenceConfiguration?Ua(t.payload,e.selectedSequenceConfiguration,e):Ga(e)},recalcSequence:function(e){e.selectedSequenceModel&&e.selectedSequenceConfiguration&&Ua(e.selectedSequenceModel,e.selectedSequenceConfiguration,e)},setCurrentLinkIndex:function(e,t){e.currentStepIndex=0,e.calcChain&&e.calcChain.calcLinks.length>t.payload&&t.payload>=0?e.currentLinkIndex=t.payload:e.calcChain&&t.payload<0?e.currentLinkIndex=e.calcChain.calcLinks.length-1:e.currentLinkIndex=0},setSelectedChain:function(e,t){e.selectedChain=t.payload,Ga(e),e.selectedSequenceModel=null,e.selectedSequenceConfiguration=null,e.currentLinkIndex=0,e.currentStepIndex=0},setSelectedChainConfiguration:function(e,t){e.selectedChainConfiguration=t.payload,e.currentLinkIndex=0,e.currentStepIndex=0},setCalcChain:function(e,t){e.calcChain=t.payload},setSelectedSequenceConfiguration:function(e,t){e.selectedSequenceConfiguration=t.payload,e.selectedChain=null,e.calcChain=null,e.currentLinkIndex=0,t.payload&&e.selectedSequenceModel?Ua(e.selectedSequenceModel,t.payload,e):Ga(e)},addDataFilter:function(e,t){e.activeFilter=[].concat(Object(M.a)(e.activeFilter),[{type:"DATA",id:t.payload}]),e.currentStepIndex=0},removeDataFilter:function(e,t){e.activeFilter=e.activeFilter.filter((function(e){return!("DATA"===e.type&&e.id===t.payload)})),e.currentStepIndex=0},addActorFilters:function(e,t){e.activeFilter=[].concat(Object(M.a)(e.activeFilter),[{type:"ACTOR",id:t.payload}]),e.currentStepIndex=0},removeActorFilter:function(e,t){e.activeFilter=e.activeFilter.filter((function(e){return!("ACTOR"===e.type&&e.id===t.payload)})),e.currentStepIndex=0},setCurrentStepIndex:function(e,t){var n,a,i=[];mi(e)&&(i=Pa((null===(n=mi(e))||void 0===n?void 0:n.calculatedSteps)||[],e.activeFilter,(null===(a=vi(e))||void 0===a?void 0:a.sequenceStepCTOs)||[]));var r=t.payload;if(mi(e)&&r>=0&&r<i.length)e.currentStepIndex=t.payload;else if(e.calcChain&&r===i.length)e.currentLinkIndex<e.calcChain.calcLinks.length-1?(e.currentLinkIndex=e.currentLinkIndex+1,e.currentStepIndex=0):(e.currentLinkIndex=0,e.currentStepIndex=0);else if(e.calcChain&&-1===r){var o,c=e.currentLinkIndex>0?e.currentLinkIndex-1:e.calcChain.calcLinks.length-1,l=Pa(e.calcChain.calcLinks[c].sequence.calculatedSteps||[],e.activeFilter,(null===(o=e.calcChain.calcLinks[c].sequence.sequenceModel)||void 0===o?void 0:o.sequenceStepCTOs)||[]);e.currentStepIndex=l.length-1,e.currentLinkIndex=c}else e.currentStepIndex=0},setErrorActions:function(e,t){e.errorActions=t.payload},setActions:function(e,t){e.actions=t.payload},setActorDatas:function(e,t){e.actorDatas=t.payload},setFilter:function(e,t){e.activeFilter=t.payload,e.currentStepIndex=0}}});function Ua(e,t,n){var a,i,r=Oa(e,t);n.currentStepIndex=0,n.errorActions=(null===(a=r.calculatedSteps[n.currentStepIndex])||void 0===a?void 0:a.errors)||[],n.actorDatas=(null===(i=r.calculatedSteps[n.currentStepIndex])||void 0===i?void 0:i.actorDatas)||[],n.calcSequence=r}function Ga(e){e.errorActions=[],e.actorDatas=[],e.calcSequence=null,e.activeFilter=[]}var Pa=function(e,t,n){return 0===t.length?e:e.filter((function(e){return t.some((function(t){var a,i=(null===(a=n.find((function(t){return t.sequenceStepTO.id===e.modelElementFk})))||void 0===a?void 0:a.actions)||[];switch(t.type){case"ACTOR":return i.some((function(e){return e.receivingActorFk===t.id}));case"DATA":return i.some((function(e){return e.dataFk===t.id}));default:return!1}}))}))},Ba=function(e,t){var n=[];return e.forEach((function(e){var a,i,r=null===(a=t.masterData.actors.find((function(t){return t.actor.id===e.sendingActorFk})))||void 0===a?void 0:a.geometricalData,o=null===(i=t.masterData.actors.find((function(t){return t.actor.id===e.receivingActorFk})))||void 0===i?void 0:i.geometricalData,c=[];if(e.actionType===Tn.TRIGGER)c.push(e.triggerText);else{var l,u=null===(l=t.masterData.datas.find((function(t){return t.data.id===e.dataFk})))||void 0===l?void 0:l.data.name;u&&c.push(u)}var d=e.actionType.includes("SEND")?Cn.SEND:Cn.TRIGGER;if(r&&o){var s,f=n.find((function(e){return e.sourceGeometricalData.geometricalData.id===r.geometricalData.id&&e.targetGeometricalData.geometricalData.id===o.geometricalData.id}));if(f)(s=f.dataLabels).push.apply(s,c);else n.push({sourceGeometricalData:r,targetGeometricalData:o,dataLabels:c,type:d})}})),n},Ha=Ma.reducer,Va=function(e){return e.sequenceModel.activeFilter},Wa=function(e){return vi(e.sequenceModel)},za=function(e){var t;return(null===(t=e.sequenceModel.selectedChain)||void 0===t?void 0:t.chain)||null},Qa=function(e){return e.sequenceModel.selectedChain||null},Za=function(e){var t;return(null===(t=e.sequenceModel.selectedChain)||void 0===t?void 0:t.links)||[]},Ka=function(e){var t;return(null===(t=e.sequenceModel.selectedChain)||void 0===t?void 0:t.decisions)||[]},Ja=function(e){return e.sequenceModel.calcChain||null},Ya=function(e){if(e.edit.mode===Ei.VIEW){var t=vi(e.sequenceModel),n=mi(e.sequenceModel);return Pa((null===n||void 0===n?void 0:n.calculatedSteps)||[],e.sequenceModel.activeFilter,(null===t||void 0===t?void 0:t.sequenceStepCTOs)||[])}return[]},Xa=function(e){return e.sequenceModel.viewLevel},$a=function(e){var t;return e.edit.mode===Ei.VIEW&&(null===(t=mi(e.sequenceModel))||void 0===t?void 0:t.stepIds)||[]},ei=function(e){var t;return e.edit.mode===Ei.VIEW&&(null===(t=mi(e.sequenceModel))||void 0===t?void 0:t.terminal)||null},ti=function(e){var t=[];if(e.sequenceModel.calcSequence||e.sequenceModel.calcChain){var n,a=fi(e);t.push.apply(t,Object(M.a)((null===(n=a[e.sequenceModel.currentStepIndex])||void 0===n?void 0:n.actorDatas)||[]))}if(e.sequenceModel.selectedSequenceConfiguration&&!e.sequenceModel.calcSequence&&!e.sequenceModel.calcChain){var i,r=(null===(i=e.sequenceModel.selectedSequenceConfiguration)||void 0===i?void 0:i.initDatas)||[];t.push.apply(t,Object(M.a)(r.map(pi)))}return t},ni=function(e){var t;return(null===(t=fi(e)[e.sequenceModel.currentStepIndex])||void 0===t?void 0:t.errors)||[]},ai=function(e){var t;return(null===(t=fi(e)[e.sequenceModel.currentStepIndex])||void 0===t?void 0:t.falseStates)||[]},ii=function(e){var t;return(null===(t=fi(e)[e.sequenceModel.currentStepIndex])||void 0===t?void 0:t.trueStates)||[]},ri=function(e){var t,n,a,i=null===(t=fi(e)[e.sequenceModel.currentStepIndex])||void 0===t?void 0:t.modelElementFk;return i&&(null===(n=vi(e.sequenceModel))||void 0===n||null===(a=n.sequenceStepCTOs.find((function(e){return e.sequenceStepTO.id===i})))||void 0===a?void 0:a.actions)||[]},oi=function(e){return e.sequenceModel.currentStepIndex},ci=function(e){var t,n;return(null===(t=mi(e.sequenceModel))||void 0===t||null===(n=t.calculatedSteps[e.sequenceModel.currentStepIndex])||void 0===n?void 0:n.stepId)||""},li=function(e){return e.sequenceModel.currentLinkIndex},ui=function(e){var t,n;return(null===(t=e.sequenceModel.calcChain)||void 0===t||null===(n=t.calcLinks[e.sequenceModel.currentLinkIndex])||void 0===n?void 0:n.stepId)||""},di=function(e){var t,n,a=[],i=fi(e),r=[],o="STEP"===(null===(t=i[e.sequenceModel.currentStepIndex])||void 0===t?void 0:t.type)?null===(n=i[e.sequenceModel.currentStepIndex])||void 0===n?void 0:n.modelElementFk:void 0;o&&r.push(o);var c=[];return r.forEach((function(t){var n,a=function(e,t,n){var a,i=[];return e&&t&&(a=t.find((function(t){return t.sequenceStepTO.id===e}))),a&&(i=Ba(a.actions,n)),i}(t,(null===(n=vi(e.sequenceModel))||void 0===n?void 0:n.sequenceStepCTOs)||[],e);c=c.concat(a)})),c.forEach((function(e){e&&a.push(e)})),a},si=function(e){var t;return(null===(t=mi(e.sequenceModel))||void 0===t?void 0:t.loopStartingStepIndex)||null};function fi(e){var t,n;return e.edit.mode===Ei.VIEW?Pa((null===(t=mi(e.sequenceModel))||void 0===t?void 0:t.calculatedSteps)||[],e.sequenceModel.activeFilter,(null===(n=vi(e.sequenceModel))||void 0===n?void 0:n.sequenceStepCTOs)||[]):[]}function mi(e){var t;return e.selectedChain?(null===(t=e.calcChain)||void 0===t?void 0:t.calcLinks[e.currentLinkIndex].sequence)||null:e.calcSequence}function vi(e){var t;return e.selectedChain?(null===(t=e.calcChain)||void 0===t?void 0:t.calcLinks[e.currentLinkIndex].sequence.sequenceModel)||null:e.selectedSequenceModel}var Ei,pi=function(e){return{state:In.PERSISTENT,actorFk:e.actorFk,dataFk:e.dataFk,instanceFk:e.instanceFk}},hi={setCurrentSequence:Ma.actions.setSelectedSequence,setCurrentSequenceById:function(e){return function(t){var n=Xe(e);200!==n.code?t(Qt.handleError(n.message)):t(Ma.actions.setSelectedSequence(n.object))}},setCurrentSequenceByIdWithStates:function(e,t){return function(n){var a=Xe(e);if(200!==a.code)n(Qt.handleError(a.message));else{var i=a.object;i.sequenceStates=t,n(Ma.actions.setSelectedSequence(i))}}},setCurrentSequenceConfigurationById:function(e){return function(t){var n=rt(e);200===n.code?t(Ma.actions.setSelectedSequenceConfiguration(n.object)):t(Qt.handleError(n.message))}},setCurrentSequenceConfiguration:Ma.actions.setSelectedSequenceConfiguration,resetCurrentSequenceConfiguration:Ma.actions.setSelectedSequenceConfiguration(null),resetCurrentStepIndex:Ma.actions.setCurrentStepIndex(-1),resetCurrentSequence:Ma.actions.setSelectedSequence(null),resetCurrentChain:Ma.actions.setSelectedChain(null),resetAll:function(e){e(Ma.actions.setSelectedSequenceConfiguration(null)),e(Ma.actions.setCurrentStepIndex(-1)),e(Ma.actions.setSelectedSequence(null)),e(Ma.actions.setSelectedChain(null))},setCurrentStepIndex:Ma.actions.setCurrentStepIndex,setCurrentLinkIndex:Ma.actions.setCurrentLinkIndex,handleActorClickEvent:function(e){return function(t){var n=[];n.push({type:"ACTOR",id:e}),t(Ma.actions.setFilter(n))}},handleDataClickEvent:function(e){return function(t){var n=[];n.push({type:"DATA",id:e}),t(Ma.actions.setFilter(n))}},stepNext:function(e){return function(t){t(hi.setCurrentStepIndex(e+1))}},stepBack:function(e){return function(t){t(hi.setCurrentStepIndex(e-1))}},linkBack:function(e){return function(t,n){t(n().sequenceModel.currentStepIndex>0?Ma.actions.setCurrentStepIndex(0):hi.setCurrentLinkIndex(e-1))}},linkNext:function(e){return function(t){t(hi.setCurrentLinkIndex(e+1))}},setCurrentChain:function(e){return function(t,n){var a=n().edit.mode,i=kt(e);if(200!==i.code)t(Qt.handleError(i.message));else{var r=i.object;t(Ma.actions.setSelectedChain(r));var o=n().sequenceModel.selectedChainConfiguration;r&&a===Ei.VIEW&&null!==o&&ja(r)&&t(Ma.actions.setCalcChain(Fa(r,o)))}}},setCurrentChainConfiguration:Ma.actions.setSelectedChainConfiguration,addDataFilters:Ma.actions.addDataFilter,removeDataFilters:Ma.actions.removeDataFilter,addActorFilters:Ma.actions.addActorFilters,removeActorFilter:Ma.actions.removeActorFilter,setViewLevel:function(e){return function(t,n){switch(e){case ba.chain:null!==n().sequenceModel.selectedChain&&t(Ma.actions.setViewLevel(e));break;case ba.sequence:t(Ma.actions.setViewLevel(e))}}}},Si=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Object(p.a)(this,n),(e=t.call(this)).name=a,e.geometricalDataFk=i,e.designFk=r,e.groupFks=o,e.note=c,e}return n}(Ce),Ci=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#3498db";return Object(p.a)(this,n),(e=t.call(this)).color=a,e}return n}(Ce),gi=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return Object(p.a)(this,n),(e=t.call(this)).width=a,e.height=i,e.positionFk=r,e}return n}(Ce),bi=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return Object(p.a)(this,n),(e=t.call(this)).x=a,e.y=i,e}return n}(Ce),Oi=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new bi,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new gi;Object(p.a)(this,e),this.position=t,this.geometricalData=n},Ti=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Si,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oi,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ci;Object(p.a)(this,e),this.actor=t,this.geometricalData=n,this.design=a},ki=function(e){return function(t,n){var a=n().edit.mode;a===Ei.EDIT_ACTOR?t(mr.setActorToEdit(e)):t(Qt.handleError("Try to set actor to edit in mode: "+a))}},Di=function(e){return function(t){var n=Ze(e);200!==n.code&&(console.log(n),t(Qt.handleError(n.message))),t(ca())}},Ni=function(e){return function(){var t=Object(f.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Ke(e);case 2:200!==(a=t.sent).code&&(console.log(a),n(Qt.handleError(a.message))),n(ca());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Ii=function(){return function(e){var t=new Ti,n=Ze(t);200!==n.code&&(console.log(n),e(Qt.handleError(n.message))),e(ca()),e(ki(n.object))}},yi=function(e){return function(t){var n=It(e);200!==n.code&&t(Qt.handleError(n.message)),t(aa())}},Ai=function(e){return function(t,n){var a=n().edit.mode;a===Ei.EDIT_CHAIN_LINK?t(mr.setChainLinkToEdit(e)):console.warn("Try to set chain step to edit in mode: "+a)}},Fi={create:function(e,t,n){return function(a){var i=It(e);200!==i.code?a(Qt.handleError(i.message)):(void 0!==t&&(void 0!==t.sequenceConfigurationFk&&(t.goto={type:D.LINK,id:i.object.id},a(yi(t))),void 0!==t.ifGoTo&&(n?t.ifGoTo={type:D.LINK,id:i.object.id}:t.elseGoTo={type:D.LINK,id:i.object.id},a(wi.save(t)))),a(Ai(i.object)))}},save:yi,delete:function(e){return function(t){var n=At(e);200!==n.code&&t(Qt.handleError(n.message)),t(aa())}},find:function(e){var t=Rt(e);return 200!==t.code&&console.warn(t.message),t.object}},qi=function(e){return function(t){var n=Ft(e);200!==n.code&&t(Qt.handleError(n.message)),t(ia())}},ji=function(e){return function(t,n){var a=n().edit.mode;a===Ei.EDIT_CHAIN_DECISION||a===Ei.EDIT_CHAIN_DECISION_CONDITION?t(mr.setChainDecisionToEdit(e)):t(Qt.handleError("Try to set chain step to edit in mode: "+a))}},wi={create:function(e,t,n){return function(a){var i=Ft(e);200!==i.code?a(Qt.handleError(i.message)):(void 0!==t&&(void 0!==t.sequenceConfigurationFk&&(t.goto={type:D.DEC,id:i.object.id},a(Fi.save(t))),void 0!==t.elseGoTo&&(n?t.ifGoTo={type:D.DEC,id:i.object.id}:t.elseGoTo={type:D.DEC,id:i.object.id},a(qi(t)))),a(ji(i.object)))}},save:qi,delete:function(e){return function(t){var n=jt(e);200!==n.code&&t(Qt.handleError(n.message)),t(ia())}},find:function(e){var t=xt(e);return 200!==t.code&&console.warn(t.message),t.object},update:ji},xi=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(p.a)(this,n),(e=t.call(this)).name=a,e.note=i,e}return n}(Ce),Ri=function(){return function(e){var t=new xi,n=Dt(t);200!==n.code&&e(Qt.handleError(n.message)),e(na()),e(hi.setCurrentChain(n.object))}},Li=function(e){return function(t){var n=Dt(e);200!==n.code&&t(Qt.handleError(n.message)),t(na()),t(hi.setCurrentChain(n.object))}},_i=function(e){return function(t){var n=Nt(e);200!==n.code&&t(Qt.handleError(n.message)),t(na()),t(ia()),t(aa())}},Mi=function(e,t,n){return function(a){var i=wt(e,t,n);200!==i.code&&a(Qt.handleError(i.message)),a(na()),a(aa()),a(ia())}},Ui=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[{id:-1,name:"default"}],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";return Object(p.a)(this,n),(e=t.call(this)).name=a,e.geometricalDataFk=i,e.dataConnectionFks=r,e.instances=o,e.note=c,e}return n}(Ce),Gi=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ui,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Oi;Object(p.a)(this,e),this.data=t,this.geometricalData=n},Pi=function(e){return function(t,n){var a=n().edit.mode;a===Ei.EDIT_DATA||a===Ei.EDIT_DATA_INSTANCE?t(mr.setDataToEdit(e)):t(Qt.handleError("Try to set data to edit in mode: "+a))}},Bi=function(e){return function(t){var n=st(e);200!==n.code&&(console.log(n),t(Qt.handleError(n.message))),t(fa())}},Hi=function(e){return function(t){var n=ft(e);200!==n.code&&(console.log(n),t(Qt.handleError(n.message))),t(fa()),t(ua())}},Vi=function(){return function(e){var t=new Gi,n=st(t);200!==n.code&&(console.log(n),e(Qt.handleError(n.message))),e(fa()),e(Pi(n.object))}},Wi=function(e){return function(t){var n=tt(e);200!==n.code&&t(Qt.handleError(n.message)),t(da())}},zi=function(e){return function(t,n){var a=n().edit.mode;a.startsWith(Ei.EDIT_SEQUENCE_STEP)?t(mr.setStepToEdit(e)):t(Qt.handleError("Try to set step to edit in mode: "+a))}},Qi={save:Wi,delete:function(e,t){return function(n){if(t){var a=k.deepCopy(t);a.sequenceStepCTOs.forEach((function(t){t.sequenceStepTO.goto.type===O.STEP&&t.sequenceStepTO.goto.id===e.sequenceStepTO.id&&(t.sequenceStepTO.goto={type:O.ERROR},n(Wi(t)))})),a.decisions.forEach((function(t){t.ifGoTo.type===O.STEP&&t.ifGoTo.id===e.sequenceStepTO.id&&(t.ifGoTo={type:O.ERROR},n(Yi.save(t))),t.elseGoTo.type===O.STEP&&t.elseGoTo.id===e.sequenceStepTO.id&&(t.elseGoTo={type:O.ERROR},n(Yi.save(t)))}))}var i=nt(e);200!==i.code&&n(Qt.handleError(i.message)),n(da())}},update:zi,create:function(e,t,n){return function(a){var i=tt(e);200!==i.code?a(Qt.handleError(i.message)):(void 0!==t&&(void 0!==t.sequenceStepTO&&(t.sequenceStepTO.goto={type:O.STEP,id:i.object.sequenceStepTO.id},a(Wi(t))),void 0!==t.elseGoTo&&(n?t.ifGoTo={type:O.STEP,id:i.object.sequenceStepTO.id}:t.elseGoTo={type:O.STEP,id:i.object.sequenceStepTO.id},a(Yi.save(t)))),a(zi(i.object)))}}},Zi=function(e){return function(t){var n=gt(e);200!==n.code&&t(Qt.handleError(n.message))}},Ki=function(e){var t=Ot(e);return 200!==t.code&&console.warn(t.message),k.deepCopy(t.object)},Ji=function(e){return function(t,n){var a=n().edit.mode;a===Ei.EDIT_SEQUENCE_DECISION||Ei.EDIT_SEQUENCE_DECISION_CONDITION?t(mr.setDecisionToEdit(Ki(e.id))):t(Qt.handleError("Try to set decision to edit in mode: "+a))}},Yi={create:function(e,t,n){return function(a){var i=gt(e);200!==i.code?a(Qt.handleError(i.message)):(t&&(void 0!==t.sequenceStepTO&&(t.sequenceStepTO.goto={type:O.DEC,id:i.object.id},a(Qi.save(t))),void 0!==t.elseGoTo&&(n?t.ifGoTo={type:O.DEC,id:i.object.id}:t.elseGoTo={type:O.DEC,id:i.object.id},a(Zi(t)))),a(Ji(i.object)))}},update:Ji,save:Zi,delete:function(e,t){return function(n){if(t){var a=k.deepCopy(t);a.sequenceStepCTOs.forEach((function(t){t.sequenceStepTO.goto.type===O.DEC&&t.sequenceStepTO.goto.id===e.id&&(t.sequenceStepTO.goto={type:O.ERROR},n(Qi.save(t)))})),a.decisions.forEach((function(t){t.ifGoTo.type===O.DEC&&t.ifGoTo.id===e.id&&(t.ifGoTo={type:O.ERROR},n(Zi(t))),t.elseGoTo.type===O.DEC&&t.elseGoTo.id===e.id&&(t.elseGoTo={type:O.ERROR},n(Zi(t)))}))}var i=bt(e);200!==i.code&&n(Qt.handleError(i.message)),n(da())}},find:Ki},Xi=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"red";return Object(p.a)(this,n),(e=t.call(this)).name=a,e.color=i,e}return n}(Ce),$i=function(e){return function(t,n){var a=n().edit.mode;a===Ei.EDIT_DATA||a===Ei.EDIT_DATA_INSTANCE?t(mr.setGroupToEdit(e)):t(Qt.handleError("Try to set data to edit in mode: "+a))}},er=function(){return function(e){var t=new Xi,n=ht(t);200!==n.code&&(console.log(n),e(Qt.handleError(n.message))),e(oa()),e($i(n.object))}},tr=function(e){return function(t,n){var a=n().edit.mode;a===Ei.EDIT_RELATION?t(mr.setRelationToEdit(e)):t(Qt.handleError("Try to set relation to edit in mode: "+a))}},nr=function(e){return function(){var t=Object(f.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Et(e);case 2:200!==(a=t.sent).code&&(console.log(a),n(Qt.handleError(a.message))),n(ua());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ar=function(e){return function(){var t=Object(f.a)(s.a.mark((function t(n){var a;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,mt(e);case 2:200!==(a=t.sent).code&&(console.log(a),n(Qt.handleError(a.message))),n(ua());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ir=function(){return function(e){var t=new On,n=Et(t);200!==n.code&&(console.log(n),e(Qt.handleError(n.message))),e(ua()),e(tr(n.object))}},rr=function(e){return function(t){var n=$e(e);200!==n.code&&t(Qt.handleError(n.message)),t(da()),t(cr(n.object)),t(hi.setCurrentSequenceById(n.object.id))}},or=function(e){var t=Xe(e);return 200!==t.code?null:t.object},cr=function(e){return function(t,n){var a=n().edit.mode;a===Ei.EDIT_SEQUENCE?t(mr.setSequenceToEdit(e)):t(Qt.handleError("Try to set sequence to edit in mode: "+a))}},lr={save:rr,delete:function(e){return function(t,n){var a=or(e.id);if(null!==a){var i,r,o=Je(a);200!==o.code&&t(Qt.handleError(o.message)),(null===(i=n().sequenceModel.selectedSequenceModel)||void 0===i||null===(r=i.sequenceTO)||void 0===r?void 0:r.id)===e.id&&t(hi.resetCurrentSequence),t(da())}}},update:cr,findCTO:or,create:function(){return function(e){var t=new Oe;e(rr(t))}},setRoot:function(e,t,n){return function(a){var i=et(e,t,n);200!==i.code&&a(Qt.handleError(i.message)),a(da())}}};!function(e){e.TAB="TAB",e.FILE="FILE",e.VIEW="VIEW",e.VIEW_CONFIGURATION="VIEW_CONFIGURATION",e.EDIT="EDIT",e.EDIT_ACTOR="EDIT_ACTOR",e.EDIT_GROUP="EDIT_GROUP",e.EDIT_DATA="EDIT_DATA",e.EDIT_DATA_INSTANCE="EDIT_DATA_INSTANCE",e.EDIT_RELATION="EDIT_RELATION",e.EDIT_CHAIN="EDIT_CHAIN",e.EDIT_CHAIN_STATES="EDIT_CHAIN_STATES",e.EDIT_CHAIN_DECISION="EDIT_CHAIN_DECISION",e.EDIT_CHAIN_DECISION_CONDITION="EDIT_CHAIN_DECISION_CONDITION",e.EDIT_CHAIN_LINK="EDIT_CHAIN_LINK",e.EDIT_SEQUENCE="EDIT_SEQUENCE",e.EDIT_SEQUENCE_STATES="EDIT_SEQUENCE_STATES",e.EDIT_SEQUENCE_DECISION="EDIT_SEQUENCE_DECISION",e.EDIT_SEQUENCE_DECISION_CONDITION="EDIT_SEQUENCE_DECISION_CONDITION",e.EDIT_SEQUENCE_STEP="EDIT_SEQUENCE_STEP",e.EDIT_SEQUENCE_STEP_ACTION="EDIT_SEQUENCE_STEP_ACTION"}(Ei||(Ei={}));var ur,dr,sr={objectToEdit:{},mode:Ei.EDIT,instanceId:-1},fr=Object(m.b)({name:"edit",initialState:sr,reducers:{setChainConfiguration:function(e,t){e.mode===Ei.VIEW_CONFIGURATION?e.objectToEdit=t.payload:console.warn("Try to set chain configuration to edit, in mode: "+e.mode)},setChainLinkToEdit:function(e,t){e.mode===Ei.EDIT_CHAIN_LINK?e.objectToEdit=t.payload:console.warn("Try to set chain step to edit in mode: "+e.mode)},setInstanceId:function(e,t){e.instanceId=t.payload},setChainDecisionToEdit:function(e,t){e.mode===Ei.EDIT_CHAIN_DECISION||e.mode===Ei.EDIT_CHAIN_DECISION_CONDITION?e.objectToEdit=t.payload:console.warn("Try to set chain step to edit in mode: "+e.mode)},setActorToEdit:function(e,t){e.mode===Ei.EDIT_ACTOR?e.objectToEdit=t.payload:console.warn("Try to set actor to edit in mode: "+e.mode)},setDataToEdit:function(e,t){e.mode===Ei.EDIT_DATA||e.mode===Ei.EDIT_DATA_INSTANCE?e.objectToEdit=t.payload:console.warn("Try to set data to edit in mode: "+e.mode)},setInstanceToEdit:function(e,t){e.mode===Ei.EDIT_DATA_INSTANCE?e.objectToEdit=t.payload:console.warn("Try to set data to edit in mode: "+e.mode)},setRelationToEdit:function(e,t){e.mode===Ei.EDIT_RELATION?e.objectToEdit=t.payload:console.warn("Try to set relation to edit in mode: "+e.mode)},setSequenceToEdit:function(e,t){e.mode===Ei.EDIT_SEQUENCE?e.objectToEdit=t.payload:console.warn("Try to set sequence to edit in mode: "+e.mode)},setStepToEdit:function(e,t){e.mode.startsWith(Ei.EDIT_SEQUENCE_STEP)?e.objectToEdit=t.payload:console.warn("Try to set step to edit in mode: "+e.mode)},setActionToEdit:function(e,t){e.mode===Ei.EDIT_SEQUENCE_STEP_ACTION?e.objectToEdit=t.payload:console.warn("Try to set action to edit in mode: "+e.mode)},setSequenceConfigurationToEdit:function(e,t){e.mode===Ei.VIEW_CONFIGURATION?e.objectToEdit=t.payload:console.warn("Try to set Sequence Configuration to edit in mode: "+e.mode)},setGroupToEdit:function(e,t){e.mode===Ei.EDIT_GROUP?e.objectToEdit=t.payload:console.warn("Try to set group to edit in mode: "+e.mode)},setDecisionToEdit:function(e,t){e.mode===Ei.EDIT_SEQUENCE_DECISION||Ei.EDIT_SEQUENCE_DECISION_CONDITION?e.objectToEdit=t.payload:console.warn("Try to set decision to edit in mode: "+e.mode)},setConditionToEdit:function(e,t){e.mode===Ei.EDIT_SEQUENCE_DECISION_CONDITION?e.objectToEdit=t.payload:console.warn("Try to set decision to edit in mode: "+e.mode)},clearObjectToEdit:function(e){e.objectToEdit={}},setMode:function(e,t){e.mode=t.payload}}}),mr=fr.actions,vr=function(e){return function(t,n){e!==n().edit.mode&&(localStorage.setItem("MODE",e),t(fr.actions.setMode(e)))}},Er=function(e,t,n){return function(a){a(vr(Ei.EDIT_SEQUENCE_STEP)),a(Qi.create(e,t,n))}},pr=function(e){return function(t){if(t(vr(Ei.VIEW_CONFIGURATION)),e){var n=rt(e);200===n.code?t(fr.actions.setSequenceConfigurationToEdit(k.deepCopy(n.object))):t(Qt.handleError(n.message))}else t(hi.resetCurrentSequence),t(hi.resetCurrentSequenceConfiguration)}},hr=function(e,t){var n=[];return e.forEach((function(e){var a,i,r=null===(a=t.masterData.actors.find((function(t){return t.actor.id===e.sendingActorFk})))||void 0===a?void 0:a.geometricalData,o=null===(i=t.masterData.actors.find((function(t){return t.actor.id===e.receivingActorFk})))||void 0===i?void 0:i.geometricalData,c=[];if(e.actionType===Tn.TRIGGER)c.push(e.triggerText);else{var l,u=null===(l=t.masterData.datas.find((function(t){return t.data.id===e.dataFk})))||void 0===l?void 0:l.data.name;u&&c.push(u)}var d=e.actionType.includes("SEND")?Cn.SEND:Cn.TRIGGER;if(r&&o){var s,f=n.find((function(e){return e.sourceGeometricalData.geometricalData.id===r.geometricalData.id&&e.targetGeometricalData.geometricalData.id===o.geometricalData.id}));if(f)(s=f.dataLabels).push.apply(s,c);else n.push({sourceGeometricalData:r,targetGeometricalData:o,dataLabels:c,type:d})}})),n},Sr=fr.reducer,Cr=function(e){return e.edit.mode},gr=function(e){return e.edit.mode===Ei.EDIT_ACTOR&&e.edit.objectToEdit.actor?e.edit.objectToEdit:null},br=function(e){return e.edit.mode===Ei.VIEW_CONFIGURATION&&e.edit.objectToEdit.stateValues?e.edit.objectToEdit:null},Or=function(e){return e.edit.mode===Ei.EDIT_CHAIN_LINK&&e.edit.objectToEdit.sequenceConfigurationFk?e.edit.objectToEdit:null},Tr=function(e){return e.edit.mode===Ei.EDIT_CHAIN_DECISION||e.edit.mode===Ei.EDIT_CHAIN_DECISION_CONDITION&&e.edit.objectToEdit.elseGoTo?e.edit.objectToEdit:null},kr=function(e){return e.edit.mode===Ei.EDIT_DATA||Ei.EDIT_DATA_INSTANCE&&e.edit.objectToEdit.data?e.edit.objectToEdit:null},Dr=function(e){return e.edit.mode===Ei.EDIT_RELATION&&e.edit.objectToEdit.direction1?e.edit.objectToEdit:null},Nr=function(e){return e.edit.mode!==Ei.EDIT_SEQUENCE&&e.edit.mode!==Ei.EDIT_SEQUENCE_STATES||!e.edit.objectToEdit?e.edit.mode===Ei.VIEW_CONFIGURATION&&e.edit.objectToEdit?e.edit.objectToEdit:null:e.edit.objectToEdit},Ir=function(e){if(e.edit.mode===Ei.EDIT_SEQUENCE_STEP_ACTION&&e.edit.objectToEdit.receivingActorFk){var t,n=e.edit.objectToEdit,a=e.masterData.actors.find((function(e){return e.actor.id===n.sendingActorFk})),i=e.masterData.actors.find((function(e){return e.actor.id===n.receivingActorFk})),r=n.actionType===Tn.TRIGGER?n.triggerText:(null===(t=ea(n.dataFk)(e))||void 0===t?void 0:t.data.name)||"Could not find data",o=n.actionType.includes("SEND")?Cn.SEND:Cn.TRIGGER;return a&&i?{sourceGeometricalData:a.geometricalData,targetGeometricalData:i.geometricalData,dataLabels:[r],type:o}:null}return null},yr=function(e){var t,n,a=[];return e.edit.mode===Ei.EDIT_SEQUENCE_STEP&&e.edit.objectToEdit.sequenceStepTO&&(t=e.edit.objectToEdit,n=e,a=hr(t.actions,n)),a},Ar=function(e){return e.edit.mode===Ei.VIEW_CONFIGURATION&&e.edit.objectToEdit.stateValues||e.edit.mode===Ei.VIEW_CONFIGURATION&&e.edit.objectToEdit.stateValues?e.edit.objectToEdit:null},Fr=function(e){switch(e.edit.mode){case Ei.EDIT_SEQUENCE_STEP:return e.edit.objectToEdit.sequenceStepTO?e.edit.objectToEdit:null;case Ei.EDIT_SEQUENCE_STEP_ACTION:return e.edit.objectToEdit.step?e.edit.objectToEdit.step:null;default:return null}},qr=function(e){return e.edit.mode===Ei.EDIT_SEQUENCE_STEP_ACTION&&e.edit.objectToEdit.actionType?e.edit.objectToEdit:null},jr=function(e){return(e.edit.mode===Ei.EDIT_SEQUENCE_DECISION||Ei.EDIT_SEQUENCE_DECISION_CONDITION)&&e.edit.objectToEdit.conditions?e.edit.objectToEdit:null},wr=function(e){return e.edit.mode===Ei.EDIT_SEQUENCE_DECISION_CONDITION&&e.edit.objectToEdit.decisionFk?e.edit.objectToEdit:null},xr={setMode:{editActor:function(e){return function(t){t(vr(Ei.EDIT_ACTOR)),t(void 0===e?Ii():fr.actions.setActorToEdit(e))}},editActorById:function(e){return function(t,n){var a=n().masterData.actors.find((function(t){return t.actor.id===e}));a&&(t(vr(Ei.EDIT_ACTOR)),t(fr.actions.setActorToEdit(a)))}},editData:function(e){return function(t){t(vr(Ei.EDIT_DATA)),t(void 0===e?Vi():fr.actions.setDataToEdit(e))}},editDataById:function(e){return function(t,n){var a=n().masterData.datas.find((function(t){return t.data.id===e}));a&&(t(vr(Ei.EDIT_DATA)),t(fr.actions.setDataToEdit(a)))}},editDataInstance:function(e){return function(t,n){if(n().edit.objectToEdit.data){if(void 0===e){var a=k.deepCopy(n().edit.objectToEdit),i=new Nn;i.id=a.data.instances.length,a.data.instances.push(i),t(fr.actions.setDataToEdit(a)),e=i.id}t(fr.actions.setInstanceId(e)),t(vr(Ei.EDIT_DATA_INSTANCE))}}},editInstanceById:function(e){return function(t,n){n().edit.objectToEdit.data?(t(vr(Ei.EDIT_DATA_INSTANCE)),t(fr.actions.setInstanceId(e))):t(vr(Ei.EDIT))}},editGroup:function(e){return function(t){t(vr(Ei.EDIT_GROUP)),t(void 0===e?er():fr.actions.setGroupToEdit(e))}},editRelation:function(e){return function(t){t(vr(Ei.EDIT_RELATION)),t(void 0===e?ir():fr.actions.setRelationToEdit(e))}},editSequence:function(e){return function(t){if(t(vr(Ei.EDIT_SEQUENCE)),e){var n=Xe(e);200===n.code?(t(fr.actions.setSequenceToEdit(k.deepCopy(n.object.sequenceTO))),t(hi.setCurrentSequence(n.object))):t(Qt.handleError(n.message))}else t(lr.create())}},editSequenceStates:function(){return function(e){e(vr(Ei.EDIT_SEQUENCE_STATES))}},editSequenceConfiguration:pr,editStep:Er,editDecision:function(e,t,n){return function(a){a(vr(Ei.EDIT_SEQUENCE_DECISION)),a(Yi.create(e,t,n))}},editCondition:function(e,t){return function(n){if(k.isNullOrUndefined(e))n(Qt.handleError("Edit Condition: 'Decision is null or undefined'."));else if(n(vr(Ei.EDIT_SEQUENCE_DECISION_CONDITION)),t)n(mr.setConditionToEdit(t));else{var a=k.deepCopy(e),i=new Dn;i.decisionFk=e.id,a.conditions.push(i),n(Yi.save(a)),(i=Yi.find(a.id).conditions.find((function(e){return-1===e.actorFk&&-1===e.dataFk})))&&n(mr.setConditionToEdit(i))}}},editAction:function(e){return function(t){t(vr(Ei.EDIT_SEQUENCE_STEP_ACTION)),t(fr.actions.setActionToEdit(e))}},editChain:function(e){return function(t){t(e?hi.setCurrentChain(e):Ri()),t(vr(Ei.EDIT_CHAIN))}},editChainStates:function(){return function(e){e(vr(Ei.EDIT_CHAIN_STATES))}},editChainLink:function(e,t,n){return function(a){a(vr(Ei.EDIT_CHAIN_LINK)),a(Fi.create(e,t,n))}},editChainDecision:function(e,t,n){return function(a){a(vr(Ei.EDIT_CHAIN_DECISION)),a(wi.create(e,t,n))}},editChainCondition:function(e){return function(t){t(null!==e&&void 0!==e?vr(Ei.EDIT_CHAIN_DECISION_CONDITION):Qt.handleError("Edit Condition: 'Decision is null or undefined'."))}},editConfiguration:pr,edit:function(){return function(e,t){if(e(fr.actions.clearObjectToEdit()),t().edit.mode!==Ei.VIEW)e(vr(Ei.EDIT));else{var n=t().sequenceModel.currentStepIndex;if(null!==n&&n>0){var a,i=null===(a=t().sequenceModel.selectedSequenceModel)||void 0===a?void 0:a.sequenceStepCTOs.find((function(e){return e.sequenceStepTO.id===n}));e(i?Er(i):vr(Ei.EDIT))}else e(vr(Ei.EDIT))}}},view:function(){return function(e){e(fr.actions.clearObjectToEdit()),e(vr(Ei.VIEW))}},file:function(){return function(e){e(fr.actions.clearObjectToEdit()),e(vr(Ei.FILE))}},tab:function(){return function(e){e(fr.actions.clearObjectToEdit()),e(vr(Ei.TAB))}}}};!function(e){e[e.large=0]="large",e[e.medium=1]="medium",e[e.small=2]="small",e[e.tiny=3]="tiny"}(ur||(ur={})),function(e){e[e.solid=0]="solid",e[e.outlined=1]="outlined",e[e.light=2]="light"}(dr||(dr={}));var Rr,Lr=function(e){var t=e.children;return i.a.createElement("div",{className:"dark"},t)},_r=(n(41),function(e){var t=e.onClick,n=e.size,a=void 0===n?ur.medium:n,r=e.className,o=e.children,c=e.disabled,l=e.active;return i.a.createElement("button",{onClick:t,className:ur[a]+" "+r+" "+(l?"activeButton":""),disabled:c},o)}),Mr=(n(76),function(e){var t=e.onClick,n=e.size,a=e.className,r=void 0===a?"":a,o=e.iconName,c=e.children,l=e.iconLeft,u=e.iconColor;return i.a.createElement(_r,{onClick:t,size:n,className:r},o&&l&&i.a.createElement($t.a,{className:c?"iconButtonIcon":"",icon:o,color:u}),c,o&&!l&&i.a.createElement($t.a,{className:c?"iconButtonIcon":"",icon:o,color:u}))}),Ur=function(e){var t=e.onClick;return i.a.createElement(Mr,{onClick:t,iconName:mn.plus})},Gr=function(e){var t=e.onClick;return i.a.createElement(Mr,{onClick:t,iconName:mn.back})},Pr=function(e){var t=e.onClick;return i.a.createElement(Mr,{onClick:t,iconName:fn.faWrench})},Br=n(54),Hr=function(e){var t=e.onClick,n=e.show,a=e.className,r=e.size;return i.a.createElement(Mr,{onClick:function(){return t(!n)},size:r||ur.tiny,iconName:n?en.faAngleDown:Br.faAngleRight,className:a})},Vr=(n(77),function(e){var t=e.onClick,n=e.disabled,r=e.noConfirm,o=Object(a.useState)(!1),c=Object(E.a)(o,2),l=c[0],u=c[1];Object(a.useEffect)((function(){l&&setTimeout((function(){return u(!1)}),3e3)}),[l]);return i.a.createElement(Mr,{iconName:l?void 0:mn.trash,onClick:function(){l||r?t():u(!0)},className:l?"deleteButton fluid padding-vertical-small padding-horizontal-medium border":"deleteButton",disabled:n},l?"SURE":void 0)}),Wr=n(39),zr=(n(78),function(e){var t=e.dropdownItems,n=e.onSelect,a=e.placeholder,r=e.value,o=e.clearable,c=e.classPrefix,l=e.className;return i.a.createElement(Wr.a,{classNamePrefix:c||"react-select",className:l||"react-select-container",isClearable:o,placeholder:a,value:Jr(r,t),options:t.sort((function(e,t){return e.text.toLowerCase().localeCompare(t.text.toLowerCase())})).map(Zr),onChange:function(e){return Kr(e,n)}})}),Qr=function(e){var t=e.dropdownItems,n=e.onSelect,a=e.label,r=e.className,o=e.classPrefix;return i.a.createElement(Wr.a,{classNamePrefix:o||"react-select-label",className:r||"react-select-label-container",value:{value:a,label:a},options:t.sort((function(e,t){return e.text.toLowerCase().localeCompare(t.text.toLowerCase())})).map(Zr),onChange:function(e){return Kr(e,n)},isSearchable:!1})},Zr=function(e){return{value:e.value,label:e.text}},Kr=function(e,t){var n;null!==e?t({key:-1,text:(n=e).label?n.label:"",value:n.value?n.value:""}):t({key:-1,value:"",text:""})},Jr=function(e,t){var n={value:"",label:""};if(e){var a=t.find((function(t){return t.value===e}));a&&(n.value=a.value,n.label=a.text)}return n},Yr=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=Object.values(Tn),o=function(e){var t="";switch(e){case Tn.ADD:t="Add or Update";break;case Tn.DELETE:t="Delete";break;case Tn.SEND:t="Send";break;case Tn.SEND_AND_DELETE:t="Send and delete";break;case Tn.TRIGGER:t="Trigger"}return t};return i.a.createElement(zr,{dropdownItems:r.map((function(e,t){return{key:t,value:n=e,text:o(n)};var n})),onSelect:function(e){return t(e.value)},placeholder:n,value:a})},Xr=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=eo(),o=r.actors,c=r.actorToOption,l=r.selectActor;return i.a.createElement(zr,{dropdownItems:o.map((function(e){return c(e)})),onSelect:function(e){return t(l(Number(e.value),o))},placeholder:n,value:null===a||void 0===a?void 0:a.toString()})},$r=function(e){var t=e.onSelect,n=e.label,a=eo(),r=a.actorToOption,o=a.actors,c=a.selectActor;return i.a.createElement(Qr,{dropdownItems:o.map((function(e){return r(e)})),onSelect:function(e){return t(c(Number(e.value),o))},label:n})},eo=function(){return{actors:Object(c.c)(Bn),actorToOption:function(e){return{key:e.actor.id,value:e.actor.id.toString(),text:e.actor.name}},selectActor:function(e,t){if(!k.isNullOrUndefined(t)&&!k.isNullOrUndefined(e))return t.find((function(t){return t.actor.id===e}))}}},to=function(e){var t=e.onSelect,n=e.label,a=e.chainId,r=e.exclude,o=ao(a,r),c=o.createDecisionOptions,l=o.selectChainDecision;return i.a.createElement(Qr,{dropdownItems:c(),label:n,onSelect:function(e){return t(l(Number(e.value)))}})},no=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=e.chainId,o=e.exclude,c=ao(r,o),l=c.createDecisionOptions,u=c.selectChainDecision;return i.a.createElement(zr,{dropdownItems:l(),onSelect:function(e){return t(u(Number(e.value)))},placeholder:n,value:null===a||void 0===a?void 0:a.toString()})},ao=function(e,t){var n=Object(c.c)(Zn),a=function(e){return{key:e.id,value:e.id.toString(),text:e.name}};return{createDecisionOptions:function(){if(!k.isNullOrUndefined(n)){var i=k.deepCopy(n);return i=i.filter((function(t){return t.chainFk===e})),t&&(i=i.filter((function(e){return e.id!==t}))),i.map(a)}return[]},selectChainDecision:function(e){if(!k.isNullOrUndefined(n)&&!k.isNullOrUndefined(e))return n.find((function(t){return t.id===e}))}}},io=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=oo(),o=r.chainToOption,c=r.chains,l=r.selectChain;return i.a.createElement(zr,{dropdownItems:c.map(o),onSelect:function(e){return t(l(Number(e.value)))},placeholder:n,value:a?a.toString():void 0,clearable:!0})},ro=function(e){var t=e.onSelect,n=e.label,a=oo(),r=a.selectChain,o=a.chainToOption,c=a.chains;return i.a.createElement(Qr,{dropdownItems:c.map(o),onSelect:function(e){return t(r(Number(e.value)))},label:n})},oo=function(){var e=Object(c.c)(zn);return{chainToOption:function(e){return{key:e.id,value:e.id.toString(),text:e.name}},selectChain:function(t){if(!k.isNullOrUndefined(t)&&!k.isNullOrUndefined(e))return e.find((function(e){return e.id===t}))},chains:e}},co=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=e.chainId,o=e.exclude,c=uo(r,o),l=c.linkOptions,u=c.selectChainLink;return i.a.createElement(zr,{dropdownItems:l(),value:a?-1===a?void 0:a.toString():void 0,placeholder:n,onSelect:function(e){return t(u(Number(e.value)))}})},lo=function(e){var t=e.onSelect,n=e.label,a=e.chainId,r=e.exclude,o=uo(a,r),c=o.selectChainLink,l=o.linkOptions;return i.a.createElement(Qr,{dropdownItems:l(),onSelect:function(e){return t(c(Number(e.value)))},label:n})},uo=function(e,t){var n=Object(c.c)(Qn),a=function(e){return{key:e.id,value:e.id.toString(),text:e.name}};return{linkOptions:function(){if(!k.isNullOrUndefined(n)){var i=k.deepCopy(n);return i=i.filter((function(t){return t.chainFk===e})),t&&(i=i.filter((function(e){return e.id!==t}))),i.map(a)}return[]},selectChainLink:function(e){if(!k.isNullOrUndefined(n)&&!k.isNullOrUndefined(e))return n.find((function(t){return t.id===e}))}}},so=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=mo(),o=r.datas,c=r.selectData,l=r.dataToOption;return i.a.createElement(zr,{dropdownItems:o.map(l),placeholder:n,value:null===a||void 0===a?void 0:a.toString(),onSelect:function(e){return t(c(Number(e.value),o))}})},fo=function(e){var t=e.onSelect,n=e.label,a=mo(),r=a.datas,o=a.selectData,c=a.dataToOption;return i.a.createElement(Qr,{dropdownItems:r.map(c),onSelect:function(e){return t(o(Number(e.value),r))},label:n})},mo=function(){return{datas:Object(c.c)(Hn),selectData:function(e,t){if(!k.isNullOrUndefined(e)&&!k.isNullOrUndefined(t))return t.find((function(t){return t.data.id===e}))},dataToOption:function(e){return{key:e.data.id,value:e.data.id.toString(),text:e.data.name}}}},vo=function(e){var t=e.onSelect,n=e.label,a=po(),r=a.sequenceToEdit,o=a.decisionOptions,c=a.selectDecision;return i.a.createElement(Qr,{dropdownItems:o(),onSelect:function(e){return t(c(Number(e.value),r))},label:n})},Eo=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=e.exclude,o=po(r),c=o.sequenceToEdit,l=o.decisionOptions,u=o.selectDecision;return i.a.createElement(zr,{dropdownItems:l(),placeholder:n,onSelect:function(e){return t(u(Number(e.value),c))},value:null===a||void 0===a?void 0:a.toString()})},po=function(e){var t=Object(c.c)(Wa),n=function(e){return{key:e.id,value:e.id.toString(),text:e.name}};return{sequenceToEdit:t,decisionOptions:function(){if(!k.isNullOrUndefined(t)){var a=k.deepCopy(t.decisions);return e&&(a=a.filter((function(t){return t.id!==e}))),a.map(n)}return[]},selectDecision:function(e,t){if(!k.isNullOrUndefined(t)&&!k.isNullOrUndefined(e))return t.decisions.find((function(t){return t.id===e}))}}},ho=function(e){var t=e.onSelect,n=e.value,a=function(e,t){return{key:t,value:e,text:e}};return i.a.createElement(zr,{dropdownItems:Object.values(D).map((function(e,t){return a(e,t)})),onSelect:function(e){return t((n=e.value)?D[n]:void 0);var n},value:n||O.ERROR})},So=function(e){var t=e.onSelect,n=e.value,a=function(e,t){return{key:t,value:e,text:e}};return i.a.createElement(zr,{dropdownItems:Object.values(O).map((function(e,t){return a(e,t)})),onSelect:function(e){return t((n=e.value)?O[n]:void 0);var n},value:n||O.ERROR})},Co=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=go(),o=r.selectInstance,c=r.createOptions;return i.a.createElement(zr,{dropdownItems:c(),placeholder:n,onSelect:function(e){return t(o(e.value))},value:""!==a?a:void 0})},go=function(){var e=Object(c.c)(Hn),t=function(t){if(null!==t&&null!==e)return JSON.parse(t)},n=function(e,t,n){var a={dataFk:t.data.id,instanceId:e.id},i=JSON.stringify(a),r=t.data.name;return-1!==e.id&&(r=r+" - "+e.name),{key:n,value:i,text:r}};return{selectInstance:t,selectInstances:function(e){var n=[];return e&&e.forEach((function(e){var a=t(e);a&&n.push(a)})),n},createOptions:function(){var t=[];return e&&e.forEach((function(e){e.data.instances.forEach((function(a){t.push(n(a,e,100*e.data.id+a.id))}))})),t}}},bo=function(e){var t=e.onSelect,n=e.label,a=Oo(),r=a.relations,o=a.selectDataRelation,c=a.relationToOption;return i.a.createElement(Qr,{dropdownItems:r.map(c),label:n,onSelect:function(e){return t(o(Number(e.value),r))}})},Oo=function(){var e=Object(c.c)(Vn),t=Object(c.c)(Hn),n=function(e,t){var n;return(null===(n=t.find((function(t){return t.data.id===e})))||void 0===n?void 0:n.data.name)||""};return{relations:e,selectDataRelation:function(e,t){if(!k.isNullOrUndefined(e)&&!k.isNullOrUndefined(t))return t.find((function(t){return t.id===e}))},relationToOption:function(e){var a=n(e.data1Fk,t)+" - "+n(e.data2Fk,t);return{key:e.id,value:e.id.toString(),text:a}}}},To=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=Do(),o=r.sequences,c=r.selectSequence,l=r.sequenceToOption;return i.a.createElement(zr,{dropdownItems:o.map(l),placeholder:n,onSelect:function(e){return t(c(Number(e.value),o))},value:null===a||void 0===a?void 0:a.toString(),clearable:!0})},ko=function(e){var t=e.onSelect,n=e.label,a=Do(),r=a.sequences,o=a.selectSequence,c=a.sequenceToOption;return i.a.createElement(Qr,{dropdownItems:r.map(c),label:n,onSelect:function(e){return t(o(Number(e.value),r))}})},Do=function(){return{sequences:Object(c.c)(Wn),selectSequence:function(e,t){if(!k.isNullOrUndefined(e)&&!k.isNullOrUndefined(t))return t.find((function(t){return t.id===e}))},sequenceToOption:function(e){return{key:e.id,value:e.id.toString(),text:e.name}}}},No=function(e){var t=e.onSelect,n=e.label,a=yo(),r=a.sequence,o=a.stepOptions,c=a.selectSequenceStep;return i.a.createElement(Qr,{dropdownItems:o(),label:n,onSelect:function(e){return t(c(Number(e.value),r))}})},Io=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=e.exclude,o=yo(r),c=o.sequence,l=o.stepOptions,u=o.selectSequenceStep;return i.a.createElement(zr,{dropdownItems:l(),placeholder:n,onSelect:function(e){return t(u(Number(e.value),c))},value:-1===a||null===a||void 0===a?void 0:a.toString()})},yo=function(e){var t=Object(c.c)(Wa),n=function(e){return{key:e.sequenceStepTO.id,value:e.sequenceStepTO.id.toString(),text:e.sequenceStepTO.name}};return{sequence:t,stepOptions:function(){if(!k.isNullOrUndefined(t)){var a=k.deepCopy(t.sequenceStepCTOs);return e&&(a=a.filter((function(t){return t.sequenceStepTO.id!==e}))),a.map(n)}return[]},selectSequenceStep:function(e,t){if(!k.isNullOrUndefined(t)&&!k.isNullOrUndefined(e))return t.sequenceStepCTOs.find((function(t){return t.sequenceStepTO.id===e}))}}},Ao=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},Fo=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},qo=function(e){Object(a.useEffect)((function(){var t=function(t){"Escape"===t.key&&e()};return document.addEventListener("keydown",t,!1),function(){document.removeEventListener("keydown",t,!1)}}),[e])},jo=function(e){Object(a.useEffect)((function(){var t=function(t){"Enter"===t.key&&e()};return document.addEventListener("keydown",t,!1),function(){document.removeEventListener("keydown",t,!1)}}),[e])},wo=(n(89),function(e){var t=e.label,n=e.placeholder,r=e.value,o=e.onChangeCallback,c=e.onBlur,l=e.focus,u=Object(a.useState)(""),d=Object(E.a)(u,2),s=d[0],f=d[1];Object(a.useEffect)((function(){f(r||"")}),[r]);var m=Object(a.useRef)(null);return Object(a.useEffect)((function(){null!==m&&null!==m.current&&l&&m.current.focus()}),[l,m]),i.a.createElement("div",{className:"flex"},t&&i.a.createElement("label",{className:"inputLabel flex flex-center padding-small"},t),i.a.createElement("input",{className:t?"input label padding-small":"padding-small",type:"text",placeholder:n,value:s,ref:m,onChange:function(e){f(e.target.value),o(e.target.value)},onBlur:c}))}),xo=(n(90),function(e){var t=e.children;return i.a.createElement("div",{className:"width-fluid flex content-space-around padding-vertical-medium"},t)}),Ro=function(e){var t=e.children;return i.a.createElement("div",{className:"flex content-space-around padding-vertical-medium width-fluid"},t)},Lo=function(e){var t=e.onCloseCallback,n=Object(c.b)(),r=Object(a.useState)(""),o=Object(E.a)(r,2),l=o[0],u=o[1],d=function(){n(Qt.downloadData(""!==l?l:"project")),t()};return qo(t),jo(d),i.a.createElement("div",{className:"downloadForm padding-medium"},i.a.createElement(Ro,null,i.a.createElement(wo,{label:"File name:",placeholder:"project name...",onChangeCallback:function(e){return u(e)},value:l})),i.a.createElement(xo,null,i.a.createElement(_r,{onClick:function(){return t()}},"cancel"),i.a.createElement(_r,{onClick:function(){return d()}},"download")))},_o=function(){return i.a.createElement("div",{className:"flex border-top margin-medium width-fluid"})};!function(e){e.start="start",e.center="center",e.end="end"}(Rr||(Rr={}));var Mo,Uo=function(e){var t=e.children,n=e.position;return i.a.createElement("div",{className:"flex flex-"+(n||Rr.center)+" padding-horizontal-medium padding-vertical-tiny width-fluid"},t)},Go=(n(91),function(e){var t=e.children,n=e.style;return i.a.createElement("div",{className:"flex-column flex-center",style:n},t)}),Po=function(e){var t=e.subHeader,n=e.onCancel,r=e.onSubmit,o=e.text,c=Object(a.useRef)(null),l=Object(a.useState)(""),u=Object(E.a)(l,2),d=u[0],s=u[1];return Object(a.useEffect)((function(){s(o||""),c.current.focus()}),[o]),qo(n),jo((function(){return r(d)})),i.a.createElement("div",{className:"noteForm padding-medium"},i.a.createElement(Ro,null,i.a.createElement("h1",null,"Note")),i.a.createElement(_o,null),t&&i.a.createElement(Uo,null,i.a.createElement("h2",null,t)),i.a.createElement(Go,null,i.a.createElement("textarea",{className:"noteTextarea border padding-medium",onChange:function(e){return s(e.target.value)},value:d,ref:c})),i.a.createElement(_o,null),i.a.createElement(xo,null,i.a.createElement(_r,{onClick:function(){return n()}},"cancel"),i.a.createElement(_r,{onClick:function(){return r(d)}},"save")))},Bo=(n(92),function(e){var t=e.children;return i.a.createElement("div",{className:"form padding-vertical-small padding-horizontal-medium border border-small"},t)}),Ho=(n(8),n(93),function(e){var t=e.children;return i.a.createElement("div",{className:"davitModal"},t)}),Vo=function(e){var t=e.closeCallback;return i.a.createElement(Ho,null,i.a.createElement(Lo,{onCloseCallback:t}))},Wo=(n(94),n(95),function(e){var t,n,r=e.dragConstraintsRef,o=e.initX,c=e.initY,l=e.onPositionUpdate,u=e.positionId,d=e.shadow,s=e.onGeoUpdate,f=e.geoId,m=Object(Sn.c)(o),v=Object(Sn.c)(c),E=Object(Sn.b)(),p=E.scaleX,h=E.scaleY;Object(a.useEffect)((function(){m.set(o*(r.current.offsetWidth/100)),v.set(c*(r.current.offsetHeight/100))}),[m,o,v,c,r]);var S=Object(a.useRef)(null);return Object(a.useEffect)((function(){S&&S.current&&s&&f&&s(S.current.getBoundingClientRect().width,S.current.getBoundingClientRect().height,f)}),[null===S||void 0===S||null===(t=S.current)||void 0===t?void 0:t.getBoundingClientRect().width,null===S||void 0===S||null===(n=S.current)||void 0===n?void 0:n.getBoundingClientRect().height]),i.a.createElement(Sn.a.div,{drag:!0,dragConstraints:r,dragMomentum:!1,dragElastic:0,onDragEnd:function(e,t){l(Number(t.point.x.toFixed(0))/(r.current.offsetWidth/100),Number(t.point.y.toFixed(0))/(r.current.offsetHeight/100),u)},className:"dndWrapper",style:{boxShadow:d?"3px 3px 3px "+d:"",x:m,y:v,scaleX:p,scaleY:h},ref:S},e.children)});!function(e){e.actor="actorModel",e.data="dataModel",e.fullscreen="fullscreen"}(Mo||(Mo={}));var zo,Qo=function(e){var t=e.fullScreen,n=e.toDnDElements,r=e.onPositionUpdate,o=e.zoomIn,c=e.zoomOut,l=e.zoom,u=e.type,d=e.svgElements,s=e.onGeoUpdate,f=Zo(d),m=f.key,v=f.constraintsRef,p=f.height,h=f.width,S=f.paths,C=Object(a.useState)(!1),g=Object(E.a)(C,2),b=g[0],O=g[1];!function(e,t){var n=function(n){n.ctrlKey&&(n.preventDefault(),e&&t&&(n.deltaY<0&&e.zoomInCallBack(),n.deltaY>0&&e.zoomOutCallBack()))},i=function(e){e.ctrlKey&&("+"!==e.key&&"-"!==e.key||e.preventDefault())};Object(a.useEffect)((function(){return document.addEventListener("wheel",n,{passive:!1}),document.addEventListener("keydown",i),function(){document.removeEventListener("wheel",n),document.removeEventListener("keydown",i)}}))}({zoomInCallBack:o,zoomOutCallBack:c},b);return i.a.createElement(Sn.a.div,{onMouseEnter:function(){return O(!0)},onMouseLeave:function(){return O(!1)},ref:v,style:t?{height:p,maxWidth:h}:{},className:u.toString(),key:m},n.map((function(e){var t,n,a,o,c,l,u,d;return n=e.position,a=r,o=v,c=e.element,l=void 0,u=(null===(t=e.geometricalData)||void 0===t?void 0:t.id)||void 0,d=s,i.a.createElement(Wo,{key:n.id,onPositionUpdate:a,positionId:n.id,initX:n.x,initY:n.y,dragConstraintsRef:o,shadow:l,onGeoUpdate:d,geoId:u},c)})),i.a.createElement(Sn.a.label,{className:"zoomLabel",key:l||""},l?Math.round(100*l)+"%":""),i.a.createElement(Sn.a.svg,{className:"fluid"},function(e){return e.map((function(e,t){return i.a.createElement(kn,Object.assign({},e,{key:t}))}))}(S)))},Zo=function(e){var t=Object(a.useState)(0),n=Object(E.a)(t,2),i=n[0],r=n[1],o=Object(a.useRef)(null),c=Object(a.useState)([]),l=Object(E.a)(c,2),u=l[0],d=l[1],s=function(){var e=Object(a.useState)(Ao()),t=Object(E.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){var e=function(){setTimeout((function(){return i(Ao())}),150)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}()/100*56.25,f=function(){var e=Object(a.useState)(Fo()),t=Object(E.a)(e,2),n=t[0],i=t[1];return Object(a.useEffect)((function(){var e=function(){setTimeout((function(){return i(Fo())}),150)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),n}()/56.25*100;return Object(a.useEffect)((function(){var e=function(){return r((function(e){return e+1}))};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[]),Object(a.useEffect)((function(){if(null!==o&&null!==o.current){var t=[];e.forEach((function(e){var n=e;n.xSource=e.xSource*(o.current.offsetWidth/100),n.ySource=e.ySource*(o.current.offsetHeight/100),n.xTarget=e.xTarget*(o.current.offsetWidth/100),n.yTarget=e.yTarget*(o.current.offsetHeight/100),t.push(n)})),d(t)}}),[o,e]),{constraintsRef:o,height:s,width:f,key:i,paths:u}},Ko=function(e){var t=e.form;return i.a.createElement(Ho,null,i.a.createElement(Qo,{onPositionUpdate:function(){},toDnDElements:[{element:t,position:new bi(30,10)}],svgElements:[],zoomIn:function(){},zoomOut:function(){},type:Mo.fullscreen}))},Jo=function(e){var t=e.text,n=e.closeCallback,a=e.saveTextCallback;return i.a.createElement(Ho,null,i.a.createElement(Po,{text:t,onSubmit:function(e){n(),a(e)},onCancel:function(){return n()}}))},Yo=function(e){var t=e.addCallBack,n=e.dropDown;return i.a.createElement("div",{className:"flex"},i.a.createElement(Ur,{onClick:function(){return t()},size:ur.medium}),n)},Xo=function(e){var t=e.onSaveCallback,n=e.comment,r=Object(a.useState)(!1),o=Object(E.a)(r,2),c=o[0],l=o[1];return i.a.createElement(i.a.Fragment,null,i.a.createElement(Mr,{onClick:function(){return l(!0)},iconName:""===n?mn.noteEmpty:mn.noteFilled}),c&&i.a.createElement(Jo,{text:n,closeCallback:function(){return l(!1)},saveTextCallback:t}))},$o=(n(96),function(e,t){var n,a=function(e){return e===In.CHECKED?i.a.createElement("div",{className:"gg-check-o",style:{color:"green",backgroundColor:"var(--data-persistent-color)"}}):e===In.CHECK_FAILED?i.a.createElement("div",{className:"gg-close-o",style:{color:"red",backgroundColor:"var(--data-persistent-color)"}}):null};return i.a.createElement("div",{className:"viewFragment flex flex-center width-fluid",key:t},i.a.createElement("div",{className:(n=e.state,"actorData ".concat(n," flex flex-center")),key:t},e.name),a(e.state)&&a(e.state))}),ec=(n(97),function e(t){var n=t.id,a=t.initName,r=t.initWidth,o=t.initHeight,c=t.dataFragments,l=t.instances,u=t.zoomFactor,d=t.type,s=tc(d,n),f=s.onClickEdit,m=s.onClickFilter,v=s.showMenu,E=s.setShowMenu,p=s.isActiveFilter;return i.a.createElement("div",{className:p?"activeFilter card":"card",style:{minWidth:r*u,minHeight:o*u,fontSize:"".concat(u,"em")},onClick:t.onClick?function(){return t.onClick(t.id)}:void 0,key:n},i.a.createElement("div",{className:"cardHeader"},v?i.a.createElement("div",{className:"cardButtonGroup padding-tiny"},"INSTANCE"!==d&&i.a.createElement("div",{className:"margin-tiny"},i.a.createElement(Mr,{size:ur.small,onClick:function(){return f(n,d)},className:"padding-tiny border",iconName:mn.wrench})),i.a.createElement("div",{className:"margin-tiny"},i.a.createElement(Mr,{size:ur.small,onClick:function(){return m(n,d)},className:"padding-tiny border ".concat(p?"activeButton":""),iconName:mn.filter}))):i.a.createElement("div",{className:"cardLabelWrapper padding-small"},i.a.createElement("label",null,a)),i.a.createElement("div",{className:"margin-tiny"},i.a.createElement(Hr,{className:"button-tiny border border-small",onClick:function(){E(!v)},show:v}))),l&&i.a.createElement("div",{className:"cardInstanceWrapper"},l.map((function(t,n){return function(t,n,a){return i.a.createElement(e,{id:t,initName:n,dataFragments:a,initWidth:r,initHeight:o,zoomFactor:u,key:t,type:"INSTANCE"})}(n,t.name,c.filter((function(e){return e.parentId.instanceId===t.id})))}))),(void 0===l||0===(null===l||void 0===l?void 0:l.length))&&c.map($o))}),tc=function(e,t){var n=Object(c.c)(Va),i=Object(a.useState)(!1),r=Object(E.a)(i,2),o=r[0],l=r[1],u=Object(c.b)(),d=n.some((function(n){return(n.type===e||"DATA"===n.type&&"INSTANCE"===e)&&n.id===t}));return{onClickEdit:function(e,t){switch(t){case"ACTOR":u(xr.setMode.editActorById(e));break;case"DATA":u(xr.setMode.editDataById(e));break;case"INSTANCE":u(xr.setMode.editInstanceById(e))}l(!1)},onClickFilter:function(e,t){switch(t){case"ACTOR":d?(u(hi.removeActorFilter(e)),l(!1)):u(hi.addActorFilters(e));break;case"DATA":case"INSTANCE":d?(u(hi.removeDataFilters(e)),l(!1)):u(hi.addDataFilters(e))}},showMenu:o,setShowMenu:l,isActiveFilter:d}},nc=function(e){var t=e.children;return i.a.createElement("div",{className:"flex content-space-around align-center height-fluid"},t)},ac=(n(98),function(e){var t=e.label,n=e.children,a=e.divider;return i.a.createElement("div",{className:"optionField"+(a?" columnDivider":"")},i.a.createElement("div",{className:"optionFieldChildArea"},n),null===t||void 0===t?void 0:t.toUpperCase())}),ic=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{type:D.FIN},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{type:D.ERROR};return Object(p.a)(this,n),(e=t.call(this)).name=a,e.chainFk=i,e.conditions=r,e.stateFkAndStateConditions=o,e.ifGoTo=c,e.elseGoTo=l,e}return n}(Ce),rc=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(p.a)(this,n),(e=t.call(this)).label=a,e.isState=i,e}return n}(Ce),oc=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return Object(p.a)(this,n),(e=t.call(this)).chainFk=a,e}return n}(rc),cc=function(e){return function(t){var n=Pt(e);200!==n.code&&t(Qt.handleError(n.message)),t(ra())}},lc=function(e){return function(t){var n=Bt(e);200!==n.code&&t(Qt.handleError(n.message)),t(ra())}},uc=function(){var e=Object(c.c)(za),t=Object(c.b)(),n=Object(a.useState)(!1),i=Object(E.a)(n,2),r=i[0],o=i[1],l=Object(c.c)(ta((null===e||void 0===e?void 0:e.id)||-1));Object(a.useEffect)((function(){k.isNullOrUndefined(e)&&(console.warn("Tried to go to edit sequence without chain specified"+e),t(xr.setMode.edit())),-1!==(null===e||void 0===e?void 0:e.id)&&o(!1)}),[e,t]);var u=function(e){t(cc(e))};return{label:"EDIT * "+((null===e||void 0===e?void 0:e.name)||""),name:null===e||void 0===e?void 0:e.name,id:(null===e||void 0===e?void 0:e.id)?e.id:-1,changeName:function(n){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.name=n,t(Li(a))}},saveChain:function(n){k.isNullOrUndefined(e)||(""!==e.name?t(Li(e)):t(_i(e)),t(r&&!n?xr.setMode.editChain():xr.setMode.edit()))},deleteChain:function(){k.isNullOrUndefined(e)||t(_i(e)),t(xr.setMode.edit())},validateInput:function(){return!k.isNullOrUndefined(e)&&k.isValidName(e.name)},createAnother:function(){t(xr.setMode.editChain())},updateSequence:function(){var n=k.deepCopy(e);t(lr.save(n))},editOrAddChainDecision:function(n){var a=n;void 0===a&&((a=new ic).chainFk=(null===e||void 0===e?void 0:e.id)||-1),t(xr.setMode.editChainDecision(a))},editOrAddChainLink:function(n){var a=n;void 0===a&&((a=new ge).chainFk=(null===e||void 0===e?void 0:e.id)||-1,a.root=l),t(xr.setMode.editChainLink(a))},editStates:function(){k.isNullOrUndefined(e)||t(xr.setMode.editChainStates())},editChain:function(){k.isNullOrUndefined(e)||t(xr.setMode.editChain(e))},saveStateFkAndStateCondition:u,createStateFkAndStateCondition:function(){if(!k.isNullOrUndefined(e)){var t=new oc;t.chainFk=e.id,u(t)}},deleteStateFkAndStateCondition:function(e){t(lc(e))},note:(null===e||void 0===e?void 0:e.note)||"",saveNote:function(n){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.note=n,t(Li(a))}}}},dc=function(){var e=uc(),t=e.name,n=e.changeName,a=e.createAnother,r=e.editOrAddChainDecision,o=e.saveChain,c=e.deleteChain,l=e.id,u=e.editOrAddChainLink,d=e.editStates,s=e.note,f=e.saveNote;return i.a.createElement(nc,null,i.a.createElement(ac,{label:"Chain - name"},i.a.createElement(wo,{label:"Name:",placeholder:"Chain Name...",onChangeCallback:function(e){return n(e)},value:t,focus:!0}),i.a.createElement(Xo,{onSaveCallback:f,comment:s})),i.a.createElement(ac,{label:"Create / Edit | Chain - Link",divider:!0},i.a.createElement(Yo,{addCallBack:u,dropDown:i.a.createElement(lo,{onSelect:function(e){return u(e)},label:"Link",chainId:l})})),i.a.createElement(ac,{label:"Create / Edit | Chain - Decision",divider:!0},i.a.createElement(Yo,{addCallBack:r,dropDown:i.a.createElement(to,{onSelect:r,label:"Decision",chainId:l})})),i.a.createElement(ac,{label:"Options",divider:!0},i.a.createElement(_r,{onClick:d},"State"),i.a.createElement(_r,{onClick:a},"Create another"),i.a.createElement(Gr,{onClick:o}),i.a.createElement(Vr,{onClick:c})))},sc=function(){var e=fc(),t=e.editOrAddActor,n=e.editOrAddData,a=e.editOrAddRelation,r=e.editOrAddSequence,o=e.editOrAddChain;return i.a.createElement(nc,null,i.a.createElement(ac,{label:"actor"},i.a.createElement(Yo,{addCallBack:function(){return t()},dropDown:i.a.createElement($r,{onSelect:t,label:"Actor"})})),i.a.createElement(ac,{label:"Data",divider:!0},i.a.createElement(Yo,{addCallBack:function(){return n()},dropDown:i.a.createElement(fo,{onSelect:n,label:"Data"})}),i.a.createElement(Yo,{addCallBack:function(){return a()},dropDown:i.a.createElement(bo,{onSelect:a,label:"Relation"})})),i.a.createElement(ac,{label:"sequence",divider:!0},i.a.createElement(Yo,{addCallBack:function(){return r()},dropDown:i.a.createElement(ko,{onSelect:function(e){return r(null===e||void 0===e?void 0:e.id)},label:"Sequence"})}),i.a.createElement(Yo,{addCallBack:function(){return o()},dropDown:i.a.createElement(ro,{onSelect:function(e){return o(e)},label:"Chain"})})))},fc=function(){var e=Object(c.b)();return{mode:Object(c.c)(Cr),editOrAddActor:function(t){return e(xr.setMode.editActor(t))},editOrAddData:function(t){return e(xr.setMode.editData(t))},editOrAddRelation:function(t){return e(xr.setMode.editRelation(t))},editOrAddSequence:function(t){return e(xr.setMode.editSequence(t))},editOrAddChain:function(t){return e(xr.setMode.editChain(t))}}},mc=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{type:O.ERROR},c=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"";return Object(p.a)(this,n),(e=t.call(this)).name=a,e.index=i,e.sequenceFk=r,e.goto=o,e.root=c,e.note=l,e}return n}(Ce),vc=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new mc,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];Object(p.a)(this,e),this.sequenceStepTO=t,this.actions=n},Ec=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{type:O.FIN},l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{type:O.ERROR},u=arguments.length>6&&void 0!==arguments[6]&&arguments[6],d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"";return Object(p.a)(this,n),(e=t.call(this)).name=a,e.sequenceFk=i,e.conditions=r,e.stateFkAndStateConditions=o,e.ifGoTo=c,e.elseGoTo=l,e.root=u,e.note=d,e}return n}(Ce),pc=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return Object(p.a)(this,n),(e=t.call(this)).sequenceFk=a,e}return n}(rc),hc=function(e){return function(t){var n=Mt(e);200!==n.code&&t(Qt.handleError(n.message)),t(sa())}},Sc=function(e){return function(t){var n=Ut(e);200!==n.code&&t(Qt.handleError(n.message)),t(sa())}},Cc=function(){var e=Object(c.c)(Nr),t=Object(c.c)(Wa),n=Object(c.b)(),i=Object(a.useState)(!1),r=Object(E.a)(i,2),o=r[0],l=r[1];Object(a.useEffect)((function(){k.isNullOrUndefined(e)&&(n(Qt.handleError("Tried to go to edit sequence without sequenceToEdit specified")),n(xr.setMode.edit())),-1!==(null===e||void 0===e?void 0:e.id)&&l(!1)}),[e,n]);var u=function(){return 0===(null===t||void 0===t?void 0:t.sequenceStepCTOs.length)&&0===t.decisions.length},d=function(e){n(hc(e))};return{label:"EDIT * "+((null===e||void 0===e?void 0:e.name)||""),name:null===e||void 0===e?void 0:e.name,changeName:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.name=t,n(lr.save(a))}},saveSequence:function(){""!==e.name?n(lr.save(e)):n(lr.delete(e)),n(o?xr.setMode.editSequence():xr.setMode.edit())},deleteSequence:function(){n(lr.delete(e)),n(xr.setMode.edit())},editOrAddSequenceStep:function(t){var a=t;void 0===a&&((a=new vc).sequenceStepTO.sequenceFk=(null===e||void 0===e?void 0:e.id)||-1,a.sequenceStepTO.root=u()),n(xr.setMode.editStep(a))},validateInput:function(){return!k.isNullOrUndefined(e)&&k.isValidName(e.name)},copySequence:function(){var t=k.deepCopy(e);t.name=(null===e||void 0===e?void 0:e.name)+"-copy",t.id=-1,n(lr.update(t))},createAnother:function(){n(xr.setMode.editSequence())},updateSequence:function(){var t=k.deepCopy(e);n(lr.save(t))},editOrAddDecision:function(t){var a=t;void 0===a&&((a=new Ec).sequenceFk=(null===e||void 0===e?void 0:e.id)||-1,a.root=u()),n(xr.setMode.editDecision(a))},id:(null===e||void 0===e?void 0:e.id)||-1,note:e?e.note:"",saveNote:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.note=t,n(lr.save(a))}},saveSequenceState:d,deleteSequenceState:function(e){n(Sc(e))},createSequenceState:function(){if(!k.isNullOrUndefined(e)){var t=new pc;t.sequenceFk=e.id,d(t)}},editStates:function(){k.isNullOrUndefined(e)||n(xr.setMode.editSequenceStates())},editSequence:function(){k.isNullOrUndefined(e)||n(xr.setMode.editSequence(e.id))}}},gc=function(){var e=Cc(),t=e.name,n=e.changeName,a=e.deleteSequence,r=e.saveSequence,o=e.editOrAddSequenceStep,c=e.createAnother,l=e.updateSequence,u=e.editOrAddDecision,d=e.note,s=e.saveNote,f=e.editStates;return i.a.createElement(nc,null,i.a.createElement(ac,{label:"Sequence - name"},i.a.createElement(wo,{label:"Name:",placeholder:"Sequence Name...",onChangeCallback:function(e){return n(e)},value:t,focus:!0,onBlur:l}),i.a.createElement(Xo,{onSaveCallback:s,comment:d})),i.a.createElement(ac,{label:"Create / Edit | Sequence - Step",divider:!0},i.a.createElement(Yo,{addCallBack:o,dropDown:i.a.createElement(No,{onSelect:o,label:"Step"})})),i.a.createElement(ac,{label:"Create / Edit | Sequence - Decision",divider:!0},i.a.createElement(Yo,{addCallBack:u,dropDown:i.a.createElement(vo,{onSelect:u,label:"Decision"})})),i.a.createElement(ac,{label:"options",divider:!0},i.a.createElement(_r,{onClick:f},"State"),i.a.createElement(_r,{onClick:c},"Create another"),i.a.createElement(Gr,{onClick:r}),i.a.createElement(Vr,{onClick:a})))},bc=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,l=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tn.ADD,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:-1;return Object(p.a)(this,n),(e=t.call(this)).sequenceStepFk=a,e.receivingActorFk=i,e.sendingActorFk=r,e.dataFk=o,e.instanceFk=c,e.actionType=l,e.triggerText=u,e.index=d,e}return n}(Ce),Oc=function(e){return function(t){var n=e.index,a=St(e);200!==a.code&&t(Qt.handleError(a.message));var i=Ea.findSequenceStepCTO(e.sequenceStepFk);i&&(i.actions.map((function(e){return e.index>n&&(e.index=e.index-1),e})),t(Qi.save(i))),t(da())}},Tc=function(e){return function(t,n){var a=n().edit.mode;a===Ei.EDIT_SEQUENCE_STEP_ACTION?t(mr.setActionToEdit(e)):t(Qt.handleError("Try to set action to edit in mode: "+a))}},kc=function(e){return function(t){var n=Ct(e);200!==n.code&&t(Qt.handleError(n.message))}},Dc=function(e){return function(t){var n=Ct(e);200!==n.code&&t(Qt.handleError(n.message)),t(xr.setMode.editAction(n.object))}},Nc=function(){var e=Object(c.c)(qr),t=Object(c.c)(Bn),n=Object(c.c)(Hn),i=Object(c.c)(Wa),r=Object(c.b)(),o=Object(a.useState)(0),l=Object(E.a)(o,2),u=l[0],d=l[1],s=function(e){if(null!==e){r(Oc(e));var t=Ea.findSequenceStepCTO(e.sequenceStepFk);t?r(xr.setMode.editStep(t)):(r(Qt.handleError("Step not found!")),r(xr.setMode.edit()))}},f=function(e,t){var n;return(null===(n=t.find((function(t){return t.actor.id===e})))||void 0===n?void 0:n.actor.name)||""},m=function(e){var t="";switch(e){case Tn.ADD:t="Add or Update";break;case Tn.DELETE:t="Delete";break;case Tn.SEND:t="Send";break;case Tn.SEND_AND_DELETE:t="Send and delete";break;case Tn.TRIGGER:t="Trigger"}return t};return{label:"EDIT * SEQUENCE * STEP * ACTION",action:e,setActor:function(t,n){if(void 0!==t){var a=k.deepCopy(e);n?a.sendingActorFk=t.actor.id:a.receivingActorFk=t.actor.id,r(Tc(a)),r(kc(a))}},setAction:function(t){if(void 0!==t&&null!==i&&null!==e){var n=k.deepCopy(e);n.actionType=t,n.sendingActorFk=t.includes("SEND")?e.sendingActorFk:-1,n.receivingActorFk=t.includes("SEND")?e.receivingActorFk:-1,r(Tc(n)),r(kc(n))}},setData:function(t){if(void 0!==t){var n=k.deepCopy(e);n.dataFk=t.data.id,r(Tc(n)),r(kc(n))}},sendingActorId:null===e||void 0===e?void 0:e.sendingActorFk,receivingActorId:null===e||void 0===e?void 0:e.receivingActorFk,dataId:-1===(null===e||void 0===e?void 0:e.dataFk)||null===e||void 0===e?void 0:e.dataFk,actionType:null===e||void 0===e?void 0:e.actionType,deleteAction:s,deleteActionToEdit:function(){k.isNullOrUndefined(e)||s(e)},setMode:function(t){if(!k.isNullOrUndefined(e))if(function(e){var t;switch(e.actionType){case Tn.TRIGGER:t=-1!==e.receivingActorFk&&-1!==e.sendingActorFk;break;case Tn.SEND:case Tn.SEND_AND_DELETE:t=-1!==e.dataFk&&-1!==e.receivingActorFk&&-1!==e.sendingActorFk;break;default:t=-1!==e.dataFk&&-1!==e.receivingActorFk}return t}(e)||s(e),t&&"EDIT"===t)r(xr.setMode.edit());else if(t&&"SEQUENCE"===t)r(xr.setMode.editSequence(null===i||void 0===i?void 0:i.sequenceTO.id));else{var n=Ea.findSequenceStepCTO(e.sequenceStepFk);n&&r(xr.setMode.editStep(n))}},createAnother:function(){if(e){var t=new bc;t.sequenceStepFk=e.sequenceStepFk,t.index=e.index+1,r(Dc(t)),d(u+1)}},key:u,setDataAndInstance:function(t){if(void 0!==t){var n=k.deepCopy(e);n.dataFk=t.dataFk,n.instanceFk=t.instanceId,r(Tc(n)),r(kc(n))}},dataAndInstance:JSON.stringify({dataFk:null===e||void 0===e?void 0:e.dataFk,instanceId:null===e||void 0===e?void 0:e.instanceFk}),setTriggerLabel:function(t){if(void 0!==e){var n=k.deepCopy(e);n.triggerText=t,r(Tc(n)),r(kc(n))}},triggerLabel:(null===e||void 0===e?void 0:e.actionType)===Tn.TRIGGER?e.triggerText:"",getOptionText:function(e){return e.actionType!==Tn.TRIGGER?"".concat(f(e.receivingActorFk,t)," - ").concat(m(e.actionType)," - ").concat(function(e,t){var n=t.find((function(t){return t.data.id===e}));return n?null===n||void 0===n?void 0:n.data.name:"data is null"}(e.dataFk,n)):"".concat(f(e.sendingActorFk,t)," - ").concat(m(e.actionType)," - ").concat(f(e.receivingActorFk,t))}}};!function(e){e.start="flex-start",e.center="center",e.end="flex-end"}(zo||(zo={}));var Ic=function(e){var t=e.children,n=e.className,a=e.align;return i.a.createElement("label",{className:n||"flex flex-start",style:{justifyContent:a||void 0}},t)},yc=function(){var e=Nc(),t=e.setActor,n=e.setAction,a=e.setData,r=e.deleteActionToEdit,o=e.sendingActorId,c=e.receivingActorId,l=e.dataId,u=e.actionType,d=e.setMode,s=e.createAnother,f=e.setDataAndInstance,m=e.dataAndInstance,v=e.setTriggerLabel,E=e.triggerLabel;return i.a.createElement(Bo,null,i.a.createElement(Uo,null,i.a.createElement("h2",null,"Action")),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select Action"),i.a.createElement(Yr,{onSelect:n,value:u})),i.a.createElement(_o,null),u!==Tn.TRIGGER&&i.a.createElement(Uo,null,u===Tn.ADD&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ic,null,"Select Data Instance"),i.a.createElement(Co,{onSelect:f,value:m})),u!==Tn.ADD&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Ic,null,"Select Data"),i.a.createElement(so,{onSelect:a,value:l}))),u===Tn.TRIGGER&&i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Enter Trigger text"),i.a.createElement(wo,{placeholder:"Trigger text ...",onChangeCallback:function(e){return v(e)},value:E})),i.a.createElement(Uo,null,i.a.createElement(Ic,{align:zo.center},u===Tn.ADD?"TO":"FROM")),i.a.createElement(Uo,null,i.a.createElement(Ic,null,(null===u||void 0===u?void 0:u.includes("SEND"))||u===Tn.TRIGGER?"Select sending Actor":"Actor"),i.a.createElement(Xr,{onSelect:function(e){return t(e,(null===u||void 0===u?void 0:u.includes("SEND"))||u===Tn.TRIGGER)},value:(null===u||void 0===u?void 0:u.includes("SEND"))||u===Tn.TRIGGER?o:c})),((null===u||void 0===u?void 0:u.includes("SEND"))||u===Tn.TRIGGER)&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Uo,null,i.a.createElement(Ic,{align:zo.center},"TO")),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select receiving Actor"),i.a.createElement(Xr,{onSelect:function(e){return t(e,!1)},value:c}))),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Vr,{onClick:r}),i.a.createElement(_r,{onClick:s},"Create another"),i.a.createElement(Mr,{onClick:d,iconName:Xt.h})))},Ac=function(){return i.a.createElement(Ho,null,i.a.createElement(yc,null))},Fc=function(){var e=Object(a.useState)(0),t=Object(E.a)(e,2),n=t[0],r=t[1],o=function(){var e,t,n=Object(c.c)(gr),i=Object(c.b)();Object(a.useEffect)((function(){k.isNullOrUndefined(n)&&(i(Qt.handleError("Tried to go to edit component without component To edit specified")),xr.setMode.edit())}),[n,i]);var r=function(){k.isNullOrUndefined(n)||(""!==(null===n||void 0===n?void 0:n.actor.name)?i(Di(n)):o(),i(xr.setMode.edit()))},o=function(){i(Ni(n)),i(xr.setMode.edit())};return{saveActor:r,createAnother:function(){r(),i(xr.setMode.editActor())},saveNote:function(e){if(!k.isNullOrUndefined(n)){var t=k.deepCopy(n);t.actor.note=e,i(xr.setMode.editActor(t))}},deleteActor:o,updateActor:function(){var e=k.deepCopy(n);i(Di(e))},changeName:function(e){var t=k.deepCopy(n);t.actor.name=e,i(xr.setMode.editActor(t))},name:(null===n||void 0===n||null===(e=n.actor)||void 0===e?void 0:e.name)||"",note:(null===n||void 0===n||null===(t=n.actor)||void 0===t?void 0:t.note)||""}}(),l=o.changeName,u=o.updateActor,d=o.deleteActor,s=o.saveNote,f=o.createAnother,m=o.saveActor,v=o.name,p=o.note;return i.a.createElement(Bo,{key:n},i.a.createElement(Ro,null,i.a.createElement("h2",null,"Actor")),i.a.createElement(_o,null),i.a.createElement(Go,null,i.a.createElement(Uo,null,i.a.createElement(wo,{label:"Name:",placeholder:"Actor Name",onChangeCallback:function(e){return l(e)},onBlur:u,value:v,focus:!0}))),i.a.createElement(_o,null),i.a.createElement(xo,null,i.a.createElement(Vr,{onClick:d}),i.a.createElement(Xo,{onSaveCallback:s,comment:p}),i.a.createElement(_r,{onClick:function(){f(),r(n+1)}},"Create another"),i.a.createElement(Gr,{onClick:m})))},qc=function(){return i.a.createElement(Ko,{form:i.a.createElement(Fc,null)})},jc=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=e.chainFk,o=Object(c.c)($n(r));return i.a.createElement(zr,{dropdownItems:o.map((function(e){return{key:e.id,value:e.id.toString(),text:e.label}})),onSelect:function(e){return t(o.find((function(t){return t.id===Number(e.value)})))},placeholder:n,value:a})},wc=function(e){var t=e.toggleCallback,n=e.isLeft,a=e.leftLabel,r=e.rightLabel;return i.a.createElement("div",{className:"flex flex-center"},i.a.createElement(_r,{className:n?" activeButton":"",onClick:function(){return t(!0)}},a),i.a.createElement(_r,{className:n?"":" activeButton",onClick:function(){return t(!1)}},r))},xc=function(){var e=function(){var e=Object(c.c)(Tr),t=Object(c.c)(za),n=Object(c.b)(),i=Object(a.useState)({type:D.FIN}),r=Object(E.a)(i,2),o=r[0],l=r[1],u=Object(a.useState)({type:D.ERROR}),d=Object(E.a)(u,2),s=d[0],f=d[1],m=Object(a.useState)(0),v=Object(E.a)(m,2),p=v[0],h=v[1];Object(a.useEffect)((function(){k.isNullOrUndefined(e)&&(n(Qt.handleError("Tried to go to edit condition step without conditionToEdit specified")),n(xr.setMode.edit())),e&&(l(e.ifGoTo),f(e.elseGoTo))}),[n,e]);var S=function(e){k.isNullOrUndefined(e)||n(wi.update(e))},C=function(){k.isNullOrUndefined(e)||k.isNullOrUndefined(t)||(""!==e.name?n(wi.save(e)):n(wi.delete(e)))},g=function(t,a){if(void 0!==a){var i=k.deepCopy(e);t?i.ifGoTo=a:i.elseGoTo=a,n(wi.save(i)),n(xr.setMode.editChainDecision(i))}};return{name:null===e||void 0===e?void 0:e.name,changeName:function(t){if(!k.isNullOrUndefined(e)){var n=k.deepCopy(e);n.name=t,S(n)}},saveDecision:C,deleteDecision:function(){k.isNullOrUndefined(e)||k.isNullOrUndefined(t)||(n(wi.delete(e)),n(xr.setMode.editChain(t)))},handleType:function(e,t){if(void 0!==t){var n={type:D[t]};switch(e?l(n):f(n),t){case D.ERROR:case D.FIN:g(e,n)}}},setGoToTypeStep:function(e,t){if(t){var n={type:D.LINK,id:t.id};g(e,n)}},setGoToTypeDecision:function(e,t){if(t){var n={type:D.DEC,id:t.id};g(e,n)}},ifGoTo:o,elseGoTo:s,createGoToStep:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e),i=new ge;i.chainFk=e.chainFk,n(xr.setMode.editChainLink(i,a,t))}},createGoToDecision:function(t){if(!k.isNullOrUndefined(e)){var a=new ic;a.chainFk=e.chainFk;var i=k.deepCopy(e);n(xr.setMode.editChainDecision(a,i,t)),h(p+1)}},key:p,decId:null===e||void 0===e?void 0:e.id,chainId:(null===e||void 0===e?void 0:e.chainFk)||-1,chainConditions:(null===e||void 0===e?void 0:e.conditions)||[],goBack:function(){k.isNullOrUndefined(e)||k.isNullOrUndefined(t)||(C(),n(xr.setMode.editChain(t)))},saveCondition:function(t){if(!k.isNullOrUndefined(e)){var n=k.deepCopy(e);if(n.conditions.find((function(e){return e.id===t.id}))){var a=n.conditions.filter((function(e){return e.id!==t.id}));a.push(t),n.conditions=a}else n.conditions.push(t);S(n)}},deleteCondition:function(t){if(!k.isNullOrUndefined(e)){var n=k.deepCopy(e);n.conditions=n.conditions.filter((function(e){return e.id!==t})),S(n)}},createCondition:function(){if(!k.isNullOrUndefined(e)){var t=k.deepCopy(e);t.conditions.push({decisionFk:t.id,id:t.conditions.length,actorFk:-1,instanceFk:-1,dataFk:-1}),S(t)}},stateFkAndStateConditions:(null===e||void 0===e?void 0:e.stateFkAndStateConditions)||[],createStateFkAndStateCondition:function(){if(!k.isNullOrUndefined(e)){var t=k.deepCopy(e);t.stateFkAndStateConditions.push({stateFk:-1,stateCondition:!0}),S(t)}},updateStateFkAndStateCondition:function(t,n){if(t&&!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.stateFkAndStateConditions[n]=t,S(a)}},deleteStateFkAndStateCondition:function(t){if(!k.isNullOrUndefined(e)){var n=k.deepCopy(e);n.stateFkAndStateConditions=n.stateFkAndStateConditions.filter((function(e){return e.stateFk!==t})),S(n)}}}}(),t=e.handleType,n=e.chainId,r=e.changeName,o=e.createGoToDecision,l=e.name,u=e.deleteDecision,d=e.elseGoTo,s=e.ifGoTo,f=e.createGoToStep,m=e.decId,v=e.setGoToTypeDecision,p=e.setGoToTypeStep,h=e.chainConditions,S=e.saveCondition,C=e.deleteCondition,g=e.createCondition,b=e.goBack,O=e.stateFkAndStateConditions,T=e.createStateFkAndStateCondition,N=e.updateStateFkAndStateCondition,I=e.deleteStateFkAndStateCondition,y=function(e,t){return i.a.createElement("tr",{key:e.stateFk},i.a.createElement("td",null,i.a.createElement("div",{className:"flex content-space-between"},i.a.createElement(jc,{onSelect:function(e){return function(e,t){e&&N({stateFk:e.id,stateCondition:e.isState},t)}(e,t)},chainFk:n,value:e.stateFk.toString(),placeholder:"Select sequence state"}),i.a.createElement(wc,{toggleCallback:function(n){return function(e,t,n){var a=k.deepCopy(e);a.stateCondition=n,N(a,t)}(e,t,n)},isLeft:e.stateCondition,leftLabel:"TRUE",rightLabel:"FLASE"}),i.a.createElement(Vr,{onClick:function(){I(e.stateFk)},noConfirm:!0}))))};return i.a.createElement(Bo,null,i.a.createElement(Ro,null,i.a.createElement("h2",null,"Chain decision")),i.a.createElement(_o,null),i.a.createElement(Go,null,i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Chain decision - name"),i.a.createElement(wo,{label:"Name:",placeholder:"Chain decision name ...",onChangeCallback:function(e){return r(e)},value:l,focus:!0})),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Conditions")),i.a.createElement(Uo,null,i.a.createElement("table",{className:"border",style:{width:"40em"}},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",{style:{textAlign:"center"}},"Actor"),i.a.createElement("td",{style:{textAlign:"center"}},"Data Instance"),i.a.createElement("td",{className:"flex flex-end"},i.a.createElement(Ur,{onClick:g})))),i.a.createElement("tbody",{style:{maxHeight:"40vh"}},h.map((function(e){var t=k.deepCopy(e);return i.a.createElement("tr",{key:t.id},i.a.createElement("td",null,i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between"}},i.a.createElement(Xr,{onSelect:function(e){t.actorFk=e?e.actor.id:-1,S(t)},placeholder:"Select actor...",value:t.actorFk}),i.a.createElement(Co,{onSelect:function(e){k.isNullOrUndefined(e)||(t.dataFk=e.dataFk,t.instanceFk=e.instanceId,S(t))},placeholder:"Select data instance ...",value:JSON.stringify({dataFk:t.dataFk,instanceId:t.instanceFk})}),-1!==t.id&&i.a.createElement(Vr,{onClick:function(){C(t.id)},noConfirm:!0}))))}))))),i.a.createElement(Uo,null,i.a.createElement("table",{className:"border",style:{width:"40em"}},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"State"),i.a.createElement("td",null,"Is"),i.a.createElement("td",{className:"flex flex-end"},i.a.createElement(Ur,{onClick:T})))),i.a.createElement("tbody",{style:{maxHeight:"20vh"}},O.map((function(e,t){return y(e,t)}))))),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Type condition true"),i.a.createElement(ho,{onSelect:function(e){t(!0,e)},value:s?s.type:D.FIN})),s.type===D.LINK&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next link"),i.a.createElement(co,{onSelect:function(e){return p(!0,e)},value:(null===s||void 0===s?void 0:s.type)===D.LINK?s.id:1,chainId:n})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create next link"),i.a.createElement(Ur,{onClick:function(){return f(!0)}}))),s.type===D.DEC&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next decision"),i.a.createElement(no,{onSelect:function(e){return v(!0,e)},value:(null===s||void 0===s?void 0:s.type)===D.DEC?s.id:1,exclude:m,chainId:n})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create next decision"),i.a.createElement(Ur,{onClick:function(){return o(!0)}}))),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Type condition false"),i.a.createElement(ho,{onSelect:function(e){t(!1,e)},value:d?d.type:D.FIN})),d.type===D.LINK&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next link"),i.a.createElement(co,{onSelect:function(e){return p(!1,e)},value:(null===s||void 0===s?void 0:s.type)===D.LINK?s.id:1,chainId:n})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create next link"),i.a.createElement(Ur,{onClick:function(){return f(!1)}}))),d.type===D.DEC&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next decision"),i.a.createElement(no,{onSelect:function(e){return v(!1,e)},value:(null===s||void 0===s?void 0:s.type)===D.DEC?s.id:1,exclude:m,chainId:n})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create next decision"),i.a.createElement(Ur,{onClick:function(){return o(!1)}})))),i.a.createElement(_o,null),i.a.createElement(xo,null,i.a.createElement(Uo,null,i.a.createElement(Vr,{onClick:u}),i.a.createElement(Gr,{onClick:b}))))},Rc=function(){return i.a.createElement(Ko,{form:i.a.createElement(xc,null)})},Lc=function(){var e=function(){var e=Object(c.c)(Or),t=Object(c.c)(za),n=Object(c.b)(),i=Object(a.useState)({type:D.LINK,id:-1}),r=Object(E.a)(i,2),o=r[0],l=r[1];Object(a.useEffect)((function(){k.isNullOrUndefined(e)&&(n(Qt.handleError("Tried to go to edit sequence step without sequenceStepToEdit specified")),n(xr.setMode.edit())),e&&l(e.goto)}),[n,e]);var u=function(t){if(void 0!==t&&!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.goto=t,n(Fi.save(a)),n(xr.setMode.editChainLink(a))}};return{label:"EDIT * "+((null===t||void 0===t?void 0:t.name)||"")+" * "+((null===e||void 0===e?void 0:e.name)||""),name:e?e.name:"",changeName:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.name=t,n(Fi.save(a)),n(xr.setMode.editChainLink(a))}},saveChainLink:function(a){k.isNullOrUndefined(e)||k.isNullOrUndefined(t)||(""!==e.name?n(Fi.save(e)):n(Fi.delete(e)),n(a&&"EDIT"===a?xr.setMode.edit():xr.setMode.editChain(t)))},deleteChainLink:function(){k.isNullOrUndefined(e)||k.isNullOrUndefined(t)||(n(Fi.delete(e)),n(xr.setMode.editChain(t)))},goTo:o,isRoot:!!(null===e||void 0===e?void 0:e.root)&&e.root,stepId:null===e||void 0===e?void 0:e.id,currentSequenceConfiguration:null===e||void 0===e?void 0:e.sequenceConfigurationFk,currentSequence:null===e||void 0===e?void 0:e.sequenceFk,setDataSetup:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.sequenceConfigurationFk=t?t.id:-1,n(Fi.save(a)),n(xr.setMode.editChainLink(a))}},setSequenceModel:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.sequenceFk=t?t.id:-1,n(Fi.save(a)),n(xr.setMode.editChainLink(a))}},linkId:null===e||void 0===e?void 0:e.id,chainId:(null===e||void 0===e?void 0:e.chainFk)||-1,handleType:function(e){if(void 0!==e){var t={type:D[e]};switch(l(t),e){case D.ERROR:case D.FIN:u(t)}}},setNextLink:function(e){if(e){var t={type:D.LINK,id:e.id};u(t)}},setNextDecision:function(e){if(e){var t={type:D.DEC,id:e.id};u(t)}},createNewChainLink:function(){if(!k.isNullOrUndefined(e)){var t=k.deepCopy(e),a=new ge;a.chainFk=e.chainFk,n(xr.setMode.editChainLink(a,t))}},createGoToDecision:function(){if(!k.isNullOrUndefined(e)){var t=k.deepCopy(e),a=new ic;a.chainFk=e.chainFk,n(xr.setMode.editChainDecision(a,t))}},setRoot:function(){k.isNullOrUndefined(e)||(n(Mi(e.chainFk,e.id,!1)),n(xr.setMode.editChainLink(Fi.find(e.id))))},id:(null===e||void 0===e?void 0:e.id)||-1}}(),t=e.name,n=e.createGoToDecision,r=e.changeName,o=e.chainId,l=e.createNewChainLink,u=e.currentSequence,d=e.deleteChainLink,s=e.goTo,f=e.handleType,m=e.isRoot,v=e.linkId,p=e.saveChainLink,h=e.setNextDecision,S=e.setNextLink,C=e.setRoot,g=e.setSequenceModel;return i.a.createElement(Bo,null,i.a.createElement(Ro,null,i.a.createElement("h2",null,"Chain link")),i.a.createElement(_o,null),i.a.createElement(Go,null,i.a.createElement(Uo,null,i.a.createElement(wo,{label:"Name:",placeholder:"Chainlink Name ...",onChangeCallback:function(e){return r(e)},value:t,focus:!0})),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select data-setup")),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select sequence"),i.a.createElement(To,{onSelect:function(e){return g(e)},value:u})),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select type of the next"),i.a.createElement(ho,{onSelect:f,value:s?s.type:D.ERROR})),s.type===D.LINK&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next link"),i.a.createElement(Ur,{onClick:l})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create next link"),i.a.createElement(co,{onSelect:S,value:(null===s||void 0===s?void 0:s.type)===D.LINK?s.id:1,chainId:o,exclude:v}))),s.type===D.DEC&&i.a.createElement(i.a.Fragment,null,i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next decision"),i.a.createElement(Ur,{onClick:n})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create next decision"),i.a.createElement(no,{onSelect:function(e){return h(e)},value:(null===s||void 0===s?void 0:s.type)===D.DEC?s.id:1,chainId:o})))),i.a.createElement(_o,null),i.a.createElement(xo,null,i.a.createElement(Vr,{onClick:d,disabled:m}),i.a.createElement(_r,{onClick:C,disabled:m},m?"Start":"Set as Start"),i.a.createElement(Gr,{onClick:p})))},_c=function(){return i.a.createElement(Ko,{form:i.a.createElement(Lc,null)})},Mc=(n(99),function(e){var t=e.statesToEdit,n=e.addStateCallback,a=e.changeName,r=e.removeStateCallback,o=e.setActiveCallback;return i.a.createElement("div",{id:"stateList",className:"gridContainer"},i.a.createElement("div",{className:"header gridItem"},i.a.createElement("label",null,"Name")),i.a.createElement("div",{className:"header gridItem"},i.a.createElement("label",null,"State")),i.a.createElement("div",{className:"header gridItem"},n&&i.a.createElement(Ur,{onClick:n})),t.map((function(e,t){return[i.a.createElement("span",{className:"gridItem",key:t+"a"},a?i.a.createElement(wo,{onChangeCallback:function(t){return a?a(t,e.id):{}},placeholder:"State Name",value:e.label,focus:!0}):i.a.createElement("label",null,e.label)),i.a.createElement("span",{className:"gridItem",key:t+"b"},i.a.createElement(wc,{toggleCallback:function(t){return o(e,t)},isLeft:e.isState,leftLabel:"TRUE",rightLabel:"FALSE"})),i.a.createElement("span",{className:"gridItem",key:t+"c"},r?i.a.createElement(Vr,{onClick:function(){return r(e.id)},noConfirm:!0}):void 0)]})))}),Uc=function(){var e=uc(),t=e.saveStateFkAndStateCondition,n=e.editChain,a=e.createStateFkAndStateCondition,r=e.deleteStateFkAndStateCondition,o=e.id,l=Object(c.c)($n(o));return i.a.createElement(Bo,null,i.a.createElement(Ro,null,i.a.createElement("h2",null,"State")),i.a.createElement(_o,null),i.a.createElement(Go,null,i.a.createElement("div",{className:"width-fluid"},i.a.createElement(Mc,{statesToEdit:l,stateColumnName:"Default",addStateCallback:a,removeStateCallback:r,setActiveCallback:function(e,n){var a=k.deepCopy(e);a.isState=n,t(a)},changeName:function(e,n){var a=l.find((function(e){return e.id===n}));if(a){var i=k.deepCopy(a);i.label=e,t(i)}}}))),i.a.createElement(xo,null,i.a.createElement(Gr,{onClick:function(){l.some((function(e){return""===e.label}))||(l.forEach(t),n())}})))},Gc=function(){return i.a.createElement(Ho,null,i.a.createElement(Uc,null))},Pc=function(){var e=Object(a.useState)(0),t=Object(E.a)(e,2),n=t[0],r=t[1],o=function(){var e=Object(c.c)(kr),t=Object(c.b)();Object(a.useEffect)((function(){null!==e&&void 0!==e||(t(Qt.handleError("Tried to go to edit data without dataToedit specified")),t(xr.setMode.edit()))}));var n=function(){if(""!==(null===e||void 0===e?void 0:e.data.name)){var n=k.deepCopy(e);n.data.instances=n.data.instances.filter((function(e){return""!==e.name})),t(Bi(n))}else i();t(xr.setMode.edit())},i=function(){k.isNullOrUndefined(e)||(t(Hi(e)),t(xr.setMode.edit()))};return{label:"EDIT * "+((null===e||void 0===e?void 0:e.data.name)||""),name:null===e||void 0===e?void 0:e.data.name,changeName:function(n){var a=k.deepCopy(e);a.data.name=n,t(xr.setMode.editData(a))},saveData:n,deleteData:i,updateData:function(){var n=k.deepCopy(e);t(Bi(n))},createAnother:function(){n(),t(xr.setMode.editData())},instances:(null===e||void 0===e?void 0:e.data.instances)?e.data.instances:[],id:(null===e||void 0===e?void 0:e.data.id)||-1,note:e?e.data.note:"",saveNote:function(n){if(!k.isNullOrUndefined(e)&&""!==n){var a=k.deepCopy(e);a.data.note=n,t(xr.setMode.editData(a))}},changeInstanceName:function(n,a){if(null!==e&&null!==a){var i=k.deepCopy(e);i.data.instances[a].name=n,t(xr.setMode.editData(i))}},createInstance:function(){if(!k.isNullOrUndefined(e)){var n=k.deepCopy(e);n.data.instances.push({id:-1,name:""}),t(xr.setMode.editData(n))}},deleteInstance:function(n){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.data.instances.splice(n,1),t(xr.setMode.editData(a))}}}}(),l=o.name,u=o.changeName,d=o.saveData,s=o.deleteData,f=o.updateData,m=o.createAnother,v=o.instances,p=o.note,h=o.saveNote,S=o.changeInstanceName,C=o.createInstance,g=o.deleteInstance;return i.a.createElement(Bo,{key:n},i.a.createElement(Ro,null,i.a.createElement("h2",null,"Data")),i.a.createElement(_o,null),i.a.createElement(Go,null,i.a.createElement(Uo,null,i.a.createElement(wo,{label:"Name:",placeholder:"Data Name",onChangeCallback:u,value:l,focus:!0,onBlur:f})),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement("table",{className:"border",style:{width:"40em"}},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",{style:{textAlign:"center"}},"Instances"),i.a.createElement("td",{className:"flex flex-end"},i.a.createElement(Ur,{onClick:C})))),i.a.createElement("tbody",null,v.map((function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,i.a.createElement("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"}},i.a.createElement(wo,{onChangeCallback:function(e){return S(e,t)},value:e.name,onBlur:f}),0!==t&&i.a.createElement("div",null,i.a.createElement(Vr,{onClick:function(){return g(t)},noConfirm:!0})))))})))))),i.a.createElement(_o,null),i.a.createElement(xo,null,i.a.createElement(Vr,{onClick:s}),i.a.createElement(Xo,{onSaveCallback:h,comment:p}),i.a.createElement(_r,{onClick:function(){m(),r(n+1)}},"Create another"),i.a.createElement(Gr,{onClick:d})))},Bc=function(){return i.a.createElement(Ko,{form:i.a.createElement(Pc,null)})},Hc=function(){var e=Object(a.useState)(0),t=Object(E.a)(e,2),n=t[0],r=t[1],o=function(){var e=Object(c.c)(Hn),t=Object(c.c)(Dr),n=Object(c.b)(),i=Object(a.useState)(0),r=Object(E.a)(i,2),o=r[0],l=r[1];Object(a.useEffect)((function(){k.isNullOrUndefined(t)&&(n(xr.setMode.edit()),n(Qt.handleError("Tried to go to edit relation without relationToedit specified")))}),[t,n]);var u=function(){n(ar(t)),n(xr.setMode.edit())},d=Object.entries(vn).map((function(e,t){var n=Object(E.a)(e,2);return{key:t,text:n[0],value:n[1].toString()}})),s=Object.entries(En).map((function(e,t){var n=Object(E.a)(e,2);return{key:t,text:n[0],value:n[1].toString()}}));return{label:"EDIT * RELATION",label1:null===t||void 0===t?void 0:t.label1,label2:null===t||void 0===t?void 0:t.label2,data1:-1===(null===t||void 0===t?void 0:t.data1Fk)||null===t||void 0===t?void 0:t.data1Fk.toString(),data2:-1===(null===t||void 0===t?void 0:t.data2Fk)||null===t||void 0===t?void 0:t.data2Fk.toString(),direction1:null===t||void 0===t?void 0:t.direction1,direction2:null===t||void 0===t?void 0:t.direction2,type1:null===t||void 0===t?void 0:t.type1,type2:null===t||void 0===t?void 0:t.type2,setLabel:function(e,a){var i=k.deepCopy(t);a?i.label2=e:i.label1=e,n(xr.setMode.editRelation(i))},setType:function(e,a){var i=k.deepCopy(t);a?i.type2=e:i.type1=e,n(xr.setMode.editRelation(i))},setDirection:function(e,a){var i=k.deepCopy(t);a?i.direction2=e:i.direction1=e,n(xr.setMode.editRelation(i))},setData:function(e,a){var i=k.deepCopy(t);a?i.data2Fk=e:i.data1Fk=e,n(xr.setMode.editRelation(i))},saveRelation:function(){-1!==(null===t||void 0===t?void 0:t.data1Fk)&&-1!==(null===t||void 0===t?void 0:t.data2Fk)?n(nr(t)):u(),n(xr.setMode.edit())},deleteRelation:u,cancel:function(){return n(xr.setMode.edit())},dataOptions:e.map((function(e){return{key:e.data.id,text:e.data.name,value:e.data.id.toString()}})),directionOptions:d,typeOptions:s,validRelation:function(){var e=!1;return k.isNullOrUndefined(t)||(e=-1!==t.data1Fk&&-1!==t.data2Fk),e},key:o,createAnother:function(){l(o+1),n(xr.setMode.editRelation())},updateRelation:function(){var e=k.deepCopy(t);n(nr(e))},note:t?t.note:"",saveNote:function(e){if(!k.isNullOrUndefined(t)&&""!==e){var a=k.deepCopy(t);a.note=e,n(xr.setMode.editRelation(a))}}}}(),l=o.data1,u=o.data2,d=o.direction1,s=o.direction2,f=o.setDirection,m=o.setData,v=o.saveRelation,p=o.deleteRelation,h=o.dataOptions,S=o.directionOptions,C=o.createAnother,g=o.updateRelation,b=o.note,O=o.saveNote;return i.a.createElement(Bo,{key:n},i.a.createElement(Ro,null,i.a.createElement("h2",null,"Data Relation")),i.a.createElement(Go,null,i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,{align:zo.center},"FROM")),i.a.createElement(Uo,null,i.a.createElement(zr,{placeholder:"Select Data...",dropdownItems:h,onSelect:function(e){m(Number(e.value)),g()},value:l}),i.a.createElement(zr,{placeholder:"Select Direction1",dropdownItems:S,onSelect:function(e){f(vn[e.value]),g()},value:d})),i.a.createElement(Uo,null,i.a.createElement(Ic,{align:zo.center},"TO")),i.a.createElement(Uo,null,i.a.createElement(zr,{placeholder:"Select Data...",dropdownItems:h,onSelect:function(e){m(Number(e.value),!0),g()},value:u}),i.a.createElement(zr,{placeholder:"Select Direction2",dropdownItems:S,onSelect:function(e){f(vn[e.value],!0),g()},value:s})),i.a.createElement(_o,null)),i.a.createElement(xo,null,i.a.createElement(Vr,{onClick:p}),i.a.createElement(Xo,{onSaveCallback:O,comment:b}),i.a.createElement(_r,{onClick:function(){C(),r(n+1)}},"Create another"),i.a.createElement(Gr,{onClick:v})))},Vc=function(){return i.a.createElement(Ko,{form:i.a.createElement(Hc,null)})},Wc=function(e){var t=e.onSelect,n=e.placeholder,a=e.value,r=e.sequenceFk,o=Object(c.c)(Xn(r));return i.a.createElement(zr,{dropdownItems:o.map((function(e){return{key:e.id,value:e.id.toString(),text:e.label}})),onSelect:function(e){return t(o.find((function(t){return t.id===Number(e.value)})))},placeholder:n,value:a})},zc=function(){var e=function(){var e=Object(c.c)(jr),t=Object(c.c)(Wa),n=Object(c.b)(),i=Object(a.useState)(0),r=Object(E.a)(i,2),o=r[0],l=r[1];Object(a.useEffect)((function(){k.isNullOrUndefined(e)&&(n(Qt.handleError("Tried to go to edit condition step without conditionToEdit specified")),n(xr.setMode.edit()))}),[n,e]);var u=function(){k.isNullOrUndefined(e)||k.isNullOrUndefined(t)||(n(Yi.delete(e,t)),n(xr.setMode.editSequence(e.sequenceFk)))},d=function(e){if(!k.isNullOrUndefined(e)){var t=k.deepCopy(e);n(Yi.save(t)),n(Yi.update(t))}},s=function(t,a){if(void 0!==a){var i=k.deepCopy(e);t?i.ifGoTo=a:i.elseGoTo=a,d(i),n(hi.setCurrentSequenceById(i.sequenceFk))}},f=function(e){var t=k.deepCopy(e);return e.type!==O.STEP&&e.type!==O.DEC||-1!==e.id&&void 0!==e.id||(t.type=O.ERROR),t};return{label:"EDIT * "+((null===t||void 0===t?void 0:t.sequenceTO.name)||"")+" * "+((null===e||void 0===e?void 0:e.name)||""),name:null===e||void 0===e?void 0:e.name,changeName:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.name=t,n(xr.setMode.editDecision(a)),n(hi.setCurrentSequenceById(a.sequenceFk))}},saveDecision:function(t){k.isNullOrUndefined(t)||""!==e.name&&n(Yi.save(t))},validStep:function(){var t=!1;return k.isNullOrUndefined(e)||""!==e.name&&(t=!0),t},updateDecision:d,deleteDecision:u,handleType:function(e,t){if(void 0!==t){var n={type:O[t]};switch(t){case O.ERROR:case O.FIN:case O.IDLE:case O.STEP:case O.DEC:s(e,n)}}},setGoToTypeStep:function(e,t){if(t){var n={type:O.STEP,id:t.sequenceStepTO.id};s(e,n)}},setGoToTypeDecision:function(e,t){if(t){var n={type:O.DEC,id:t.id};s(e,n)}},ifGoTo:null===e||void 0===e?void 0:e.ifGoTo,elseGoTo:null===e||void 0===e?void 0:e.elseGoTo,createGoToStep:function(t){if(!k.isNullOrUndefined(e)){var a=new vc;a.sequenceStepTO.sequenceFk=e.sequenceFk;var i=k.deepCopy(e);n(xr.setMode.editStep(a,i,t))}},createGoToDecision:function(t){if(!k.isNullOrUndefined(e)){var a=new Ec;a.sequenceFk=e.sequenceFk;var i=k.deepCopy(e);n(xr.setMode.editDecision(a,i,t)),l(o+1)}},setRoot:function(){k.isNullOrUndefined(e)||(n(lr.setRoot(e.sequenceFk,e.id,!0)),n(xr.setMode.editDecision(Yi.find(e.id))))},isRoot:!!(null===e||void 0===e?void 0:e.root)&&e.root,key:o,createCondition:function(){if(!k.isNullOrUndefined(e)){var t=k.deepCopy(e);t.conditions.push({decisionFk:t.id,id:-1,actorFk:-1,instanceFk:-1,dataFk:-1}),d(t)}},decId:null===e||void 0===e?void 0:e.id,conditions:(null===e||void 0===e?void 0:e.conditions)||[],note:e?e.note:"",saveNote:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.note=t,n(xr.setMode.editDecision(a)),n(hi.setCurrentSequenceById(a.sequenceFk))}},deleteCondition:function(t){if(!k.isNullOrUndefined(e)){var n=k.deepCopy(e);n.conditions=n.conditions.filter((function(e){return e.id!==t})),d(n)}},saveCondition:function(t){if(!k.isNullOrUndefined(e)){var n=k.deepCopy(e);if(n.conditions.find((function(e){return e.id===t.id}))){var a=n.conditions.filter((function(e){return e.id!==t.id}));a.push(t),n.conditions=a}else n.conditions.push(t);d(n)}},saveAndGoBack:function(){if(!k.isNullOrUndefined(e)&&!k.isNullOrUndefined(t)){var a=k.deepCopy(e);""!==a.name?(a.ifGoTo=f(a.ifGoTo),a.elseGoTo=f(a.elseGoTo),n(Yi.save(a)),n(xr.setMode.editSequence(t.sequenceTO.id))):u()}},stateFkAndStateConditions:(null===e||void 0===e?void 0:e.stateFkAndStateConditions)||[],deleteStateFkAndStateCondition:function(t){if(!k.isNullOrUndefined(e)){var n=k.deepCopy(e);n.stateFkAndStateConditions=n.stateFkAndStateConditions.filter((function(e){return e.stateFk!==t})),d(n)}},createStateFkAndStateCondition:function(){if(!k.isNullOrUndefined(e)){var t=k.deepCopy(e);t.stateFkAndStateConditions.push({stateFk:-1,stateCondition:!0}),d(t)}},updateStateFkAndStateCondition:function(t,n){if(t&&!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.stateFkAndStateConditions[n]=t,d(a)}},sequenceFk:(null===e||void 0===e?void 0:e.sequenceFk)||-1}}(),t=e.name,n=e.changeName,r=e.handleType,o=e.ifGoTo,l=e.elseGoTo,u=e.setGoToTypeStep,d=e.createGoToStep,s=e.setRoot,f=e.isRoot,m=e.deleteDecision,v=e.createGoToDecision,p=e.setGoToTypeDecision,h=e.createCondition,S=e.decId,C=e.conditions,g=e.note,b=e.saveNote,T=e.deleteCondition,D=e.saveCondition,N=e.saveAndGoBack,I=e.stateFkAndStateConditions,y=e.createStateFkAndStateCondition,A=e.updateStateFkAndStateCondition,F=e.deleteStateFkAndStateCondition,q=e.sequenceFk,j=function(e,t){return i.a.createElement("tr",{key:e.stateFk},i.a.createElement("td",null,i.a.createElement("div",{className:"flex content-space-between"},i.a.createElement(Wc,{onSelect:function(e){return function(e,t){e&&A({stateFk:e.id,stateCondition:e.isState},t)}(e,t)},sequenceFk:q,value:e.stateFk.toString(),placeholder:"Select sequence state"}),i.a.createElement(wc,{toggleCallback:function(n){return function(e,t,n){var a=k.deepCopy(e);a.stateCondition=n,A(a,t)}(e,t,n)},isLeft:e.stateCondition,leftLabel:"TRUE",rightLabel:"FALSE"}),i.a.createElement(Vr,{onClick:function(){F(e.stateFk)},noConfirm:!0}))))};return i.a.createElement(Bo,null,i.a.createElement(Ro,null,i.a.createElement("h2",null,"Decision")),i.a.createElement(Go,null,i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(wo,{label:"Name:",placeholder:"Decision name ...",onChangeCallback:function(e){return n(e)},value:t,focus:!0})),i.a.createElement(Uo,null,i.a.createElement("table",{className:"border",style:{width:"40em"}},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"Actor"),i.a.createElement("td",null,"Data Instance"),i.a.createElement("td",{className:"flex flex-end"},i.a.createElement(Ur,{onClick:h})))),i.a.createElement("tbody",{style:{maxHeight:"20vh"}},C.map((function(e){var t=k.deepCopy(e);return i.a.createElement("tr",{key:t.id},i.a.createElement("td",null,i.a.createElement("div",{className:"flex content-space-between"},i.a.createElement(Xr,{onSelect:function(e){t.actorFk=e?e.actor.id:-1,D(t)},placeholder:"Select actor...",value:t.actorFk}),i.a.createElement(Co,{onSelect:function(e){k.isNullOrUndefined(e)||(t.dataFk=e.dataFk,t.instanceFk=e.instanceId,D(t))},placeholder:"Select data instance ...",value:JSON.stringify({dataFk:t.dataFk,instanceId:t.instanceFk})}),-1!==t.id&&i.a.createElement(Vr,{onClick:function(){T(t.id)},noConfirm:!0}))))}))))),i.a.createElement(Uo,null,i.a.createElement("table",{className:"border",style:{width:"40em"}},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("td",null,"State"),i.a.createElement("td",null,"Is"),i.a.createElement("td",{className:"flex flex-end"},i.a.createElement(Ur,{onClick:y})))),i.a.createElement("tbody",{style:{maxHeight:"20vh"}},I.map((function(e,t){return j(e,t)}))))),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,{align:zo.center},i.a.createElement("h3",null,"If condition's are true"))),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Type condition true"),i.a.createElement(So,{onSelect:function(e){return r(!0,e)},value:o?o.type:O.FIN})),o.type===O.STEP&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next step"),i.a.createElement(Io,{onSelect:function(e){return u(!0,e)},value:(null===o||void 0===o?void 0:o.type)===O.STEP?o.id:1})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create new /next step"),i.a.createElement(Ur,{onClick:function(){return d(!0)}}))),o.type===O.DEC&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next decision"),i.a.createElement(Eo,{onSelect:function(e){return p(!0,e)},value:(null===o||void 0===o?void 0:o.type)===O.DEC?o.id:1,exclude:S})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create new / next decision"),i.a.createElement(Ur,{onClick:function(){return v(!0)}}))),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Ic,{align:zo.center},i.a.createElement("h3",null,"If condition's are false"))),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Type condition false"),i.a.createElement(So,{onSelect:function(e){return r(!1,e)},value:l?l.type:O.ERROR})),l.type===O.STEP&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next step"),i.a.createElement(Io,{onSelect:function(e){return u(!1,e)},value:(null===l||void 0===l?void 0:l.type)===O.STEP?l.id:1})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create new /next step"),i.a.createElement(Ur,{onClick:function(){return d(!1)}}))),l.type===O.DEC&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Select next decision"),i.a.createElement(Eo,{onSelect:function(e){return p(!1,e)},value:(null===l||void 0===l?void 0:l.type)===O.DEC?l.id:1,exclude:S})),i.a.createElement(Uo,null,i.a.createElement(Ic,null,"Create new / next decision"),i.a.createElement(Ur,{onClick:function(){return v(!1)}}))),i.a.createElement(_o,null)),i.a.createElement(xo,null,i.a.createElement(Vr,{onClick:m}),i.a.createElement(Xo,{onSaveCallback:b,comment:g}),i.a.createElement(_r,{onClick:s,disabled:f},f?"Start":"Set as Start"),i.a.createElement(Gr,{onClick:N})))},Qc=function(){return i.a.createElement(Ko,{form:i.a.createElement(zc,null)})},Zc=function(){var e=Cc(),t=e.saveSequenceState,n=e.editSequence,a=e.createSequenceState,r=e.deleteSequenceState,o=e.id,l=Object(c.c)(Xn(o));return i.a.createElement(Bo,null,i.a.createElement(Ro,null,i.a.createElement("h2",null,"State")),i.a.createElement(_o,null),i.a.createElement(Go,null,i.a.createElement("div",{className:"width-fluid"},i.a.createElement(Mc,{statesToEdit:l,stateColumnName:"Default",addStateCallback:a,removeStateCallback:r,setActiveCallback:function(e,n){var a=k.deepCopy(e);a.isState=n,t(a)},changeName:function(e,n){var a=l.find((function(e){return e.id===n}));if(a){var i=k.deepCopy(a);i.label=e,t(i)}}}))),i.a.createElement(xo,null,i.a.createElement(Gr,{onClick:function(){l.some((function(e){return""===e.label}))||(l.forEach(t),n())}})))},Kc=function(){return i.a.createElement(Ho,null,i.a.createElement(Zc,null))},Jc=function(){var e=function(){var e=Object(c.c)(Fr),t=Object(c.c)(Wa),n=Object(c.b)(),i=Object(a.useState)({type:O.STEP,id:-1}),r=Object(E.a)(i,2),o=r[0],l=r[1],u=Object(a.useState)(0),d=Object(E.a)(u,2),s=d[0],f=d[1];Object(a.useEffect)((function(){void 0===e&&(n(Qt.handleError("Tried to go to edit sequence step without sequenceStepToEdit specified")),n(xr.setMode.edit())),e&&l(e.sequenceStepTO.goto)}),[n,e]);var m=function(t){if(void 0!==t){var a=k.deepCopy(e);a.sequenceStepTO.goto=t,n(Qi.update(a)),n(Qi.save(a)),n(hi.setCurrentSequenceById(a.sequenceStepTO.sequenceFk))}};return{label:"EDIT * "+((null===t||void 0===t?void 0:t.sequenceTO.name)||"")+" * "+((null===e||void 0===e?void 0:e.sequenceStepTO.name)||""),name:e?e.sequenceStepTO.name:"",changeName:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(e);a.sequenceStepTO.name=t,n(xr.setMode.editStep(a)),n(Qi.save(a)),n(hi.setCurrentSequenceById(a.sequenceStepTO.sequenceFk))}},saveSequenceStep:function(a){k.isNullOrUndefined(e)||k.isNullOrUndefined(t)||(""!==e.sequenceStepTO.name?n(Qi.save(e)):n(Qi.delete(e,t)),n(a&&"EDIT"===a?xr.setMode.edit():xr.setMode.editSequence(e.sequenceStepTO.sequenceFk)))},deleteSequenceStep:function(){k.isNullOrUndefined(e)||k.isNullOrUndefined(t)||(n(Qi.delete(e,t)),n(xr.setMode.editSequence(e.sequenceStepTO.sequenceFk)))},validStep:function(){var t=!1;return k.isNullOrUndefined(e)||""!==e.sequenceStepTO.name&&(t=!0),t},editOrAddAction:function(t){if(!k.isNullOrUndefined(e)){var a=k.deepCopy(t);void 0===a?((a=new bc).sequenceStepFk=e.sequenceStepTO.id,a.index=e.actions.length,n(Dc(a))):n(xr.setMode.editAction(a))}},updateStep:function(){},handleType:function(e){if(void 0!==e){var t={type:O[e]};switch(l(t),e){case O.ERROR:case O.FIN:m(t);break;case O.IDLE:m(t)}}},goTo:o,setGoToTypeStep:function(e){if(e){var t={type:O.STEP,id:e.sequenceStepTO.id};m(t)}},setGoToTypeDecision:function(e){if(e){var t={type:O.DEC,id:e.id};m(t)}},createGoToStep:function(){if(!k.isNullOrUndefined(e)){var t=new vc;t.sequenceStepTO.sequenceFk=e.sequenceStepTO.sequenceFk;var a=k.deepCopy(e);f(s+1),n(xr.setMode.editStep(t,a)),n(hi.setCurrentSequenceById(t.sequenceStepTO.sequenceFk))}},createGoToDecision:function(){if(!k.isNullOrUndefined(e)){var t=new Ec;t.sequenceFk=e.sequenceStepTO.sequenceFk;var a=k.deepCopy(e);n(xr.setMode.editDecision(t,a))}},setRoot:function(){if(!k.isNullOrUndefined(e)&&!k.isNullOrUndefined(t)){n(lr.setRoot(e.sequenceStepTO.sequenceFk,e.sequenceStepTO.id,!1));var a=Ea.findSequenceStepCTO(e.sequenceStepTO.id);n(a?xr.setMode.editStep(a):xr.setMode.edit())}},isRoot:!!(null===e||void 0===e?void 0:e.sequenceStepTO.root)&&(null===e||void 0===e?void 0:e.sequenceStepTO.root),key:s,stepId:null===e||void 0===e?void 0:e.sequenceStepTO.id,note:e?e.sequenceStepTO.note:"",saveNote:function(t){if(!k.isNullOrUndefined(e)&&""!==t){var a=k.deepCopy(e);a.sequenceStepTO.note=t,n(xr.setMode.editStep(a)),n(Qi.save(a)),n(hi.setCurrentSequenceById(a.sequenceStepTO.sequenceFk))}},actions:(null===e||void 0===e?void 0:e.actions)||[],switchIndexesAndSave:function(t,a){var i=a?t+1:t-1,r=k.deepCopy(e);if(i>=0&&i<=r.actions.length-1){var o=r.actions[t];o.index=i;var c=r.actions[i];c.index=t,r.actions[t]=c,r.actions[i]=o,n(Qi.save(r)),n(hi.setCurrentSequenceById(r.sequenceStepTO.sequenceFk)),n(Qi.update(r))}}}}(),t=e.name,n=e.changeName,r=e.deleteSequenceStep,o=e.saveSequenceStep,l=e.editOrAddAction,u=e.updateStep,d=e.handleType,s=e.setGoToTypeStep,f=e.goTo,m=e.setGoToTypeDecision,v=e.createGoToStep,p=e.createGoToDecision,h=e.setRoot,S=e.isRoot,C=e.stepId,g=e.note,b=e.saveNote,T=e.actions,D=e.switchIndexesAndSave,N=Nc(),I=N.deleteAction,y=N.getOptionText,A=Object(a.useState)(!0),F=Object(E.a)(A,2),q=F[0],j=F[1];return i.a.createElement(Bo,null,i.a.createElement(Ro,null,i.a.createElement("h2",null,"Step")),i.a.createElement(Go,null,i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(wo,{label:"Name:",placeholder:"Step Name ...",onChangeCallback:function(e){return n(e)},value:t,focus:!0,onBlur:u})),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Uo,{position:Rr.center},i.a.createElement(Ic,null,i.a.createElement("h3",null,"Actions"))),i.a.createElement(Uo,{position:Rr.center},i.a.createElement(Hr,{show:q,onClick:function(){return j(!q)}}))),q&&i.a.createElement(_o,null)&&i.a.createElement(Uo,null,function(e){return i.a.createElement("table",{className:"border",style:{width:"40em",overflow:"hidden"}},i.a.createElement("thead",null,i.a.createElement("tr",{className:"flex content-space-between align-center"},i.a.createElement("td",null,"Action"),i.a.createElement("td",null,i.a.createElement(Ur,{onClick:function(){l(),u()}})))),i.a.createElement("tbody",{style:{maxHeight:"30vh"}},e.map((function(e,t){return function(e,t){return i.a.createElement("tr",{key:t},i.a.createElement("td",null,i.a.createElement("label",null,y(e))),i.a.createElement("td",{className:"flex flex-end"},i.a.createElement(Vr,{onClick:function(){I(e),u()}}),i.a.createElement(Pr,{onClick:function(){return l(e)}}),i.a.createElement(Mr,{iconName:en.faAngleDown,onClick:function(){return D(t,!0)}}),i.a.createElement(Mr,{iconName:tn.faAngleUp,onClick:function(){return D(t,!1)}})))}(e,t)}))))}(T)),i.a.createElement(_o,null),i.a.createElement(Uo,null,i.a.createElement(Uo,{position:Rr.start},i.a.createElement(Ic,null,"Select type of the next element")),i.a.createElement(Uo,{position:Rr.start},i.a.createElement(So,{onSelect:d,value:f?f.type:O.ERROR}))),f.type===O.STEP&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Uo,null,i.a.createElement(Uo,{position:Rr.start},i.a.createElement(Ic,null,"Select next step")),i.a.createElement(Uo,{position:Rr.start},i.a.createElement(Io,{onSelect:s,value:(null===f||void 0===f?void 0:f.type)===O.STEP?f.id:1,exclude:C}))),i.a.createElement(Uo,null,i.a.createElement(Uo,{position:Rr.start},i.a.createElement(Ic,null,"Create next step")),i.a.createElement(Uo,{position:Rr.start},i.a.createElement(Ur,{onClick:v})))),f.type===O.DEC&&i.a.createElement(i.a.Fragment,null,i.a.createElement(Uo,null,i.a.createElement(Uo,{position:Rr.start},i.a.createElement(Ic,null,"Select next decision")),i.a.createElement(Uo,{position:Rr.start},i.a.createElement(Eo,{onSelect:m,value:(null===f||void 0===f?void 0:f.type)===O.DEC?f.id:1}))),i.a.createElement(Uo,null,i.a.createElement(Uo,{position:Rr.start},i.a.createElement(Ic,null,"Create next decision")),i.a.createElement(Uo,{position:Rr.start},i.a.createElement(Ur,{onClick:p})))),i.a.createElement(_o,null)),i.a.createElement(xo,null,i.a.createElement(Vr,{onClick:r}),i.a.createElement(Xo,{onSaveCallback:b,comment:g}),i.a.createElement(_r,{onClick:h,disabled:S},S?"Start":"Set as Start"),i.a.createElement(Gr,{onClick:o})))},Yc=function(){return i.a.createElement(Ko,{form:i.a.createElement(Jc,null)})},Xc=function(){return function(e){switch(e){case Ei.EDIT_ACTOR:return i.a.createElement(qc,null);case Ei.EDIT_DATA:return i.a.createElement(Bc,null);case Ei.EDIT_RELATION:return i.a.createElement(Vc,null);case Ei.EDIT_SEQUENCE:return i.a.createElement(gc,null);case Ei.EDIT_SEQUENCE_STEP:return i.a.createElement(Yc,null);case Ei.EDIT_SEQUENCE_STATES:return i.a.createElement(Kc,null);case Ei.EDIT_SEQUENCE_DECISION:return i.a.createElement(Qc,null);case Ei.EDIT_SEQUENCE_STEP_ACTION:return i.a.createElement(Ac,null);case Ei.EDIT_CHAIN:return i.a.createElement(dc,null);case Ei.EDIT_CHAIN_STATES:return i.a.createElement(Gc,null);case Ei.EDIT_CHAIN_LINK:return i.a.createElement(_c,null);case Ei.EDIT_CHAIN_DECISION:return i.a.createElement(Rc,null);default:return i.a.createElement(sc,null)}}(Object(c.c)(Cr))},$c=n(55),el=function(){var e=Object(a.useState)(!1),t=Object(E.a)(e,2),n=t[0],r=t[1],o=Object(a.createRef)(),l=Object(c.b)();return i.a.createElement(nc,null,i.a.createElement(ac,{label:"Upload"},i.a.createElement("div",null,i.a.createElement(Mr,{iconName:$c.faCloudUploadAlt,onClick:function(){null!==o&&null!==o.current&&o.current.click()}}),i.a.createElement("input",{hidden:!0,ref:o,type:"file",onChange:function(e){null!==e.target.files&&function(e){var t=new FileReader;null!==e&&(t.readAsText(e),t.onload=function(e){l(Qt.storefileData(e.target.result))})}(e.target.files[0])}}))),i.a.createElement(ac,{label:"Download"},i.a.createElement(Mr,{onClick:function(){return r(!0)},iconName:Xt.c}),n&&i.a.createElement(Vo,{closeCallback:function(){return r(!1)}})),i.a.createElement(ac,{label:"Clear"},i.a.createElement(Vr,{onClick:function(){l(xr.setMode.view()),l(Qt.createNewProject())}})))},tl=function(){var e=nl(),t=e.showActorPage,n=e.showDataPage,a=e.showFlowChartPage,r=e.showTablePage;return i.a.createElement(nc,null,i.a.createElement(ac,null,i.a.createElement(Mr,{iconName:Xt.i,onClick:t}),i.a.createElement(Mr,{iconName:Xt.i,onClick:n}),i.a.createElement(Mr,{iconName:Xt.i,onClick:r}),i.a.createElement(Mr,{iconName:Xt.i,onClick:a})))},nl=function(){return{showActorPage:function(){window.open(bu.actor,"_blank","toolbar=no,top=0,left=0")},showDataPage:function(){window.open(bu.data,"_blank","toolbar=no,top=0,left=0")},showTablePage:function(){window.open(bu.table,"_blank","toolbar=no,top=0,left=0")},showFlowChartPage:function(){window.open(bu.flowChart,"_blank","toolbar=no,top=0,left=0")}}},al=(n(100),function(e){var t=e.text,n=e.label;return i.a.createElement("div",{className:"flowChartLabel"},i.a.createElement("span",{className:"flowChartLabelLeft"},i.a.createElement("label",null,n)),i.a.createElement("span",{className:"flowChartLabelRight"},i.a.createElement("label",null,t)))}),il=function(e){var t=e.size,n=e.className;return i.a.createElement($t.a,{icon:mn.noteEmpty,size:t||"1x",className:n})},rl=(n(101),n(57)),ol=n(58),cl=n(56),ll=n(59),ul=function(e){var t=e.fastBackward,n=e.fastForward,a=e.backward,r=e.forward,o=e.index;return i.a.createElement("div",{className:"flex"},i.a.createElement(Mr,{iconName:cl.faFastBackward,onClick:t}),i.a.createElement(_r,{onClick:a},i.a.createElement($t.a,{icon:rl.faArrowLeft}),"BACK"),i.a.createElement("div",{className:"border border-medium border-radius flex flex-center padding-small"},i.a.createElement("label",null,o)),i.a.createElement(Mr,{onClick:r},"NEXT",i.a.createElement($t.a,{icon:ol.faArrowRight})),i.a.createElement(Mr,{iconName:ll.faFastForward,onClick:n}))},dl=function(){var e=function(){var e=Object(c.c)(Wa),t=Object(c.c)(oi),n=Object(c.c)(za),a=Object(c.c)(li),i=Object(c.c)(Xa),r=Object(c.b)();return{sequence:e,stepIndex:t,linkIndex:a,selectSequence:function(e){k.isNullOrUndefined(e)||r(hi.setCurrentSequenceById(e.id)),void 0===e&&(r(hi.resetCurrentStepIndex),r(hi.resetCurrentSequence))},currentSequence:(null===e||void 0===e?void 0:e.sequenceTO.id)||-1,currentChain:(null===n||void 0===n?void 0:n.id)||-1,selectChain:function(e){k.isNullOrUndefined(e)||r(hi.setCurrentChain(e)),void 0===e&&(r(hi.resetCurrentStepIndex),r(hi.resetCurrentChain))},selectedSequenceName:(null===e||void 0===e?void 0:e.sequenceTO.name)||"",selectedChainName:(null===n||void 0===n?void 0:n.name)||"",editConfiguration:function(){return r(xr.setMode.editConfiguration())},getSequenceNote:function(){var t="";return k.isNullOrUndefined(e)||(t=e.sequenceTO.note),t},getChainNote:function(){var e="";return k.isNullOrUndefined(n)||(e=n.note),e},viewLevel:i}}(),t=e.stepIndex,n=e.linkIndex,r=e.selectedChainName,o=e.selectedSequenceName,l=e.getSequenceNote,u=e.getChainNote,d=e.viewLevel,s=function(){var e=Object(c.c)(Cr),t=Object(c.c)(Wa),n=Object(c.c)(oi),i=Object(c.c)(za),r=Object(c.c)(li),o=Object(c.b)(),l=function(){return e===Ei.VIEW},u=function(){!k.isNullOrUndefined(t)&&l()&&o(hi.stepBack(n))},d=function(){!k.isNullOrUndefined(t)&&l()&&o(hi.stepNext(n))},s=function(){!k.isNullOrUndefined(i)&&l()&&o(hi.linkNext(r))},f=function(){!k.isNullOrUndefined(i)&&l()&&o(hi.linkBack(r))},m=function(e){"ArrowLeft"===e.key&&u(),"ArrowRight"===e.key&&d(),"PageDown"===e.key&&(e.preventDefault(),s()),"PageUp"===e.key&&(e.preventDefault(),f())};return Object(a.useEffect)((function(){return document.addEventListener("keydown",m),function(){document.removeEventListener("keydown",m)}})),{stepNext:d,stepBack:u,linkNext:s,linkBack:f}}(),f=s.stepBack,m=s.stepNext,v=s.linkBack,E=s.linkNext;return i.a.createElement(i.a.Fragment,null,i.a.createElement(nc,null,i.a.createElement(ac,null,i.a.createElement("div",null,""!==r&&i.a.createElement(al,{label:"CHAIN:",text:r}),i.a.createElement(al,{label:"SEQU.:",text:o}))),i.a.createElement(ac,null,i.a.createElement(il,{size:"2x",className:"margin-medium padding-small border border-medium"}),i.a.createElement("textarea",{className:"noteTextarea border border-medium padding-medium width-fluid",value:d===ba.chain?u():l(),readOnly:!0})),i.a.createElement(ac,null)),i.a.createElement("div",{className:"viewNavigatorWrapper"},i.a.createElement("div",{className:"animator"},i.a.createElement(ul,{fastBackward:v,fastForward:E,backward:f,forward:m,index:((n+1).toString()||"0")+" / "+(t.toString()||"0")}))))},sl=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1;return Object(p.a)(this,n),(e=t.call(this)).actorFk=a,e.dataFk=i,e.instanceFk=r,e.dataSetupFk=o,e}return n}(Ce),fl=function(e){Object(he.a)(n,e);var t=Object(Se.a)(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return Object(p.a)(this,n),(e=t.call(this)).name=a,e.note=i,e.chainFk=r,e.initDatas=o,e.stateValues=c,e}return n}(Ce),ml=function(e){return function(t){t(mr.setChainConfiguration(e))}},vl={update:ml,create:function(e){return function(t){var n=new fl;n.chainFk=e;var a=Ht(e);200===a.code&&(n.stateValues=a.object.map((function(e){return{chainStateFk:e.id,value:e.isState}}))),t(ml(n))}},delete:function(e){return function(t){var n=ut(e);200!==n.code&&t(Qt.handleError(n.message)),t(ma())}}},El=function(e){return function(t,n){var a=n().edit.mode;a===Ei.VIEW_CONFIGURATION?t(mr.setSequenceConfigurationToEdit(e)):t(Qt.handleError("Try to set Sequence Configuration to edit in mode: "+a))}},pl={save:function(e){return function(t){var n=ct(e);200!==n.code&&t(Qt.handleError(n.message)),t(la()),t(pl.update(n.object))}},delete:function(e){return function(t){var n=ot(e);200!==n.code&&t(Qt.handleError(n.message)),t(la())}},update:El,create:function(e){return function(t){var n=new be;n.sequenceFk=e;var a=_t(e);200===a.code&&(n.stateValues=a.object.map((function(e){return{sequenceStateFk:e.id,value:e.isState}}))),t(El(n))}}},hl=(n(102),function(e){var t=e.toggle,n=e.value;return i.a.createElement("label",{className:"switch"},i.a.createElement("input",{type:"checkbox",onChange:t,checked:n}),i.a.createElement("span",{className:"slider round"}))}),Sl=function(e){var t=e.chainId,n=e.onSelectCallback,a=e.selectedChainConfiguration,r=Object(c.c)(Yn(t));return i.a.createElement(zr,{onSelect:function(e){var t;void 0!==e&&(t=r.find((function(t){return t.id===Number(e.value)}))),n(t)},dropdownItems:r.map((function(e){return{value:e.id.toString(),key:e.id,text:e.name}})),clearable:!0,placeholder:0===r.length?"No configuration available":"Select configuration",value:a?a.toString():void 0})},Cl=function(e){var t=e.sequenceId,n=e.onSelectCallback,a=e.selectedSequenceConfiguration,r=Object(c.c)(Jn(t));return i.a.createElement(zr,{onSelect:function(e){var t;void 0!==e&&(t=r.find((function(t){return t.id===Number(e.value)}))),n(t)},dropdownItems:r.map((function(e){return{value:e.id.toString(),key:e.id,text:e.name}})),clearable:!0,placeholder:0===r.length?"No configuration available":"Select configuration",value:a?a.toString():void 0})},gl=(n(103),function(e){var t=e.label,n=e.onClick,a=e.isSelected;return i.a.createElement(_r,{className:"width-fluid",onClick:n,active:a},i.a.createElement("h2",null,t))}),bl=function(e){var t=e.name,n=e.onSaveCallback,r=e.onCloseCallback,o=Object(a.useState)(""),c=Object(E.a)(o,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){u(t)}),[t]),i.a.createElement(Ho,null,i.a.createElement(Bo,null,i.a.createElement(Ro,null,i.a.createElement("h2",null,"Save Configuration")),i.a.createElement(Go,null,i.a.createElement(wo,{onChangeCallback:u,focus:!0,value:l})),i.a.createElement(xo,null,i.a.createElement(_r,{onClick:r},"Cancel"),i.a.createElement(_r,{onClick:function(){n(l),r()}},"Save"))))},Ol=function(e){var t=e.states,n=e.setStateCallback;return i.a.createElement(Mc,{statesToEdit:t,stateColumnName:"State",setActiveCallback:n})},Tl=function(){var e=Object(c.b)(),t=Object(a.useState)(!1),n=Object(E.a)(t,2),r=n[0],o=n[1],l=Object(a.useState)(!0),u=Object(E.a)(l,2),d=u[0],s=u[1],f=Object(a.useState)(!1),m=Object(E.a)(f,2),v=m[0],p=m[1],h=Object(c.c)(Wa),S=Object(c.c)(Ar),C=Object(c.c)(Qa),g=Object(c.c)(br),b=function(){if(null!==h&&null!==S&&(e(hi.setCurrentSequenceById(h.sequenceTO.id)),e(hi.setCurrentSequenceConfiguration(S)),e(xr.setMode.view())),null!==C&&null!==g){var t=k.deepCopy(C.chain);e(hi.setCurrentChainConfiguration(g)),e(xr.setMode.view()),e(hi.setCurrentChain(t))}},O=function(t){e(pl.create(t))},T=function(){k.isNullOrUndefined(S)||k.isNullOrUndefined(h)||(e(pl.delete(S)),O(h.sequenceTO.id))},D=function(t,n){if(S){var a=k.deepCopy(S);a.stateValues.forEach((function(e){return e.sequenceStateFk===t.id&&(e.value=n),e})),e(pl.update(a))}},N=function(e){var t=k.deepCopy(e);return h&&S&&t.map((function(e){return S.stateValues.forEach((function(t){t.sequenceStateFk===e.id&&(e.isState=t.value)})),e})),t},I=function(){if(!k.isNullOrUndefined(S)){var t=k.deepCopy(S);t.initDatas.push(new sl),e(pl.update(t))}},y=function(t,n){if(!k.isNullOrUndefined(S)){var a=k.deepCopy(S);a.initDatas[n]=t,e(pl.update(a))}},A=function(t,n){var a=k.deepCopy(t);return i.a.createElement("tr",{key:n},i.a.createElement("td",null,i.a.createElement("div",{className:"flex content-space-between"},i.a.createElement(Xr,{onSelect:function(e){a.actorFk=e?e.actor.id:-1,y(a,n)},placeholder:"Select Actor...",value:a.actorFk}),i.a.createElement(Co,{onSelect:function(e){k.isNullOrUndefined(e)||(a.dataFk=e.dataFk,a.instanceFk=e.instanceId,y(a,n))},placeholder:"Select Data Instance...",value:JSON.stringify({dataFk:a.dataFk,instanceId:a.instanceFk})}),i.a.createElement(Vr,{onClick:function(){!function(t){if(!k.isNullOrUndefined(S)){var n=k.deepCopy(S);n.initDatas=n.initDatas.filter((function(e,n){return n!==t})),e(pl.update(n))}}(n)},noConfirm:!0}))))},F=function(e){var t=k.deepCopy(e);return C&&g&&t.map((function(e){return g.stateValues.forEach((function(t){t.chainStateFk===e.id&&(e.isState=t.value)})),e})),t},q=function(t,n){if(S){var a=k.deepCopy(S);a.stateValues.forEach((function(e){return e.chainStateFk===t.id&&(e.value=n),e})),e(vl.update(a))}},j=function(){if(!k.isNullOrUndefined(g)){var t=k.deepCopy(g);t.initDatas.push(new sl),e(vl.update(t))}},w=function(t,n){if(!k.isNullOrUndefined(g)){var a=k.deepCopy(g);a.initDatas[n]=t,e(vl.update(a))}},x=function(t,n){var a=k.deepCopy(t);return i.a.createElement("tr",{key:n},i.a.createElement("td",null,i.a.createElement("div",{className:"flex content-space-between"},i.a.createElement(Xr,{onSelect:function(e){a.actorFk=e?e.actor.id:-1,w(a,n)},placeholder:"Select Actor...",value:a.actorFk}),i.a.createElement(Co,{onSelect:function(e){k.isNullOrUndefined(e)||(a.dataFk=e.dataFk,a.instanceFk=e.instanceId,w(a,n))},placeholder:"Select Data Instance...",value:JSON.stringify({dataFk:a.dataFk,instanceId:a.instanceFk})}),i.a.createElement(Vr,{onClick:function(){!function(t){if(!k.isNullOrUndefined(g)){var n=k.deepCopy(g);n.initDatas=n.initDatas.filter((function(e,n){return n!==t})),e(vl.update(n))}}(n)},noConfirm:!0}))))},R=function(t){o(void 0!==t?t:!r),e(hi.resetAll)},L=function(){if(!k.isNullOrUndefined(h)&&!k.isNullOrUndefined(S)){if(h.sequenceStates.length>0)return i.a.createElement(Ol,{states:N(h.sequenceStates||[]),setStateCallback:D});if(0===h.sequenceStates.length)return i.a.createElement("div",{className:"flex flex-center align-center"},i.a.createElement("h2",{className:"padding-medium"},"-- no states declared --"))}},_=function(){if(!k.isNullOrUndefined(C)&&!k.isNullOrUndefined(g)){if(g.stateValues.length>0)return i.a.createElement(Ol,{states:F(C.chainStates||[]),setStateCallback:q});if(0===g.stateValues.length)return i.a.createElement("div",{className:"flex flex-center align-center"},i.a.createElement("h2",{className:"padding-medium"},"-- no states declared --"))}},M=function(){if(!k.isNullOrUndefined(S)&&!k.isNullOrUndefined(h)){if(S.initDatas.length>0)return S.initDatas.map(A);if(0===S.initDatas.length)return i.a.createElement("div",{className:"flex flex-center align-center"},i.a.createElement("h2",{className:"padding-medium"},"-- no init datas declared --"))}},U=function(){if(!k.isNullOrUndefined(g)&&!k.isNullOrUndefined(C)){if(g.initDatas.length>0)return g.initDatas.map(x);if(0===g.initDatas.length)return i.a.createElement("div",{className:"flex flex-center align-center"},i.a.createElement("h2",{className:"padding-medium"},"-- no init datas declared --"))}},G=function(){var e="";return k.isNullOrUndefined(h)||(e=h.sequenceTO.note),k.isNullOrUndefined(C)||(e=C.chain.note),e};return i.a.createElement("div",{className:"configurationPanel border border-medium"},i.a.createElement("div",{className:"configurationPanelHeader content-space-around align-center padding-medium"},i.a.createElement("div",{className:"flex align-center"},i.a.createElement("h3",{className:r?"clickAble":"selectedColor",onClick:function(){return R(!1)}},"Chain"),i.a.createElement("div",{className:"padding-horizontal-m"},i.a.createElement(hl,{toggle:function(){return R()},value:r})),i.a.createElement("h3",{className:r?"selectedColor":"clickAble",onClick:function(){return R(!0)}},"Sequence")),r&&i.a.createElement(To,{onSelect:function(t){var n;(n=null===t||void 0===t?void 0:t.id)?(e(hi.setCurrentSequenceById(n)),e(hi.setViewLevel(ba.sequence)),O(n)):(e(hi.resetCurrentSequence),e(hi.resetCurrentSequenceConfiguration),e(mr.clearObjectToEdit()))},value:null===h||void 0===h?void 0:h.sequenceTO.id}),!r&&i.a.createElement(io,{onSelect:function(t){if(t){var n=k.deepCopy(t);e(hi.setCurrentChain(n)),e(hi.setViewLevel(ba.chain)),e(vl.create(n.id))}else e(hi.resetCurrentChain),e(mr.clearObjectToEdit())},value:null===C||void 0===C?void 0:C.chain.id}),(null!==h||null!==C)&&i.a.createElement(Hr,{onClick:s,show:d,size:ur.medium})),h&&d&&i.a.createElement("div",{className:"configurationBody flex border-top border-medium"},i.a.createElement("div",{className:"configurationStateColumn flex flex-column width-fluid"},i.a.createElement("div",{className:"flex flex-center padding-small border-bottom border-medium"},i.a.createElement(il,{size:"2x",className:"margin-medium padding-small border border-medium"}),i.a.createElement("textarea",{className:"noteTextarea border border-medium padding-medium",value:G(),readOnly:!0})),i.a.createElement("div",{className:"flex content-space-around align-center padding-small border-bottom border-medium"},i.a.createElement("h2",null,"Configuration"),h&&i.a.createElement(Cl,{onSelectCallback:function(t){void 0===t?null!==S&&""===S.name?T():O(h.sequenceTO.id):e(pl.update(t))},sequenceId:h.sequenceTO.id,selectedSequenceConfiguration:null===S||void 0===S?void 0:S.id}),-1!==(null===S||void 0===S?void 0:S.id)&&i.a.createElement(Vr,{onClick:T})),i.a.createElement("div",null,i.a.createElement("div",{className:"configurationHeader flex flex-center align-center"},i.a.createElement("h1",{className:"padding-medium"},h?"Sequence States":"Chain States")),i.a.createElement("div",{className:"configList padding-bottom-l"},L(),_())),i.a.createElement("div",{className:"flex-inline flex-wrap flex-column"},i.a.createElement("div",{className:"configurationHeader flex flex-center align-center"},i.a.createElement("h1",{className:"padding-medium"},"Data-Setup")),i.a.createElement("div",{className:"configurationPanelHeader content-space-around align-center border-bottom border-medium"},i.a.createElement("label",null,"Actor"),i.a.createElement("label",null,"Data Instance"),i.a.createElement(Ur,{onClick:h?I:j})),i.a.createElement("div",{className:"configList padding-bottom-l"},M(),U())),i.a.createElement("div",{className:"flex content-space-around padding-small border-top border-medium"},i.a.createElement(Mr,{onClick:function(){return p(!0)},iconLeft:!1,iconName:mn.save,className:"greenBorder"},"Save Config"),i.a.createElement(Mr,{onClick:b,iconLeft:!1,iconName:mn.play,className:"calcButton"},"Calculate")))),C&&d&&i.a.createElement("div",{className:"configurationBody flex-column border-top border-medium"},i.a.createElement("div",{className:"flex flex-center padding-small  border-bottom border-medium"},i.a.createElement(il,{size:"2x",className:"margin-medium padding-small border border-medium"}),i.a.createElement("textarea",{className:"noteTextarea border border-medium padding-medium",value:G(),readOnly:!0})),i.a.createElement("div",{className:"flex content-space-around align-center padding-small"},i.a.createElement("h2",null,"Configuration"),C&&i.a.createElement(Sl,{onSelectCallback:function(t){var n;void 0===t?null!==g&&""===g.name?T():(n=h.sequenceTO.id,e(vl.create(n))):e(vl.update(t))},chainId:C.chain.id,selectedChainConfiguration:null===g||void 0===g?void 0:g.id}),-1!==(null===g||void 0===g?void 0:g.id)&&i.a.createElement(Vr,{onClick:function(){k.isNullOrUndefined(g)||k.isNullOrUndefined(C)||(e(vl.delete(g)),O(C.chain.id))}})),i.a.createElement("div",{className:"flex border-top border-medium"},i.a.createElement("div",{id:"column1",className:"configurationSequenceChainColumn"},i.a.createElement(gl,{label:"Overview",onClick:function(){},isSelected:!1}),i.a.createElement(gl,{label:C.chain.name,onClick:function(){},isSelected:!1}),C.links.map((function(e,t){return i.a.createElement(gl,{key:t,label:e.chainLink.name,onClick:function(){},isSelected:!1})})),C.decisions.map((function(e,t){return i.a.createElement(gl,{key:t,label:e.name,onClick:function(){},isSelected:!1})}))),i.a.createElement("div",{id:"column2",className:"border-left border-medium"},i.a.createElement("div",null,i.a.createElement("div",{className:"configurationHeader flex flex-center align-center"},i.a.createElement("h1",{className:"padding-medium"},h?"Sequence States":"Chain States")),i.a.createElement("div",{className:"configList padding-bottom-l"},L(),_())),i.a.createElement("div",{className:"flex-inline flex-wrap flex-column"},i.a.createElement("div",{className:"configurationHeader flex flex-center align-center"},i.a.createElement("h1",{className:"padding-medium"},"Data-Setup")),i.a.createElement("div",{className:"configurationPanelHeader content-space-around align-center border-bottom border-medium"},i.a.createElement("label",null,"Actor"),i.a.createElement("label",null,"Data Instance"),i.a.createElement(Ur,{onClick:h?I:j})),i.a.createElement("div",{className:"configList padding-bottom-l"},M(),U())))),i.a.createElement("div",{className:"flex content-space-around padding-small border-top border-medium"},i.a.createElement(Mr,{onClick:function(){return p(!0)},iconLeft:!1,iconName:mn.save,className:"greenBorder"},"Save Config"),i.a.createElement(Mr,{onClick:b,iconLeft:!1,iconName:mn.play,className:"calcButton"},"Calculate"))),v&&i.a.createElement(bl,{onSaveCallback:function(t){if(!k.isNullOrUndefined(S)&&!k.isNullOrUndefined(h))if(""!==S.name||""!==t&&void 0!==t){var n=k.deepCopy(S);n.sequenceFk=h.sequenceTO.id,""!==t&&void 0!==t&&(n.name=t),n.initDatas=n.initDatas.filter((function(e){return-1!==e.actorFk&&-1!==e.dataFk&&-1!==e.instanceFk})),e(pl.save(n))}else T()},onCloseCallback:function(){return p(!1)},name:(null===S||void 0===S?void 0:S.name)||""}))},kl=function(){return i.a.createElement(nc,null,i.a.createElement(Tl,null))},Dl=function(e){return function(e){switch(e){case Ei.VIEW_CONFIGURATION:return i.a.createElement(kl,null);case Ei.VIEW:return i.a.createElement(dl,null);default:return i.a.createElement(kl,null)}}(e.mode)},Nl=function(){var e=Il().mode;return i.a.createElement("div",{className:"controllerHeader"},function(e){if(!k.isNullOrUndefined(e)){if(e.includes("EDIT"))return i.a.createElement(Xc,null);if(e.includes("VIEW"))return i.a.createElement(Dl,{mode:e});if(e.includes("FILE"))return i.a.createElement(el,null);if(e.includes("TAB"))return i.a.createElement(tl,{hidden:!e.includes("TAB")})}}(e))},Il=function(){var e=Object(c.c)(Cr),t=Object(c.b)();return{mode:e,onClickNavItem:function(e){switch(e){case"EDIT":t(xr.setMode.edit());break;case"DATA":t(xr.setMode.editData());break;case"DATASETUP":t(xr.setMode.editSequenceConfiguration());break;case"SEQUENCE":t(xr.setMode.editSequence());break;case"CHAIN":t(xr.setMode.editChain())}}}},yl=n(60),Al=n.n(yl),Fl=(n(104),function(){var e=ql(),t=e.setModeToEdit,n=e.setModeToFile,a=e.setModeToConfiguration,r=e.mode;return i.a.createElement("div",{className:"leftPanel"},i.a.createElement(Mr,{iconName:mn.pencil,size:ur.large,className:"sidePanelButton"+(r.includes(Ei.EDIT.toString())&&r!==Ei.VIEW_CONFIGURATION?" active":""),onClick:t}),i.a.createElement(Mr,{iconName:mn.eye,className:"sidePanelButton"+(r===Ei.VIEW||r===Ei.VIEW_CONFIGURATION?" active":""),onClick:a}),i.a.createElement(Mr,{iconName:mn.file,className:"sidePanelButton"+(r===Ei.FILE?" active":""),onClick:n}),i.a.createElement("div",{style:{position:"absolute",bottom:"1em"}},i.a.createElement("img",{src:Al.a,alt:"fireSpot"}),i.a.createElement("div",{className:"verticalLabel"},"DAVIT by"),i.a.createElement("label",{style:{color:"white",position:"absolute",bottom:"0"}},"v ",.3)))}),ql=function(){var e=Object(c.b)();return{setModeToEdit:function(){e(xr.setMode.edit())},setModeToConfiguration:function(){e(xr.setMode.editConfiguration())},setModeToFile:function(){e(xr.setMode.file())},setModeToTab:function(){e(xr.setMode.tab())},mode:Object(c.c)(Cr)}},jl=function(){var e=wl(),t=e.onPositionUpdate,n=e.getArrows,a=e.toDnDElements,r=e.zoomIn,o=e.zoomOut,c=e.actorZoom,l=e.onGeometricalDataUpdate;return i.a.createElement(i.a.Fragment,null,0===a.length&&i.a.createElement("div",{className:"actorModel"},i.a.createElement("h2",{className:"fluid flex flex-center"},"Create a new actor")),a.length>0&&i.a.createElement(Qo,{onPositionUpdate:t,toDnDElements:a,svgElements:n(),zoomIn:r,zoomOut:o,zoom:c,type:Mo.actor,onGeoUpdate:l}))},wl=function(){var e=Object(c.b)(),t=Object(c.c)(Bn),n=Object(c.c)(Hn),a=Object(c.c)(gr),r=Object(c.c)(Fr),o=Object(c.c)(qr),l=Object(c.c)(jr),u=Object(c.c)(wr),d=Object(c.c)(Ir),s=Object(c.c)(yr),f=Object(c.c)(di),m=Object(c.c)(ti),v=Object(c.c)(ni),E=Object(c.c)(Kt);i.a.useEffect((function(){e(ca()),e(oa())}),[e]);var p=function(){var e=[];return e.push.apply(e,Object(M.a)(h())),e.push.apply(e,Object(M.a)(S())),e},h=function(){var e=[],t=v.map(b);e.push.apply(e,Object(M.a)(t));var n=m.map(O).sort((function(e,t){return e.name.localeCompare(t.name)}));return e.push.apply(e,Object(M.a)(n.filter((function(t){return!e.some((function(e){return C(e,t)}))})))),e},S=function(){var e=[],t=(null===r||void 0===r?void 0:r.actions.map((function(e){return e?g(e):[]})).flat(1))||[],n=o?g(o):[],a=T(l);return t.forEach((function(t){t&&e.push(t)})),e.push.apply(e,Object(M.a)(a)),e.push.apply(e,Object(M.a)(n)),u&&e.push(D(u)),e},C=function(e,t){return e.parentId===t.parentId&&e.name===t.name},g=function(e){var t=[];if(e.actionType!==Tn.TRIGGER){var n=I(e.actionType),a=n===In.SENT?e.sendingActorFk:e.receivingActorFk;t.push({name:N(e.dataFk,e.instanceFk),state:n,parentId:a}),e.actionType===Tn.SEND_AND_DELETE&&t.push({name:N(e.dataFk,e.instanceFk),state:In.DELETED,parentId:e.sendingActorFk})}return t},b=function(e){var t=y(e.actionType),n=t===In.ERROR_SEND?e.sendingActorFk:e.receivingActorFk;return{name:N(e.dataFk,e.instanceFk),state:t,parentId:n}},O=function(e){return{name:N(e.dataFk,e.instanceFk),parentId:e.actorFk,state:e.state}},T=function(e){var t=[];return e&&void 0!==e.conditions&&e.conditions.length>0&&(t=e.conditions.map((function(e){return D(e)}))),t},D=function(e){return{parentId:e.actorFk,name:N(e.dataFk,e.instanceFk),state:In.CHECKED}},N=function(e,t){var a,i="Could not find Data",r=n.find((function(t){return t.data.id===e}));r&&(i=r.data.name,void 0!==t&&-1!==t&&(i=i+" - "+((null===(a=r.data.instances.find((function(e){return e.id===t})))||void 0===a?void 0:a.name)||"Could not find instance Name")));return i},I=function(e){var t;switch(e){case Tn.ADD:t=In.NEW;break;case Tn.DELETE:t=In.DELETED;break;case Tn.SEND:case Tn.SEND_AND_DELETE:t=In.SENT;break;case Tn.TRIGGER:t=In.PERSISTENT}return t},y=function(e){var t;switch(e){case Tn.ADD:t=In.ERROR_ADD;break;case Tn.DELETE:t=In.ERROR_DELETE;break;case Tn.SEND:case Tn.SEND_AND_DELETE:t=In.ERROR_SEND;break;case Tn.TRIGGER:t=In.PERSISTENT}return t},A=function(e){return{id:e.actor.id,initName:e.actor.name,initWidth:100,initHeight:30,dataFragments:p().filter((function(t){return t.parentId===e.actor.id||t.parentId.dataId===e.actor.id})),zoomFactor:E,type:"ACTOR"}};return{onPositionUpdate:function(n,a,i){var r=t.find((function(e){return e.geometricalData.position.id===i}));if(r){var o=k.deepCopy(r);o.geometricalData.position.x=n,o.geometricalData.position.y=a,e(Di(o))}},getArrows:function(){var e,t,n=[];return t=f,d&&t.push(d),(e=t).push.apply(e,Object(M.a)(s)),t.forEach((function(e,t){n.push({head:bn.ARROW,id:t,labels:e.dataLabels,lineType:gn.SMOOTH,xSource:e.sourceGeometricalData.position.x,ySource:e.sourceGeometricalData.position.y,xTarget:e.targetGeometricalData.position.x,yTarget:e.targetGeometricalData.position.y,sourceHeight:e.sourceGeometricalData.geometricalData.height,sourceWidth:e.sourceGeometricalData.geometricalData.width,targetHeight:e.targetGeometricalData.geometricalData.height,targetWidth:e.targetGeometricalData.geometricalData.width,stroked:e.type===Cn.TRIGGER,lineColor:e.type===Cn.SEND?"var(--color-blue)":"var(--color-black)"})})),n},toDnDElements:function(e){var t;return t=e.filter((function(e){return!(a&&a.actor.id===e.actor.id)})).map((function(e){return{element:i.a.createElement(ec,A(e)),position:e.geometricalData.position,geometricalData:e.geometricalData.geometricalData}})).filter((function(e){return void 0!==e})),a&&t.push({element:i.a.createElement(ec,A(a)),position:a.geometricalData.position,geometricalData:a.geometricalData.geometricalData}),t}(t),zoomIn:function(){e(Qt.actorZoomIn())},zoomOut:function(){e(Qt.actorZoomOut())},onGeometricalDataUpdate:function(n,a,i){var r=k.deepCopy(t.find((function(e){return e.geometricalData.geometricalData.id===i})));r&&(r.geometricalData.geometricalData.width=n,r.geometricalData.geometricalData.height=a,e(Di(r)))},actorZoom:E}},xl=function(){var e=Rl(),t=e.onPositionUpdate,n=e.toDnDElements,a=e.zoomIn,r=e.zoomOut,o=e.getRelations,c=e.onGeometricalDataUpdate,l=e.dataZoomFactor;return i.a.createElement(i.a.Fragment,null,0===n.length&&i.a.createElement("div",{className:"dataModel"},i.a.createElement("h2",{className:"fluid flex flex-center"},"Create a new data object")),n.length>0&&i.a.createElement(Qo,{onPositionUpdate:t,toDnDElements:n,svgElements:o(),zoomIn:a,zoomOut:r,zoom:l,type:Mo.data,onGeoUpdate:c}))},Rl=function(){var e=Object(c.b)(),t=Object(c.c)(Hn),n=Object(c.c)(kr),a=Object(c.c)(Vn),r=Object(c.c)(Bn),o=Object(c.c)(Dr),l=Object(c.c)(Fr),u=Object(c.c)(qr),d=Object(c.c)(jr),s=Object(c.c)(wr),f=Object(c.c)(ri),m=Object(c.c)(ti),v=Object(c.c)(ni),E=Object(c.c)(Jt);i.a.useEffect((function(){e(fa()),e(ua())}),[e]);var p=function(e){var t;return(null===(t=r.find((function(t){return t.actor.id===e})))||void 0===t?void 0:t.actor.name)||"Could not find Actor"},h=function(){var e=[];return e.push.apply(e,Object(M.a)(S())),e.push.apply(e,Object(M.a)(C())),e},S=function(){var e=[],t=v.map(g);e.push.apply(e,Object(M.a)(t));var n=f.map(b);e.push.apply(e,Object(M.a)(n.filter((function(t){return!e.some((function(e){return N(e,t)}))}))));var a=m.filter((function(e){return e.state!==In.UPDATED_FROM})).map(O).sort((function(e,t){return e.name.localeCompare(t.name)}));return e.push.apply(e,Object(M.a)(a.filter((function(t){return!e.some((function(e){return N(e,t)}))})))),e},C=function(){var e=[],t=(null===l||void 0===l?void 0:l.actions.map(b))||[],n=u?b(u):void 0,a=T(d);return e.push.apply(e,Object(M.a)(t)),e.push.apply(e,Object(M.a)(a)),n&&e.push(n),s&&e.push(D(s)),e},g=function(e){var t=y(e.actionType),n=t===In.ERROR_SEND?e.sendingActorFk:e.receivingActorFk;return{name:A(e.dataFk,e.instanceFk),state:t,parentId:n}};function b(e){var t=I(e.actionType);return{name:p(e.receivingActorFk),state:t,parentId:e.dataFk}}var O=function(e){return{name:p(e.actorFk),parentId:{dataId:e.dataFk,instanceId:e.instanceFk},state:In.PERSISTENT}},T=function(e){var t=[];return e&&void 0!==e.conditions&&e.conditions.length>0&&(t=e.conditions.map((function(e){return D(e)}))),t},D=function(e){return{parentId:{dataId:e.dataFk,instanceId:e.instanceFk},name:p(e.actorFk),state:In.CHECKED}},N=function(e,t){var n=e.parentId.dataId||e.parentId,a=e.parentId.instanceId,i=t.parentId.dataId||t.parentId,r=t.parentId.instanceId;return(n===i||e.parentId===t.parentId)&&e.name===t.name&&(!(a||r)||a===r)},I=function(e){var t;switch(e){case Tn.ADD:t=In.NEW;break;case Tn.DELETE:t=In.DELETED;break;case Tn.SEND:case Tn.SEND_AND_DELETE:t=In.NEW;break;case Tn.TRIGGER:t=In.PERSISTENT}return t},y=function(e){var t;switch(e){case Tn.ADD:t=In.ERROR_ADD;break;case Tn.DELETE:t=In.ERROR_DELETE;break;case Tn.SEND:case Tn.SEND_AND_DELETE:t=In.ERROR_SEND;break;case Tn.TRIGGER:t=In.PERSISTENT}return t},A=function(e,n){var a,i="Could not find Data",r=t.find((function(t){return t.data.id===e}));r&&(i=r.data.name,void 0!==n&&-1!==n&&(i=i+" - "+((null===(a=r.data.instances.find((function(e){return e.id===n})))||void 0===a?void 0:a.name)||"Could not find instance Name")));return i},F=function(e){return{id:e.data.id,initName:e.data.name,initWidth:100,initHeight:30,dataFragments:h().filter((function(t){return t.parentId===e.data.id||t.parentId.dataId===e.data.id})),instances:e.data.instances,zoomFactor:E,type:"DATA"}},q=function(e){var n;return(null===(n=t.find((function(t){return t.data.id===e})))||void 0===n?void 0:n.geometricalData)||void 0},j=function(e,t,n){var a=q(e.data1Fk),i=q(e.data2Fk);return{id:t,labels:[],lineType:gn.GRID,xSource:(null===a||void 0===a?void 0:a.position.x)||0,ySource:(null===a||void 0===a?void 0:a.position.y)||0,xTarget:(null===i||void 0===i?void 0:i.position.x)||0,yTarget:(null===i||void 0===i?void 0:i.position.y)||0,sourceHeight:(null===a||void 0===a?void 0:a.geometricalData.height)||0,sourceWidth:(null===a||void 0===a?void 0:a.geometricalData.width)||0,targetHeight:(null===i||void 0===i?void 0:i.geometricalData.height)||0,targetWidth:(null===i||void 0===i?void 0:i.geometricalData.width)||0,stroked:n,sourceDirection:e.direction1,targetDirection:e.direction2}},w=function(e){return-1!==e.data1Fk&&-1!==e.data2Fk};return{onPositionUpdate:function(n,a,i){var r=t.find((function(e){return e.geometricalData.position.id===i}));if(r){var o=k.deepCopy(r);o.geometricalData.position.x=n,o.geometricalData.position.y=a,e(Bi(o))}},toDnDElements:function(e){var t;return t=e.filter((function(e){return!(n&&n.data.id===e.data.id)})).map((function(e){return{element:i.a.createElement(ec,F(e)),position:e.geometricalData.position,geometricalData:e.geometricalData.geometricalData}})).filter((function(e){return void 0!==e})),n&&t.push({element:i.a.createElement(ec,F(n)),position:n.geometricalData.position,geometricalData:n.geometricalData.geometricalData}),t}(t),zoomIn:function(){e(Qt.dataZoomIn())},zoomOut:function(){e(Qt.dataZoomOut())},getRelations:function(){var e=[],t=k.deepCopy(a);return o&&(t=t.filter((function(e){return e.id!==o.id})),w(o)&&e.push(j(o,o.id,!0))),t.forEach((function(t){return e.push(j(t,t.id))})),e},onGeometricalDataUpdate:function(n,a,i){var r=k.deepCopy(t.find((function(e){return e.geometricalData.geometricalData.id===i})));r&&(r.geometricalData.geometricalData.width=n,r.geometricalData.geometricalData.height=a,e(Bi(r)))},dataZoomFactor:E}},Ll=n(28),_l=(n(105),function(e){var t,n,r=e.showChain,o=(null===(t=Object(c.c)(Wa))||void 0===t?void 0:t.sequenceStates)||[],l=(null===(n=Object(c.c)(Qa))||void 0===n?void 0:n.chainStates)||[],u=Object(c.c)(ai),d=Object(c.c)(ii),s=Object(a.useState)(!1),f=Object(E.a)(s,2),m=f[0],v=f[1],p=function(e,t){var n=d.some((function(t){return t.id===e.id})),a=u.some((function(t){return t.id===e.id}));return i.a.createElement("div",{key:t,className:"stateViewState flex content-space-between "+(0!==t?"stateViewBorder":"")},i.a.createElement("div",{className:"flex flex-start align-center padding-small"},i.a.createElement("label",null,e.label)),i.a.createElement("div",{className:"flex flex-end align-center padding-small"},i.a.createElement("svg",{className:"stateViewSvgField"},i.a.createElement("line",{className:e.isState?"stateViewIsTrue":"stateViewIsFalse",x1:"0",y1:"0",x2:"1rem",y2:"0"})),n&&i.a.createElement("div",{className:"gg-check-o"}),a&&i.a.createElement("div",{className:"gg-close-o"}),!a&&!n&&i.a.createElement("div",{className:"stateViewSpacer"})))};return i.a.createElement("div",{className:"stateView flex flex-column border border-small"},i.a.createElement("div",{className:"stateViewHeader flex content-space-between padding-small"},i.a.createElement("div",{className:"flex flex-start align-center"},i.a.createElement("label",null,"State")),i.a.createElement("div",{className:"flex flex-end align-center"},i.a.createElement("svg",{className:"stateViewSvgField"},i.a.createElement("line",{className:u.length>0?"stateViewIsFalse":"stateViewIsTrue",x1:"0",y1:"0",x2:"1rem",y2:"0"})),u.length<=0&&d.length>0&&i.a.createElement("div",{className:"gg-check-o"}),u.length>0&&i.a.createElement("div",{className:"gg-close-o"}),u.length<=0&&d.length<=0&&i.a.createElement("div",{className:"stateViewSpacer"})),i.a.createElement(Hr,{show:m,onClick:v})),m&&i.a.createElement("div",{className:"flex flex-column"},!r&&o.map((function(e,t){return p(e,t)})),r&&l.map((function(e,t){return p(e,t)}))))}),Ml=(n(106),function(e){var t=e.label,n=e.isActive,a=e.onClick;return i.a.createElement("div",{className:"no-user-select "+(n?"tab activeTabFragment":"tab"),onClick:a},t)}),Ul=(n(107),function(e){var t=e.label,n=e.children,a=e.style;return i.a.createElement("div",{className:"tab-group",style:a},i.a.createElement("div",{className:"tab-aggregator"},t),i.a.createElement("div",{className:"flex"},n))}),Gl=(n(108),function(){var e=Pl(),t=e.nodeModelTree,n=e.calcSteps,r=e.calcLinkIds,o=e.lineColor,c=e.currentStepId,l=e.nodeModelChainTree,u=e.currentLinkId,d=e.chain,s=e.sequence,f=e.chainLineColor,m=e.viewLevel,v=e.setViewLevelToChain,p=e.setViewLevelToSequence,h=Object(a.useState)(0),S=Object(E.a)(h,2),C=S[0],g=S[1],b=Object(a.useRef)(null);Object(a.useEffect)((function(){var e=function(){b&&b.current&&g(b.current.offsetHeight)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[b]);var T=function(){return!(!s&&!d)};return i.a.createElement("div",{className:"flowChartModel",ref:b},!T()&&i.a.createElement("h2",{className:"fluid flex flex-center"},"Select a sequence or chain to see the flow chart"),T()&&i.a.createElement("div",{className:"flowChart padding-small",style:{height:C}},i.a.createElement("div",{className:"flowChartHeader"},d&&i.a.createElement(Ul,{label:"Mode"},i.a.createElement(Ml,{label:"Chain",isActive:m===ba.chain,onClick:v}),i.a.createElement(Ml,{label:"Sequence",isActive:m===ba.sequence,onClick:p})),i.a.createElement(_l,{showChain:m===ba.chain})),m===ba.sequence&&s&&i.a.createElement(Ll.ArcherContainer,{noCurves:!0,arrowLength:0},function e(t){var a=[];return t.parentId&&a.push({targetId:t.parentId,targetAnchor:"bottom",sourceAnchor:"top",style:{strokeColor:n.find((function(e){return e===t.parentId}))&&n.find((function(e){return e===t.id}))?o():"var(--background-color-header)",strokeWidth:n.find((function(e){return e===t.parentId}))&&n.find((function(e){return e===t.id}))?5:3}}),i.a.createElement("div",{className:"flowChartFlex",style:{margin:"root"===t.id?"":"50px 0"},key:t.id},i.a.createElement(Ll.ArcherElement,{id:t.id,relations:a},i.a.createElement("div",{className:"root"===t.id?"ROOT":t.leafType,id:c===t.id?"flowChartCurrentStep":""},"root"===t.id||t.leafType===O.DEC?"":t.label)),t.leafType===O.DEC&&i.a.createElement("div",{className:"condLabel"},t.label),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"start",width:"100%"}},t.childs.map(e)))}(t)),m===ba.chain&&d&&i.a.createElement(Ll.ArcherContainer,{noCurves:!0,arrowLength:0},function e(t){var n=[];return t.parentId&&n.push({targetId:t.parentId,targetAnchor:"bottom",sourceAnchor:"top",style:{strokeColor:(null===r||void 0===r?void 0:r.find((function(e){return e===t.parentId})))&&r.find((function(e){return e===t.id}))?f():"var(--background-color-header)",strokeWidth:(null===r||void 0===r?void 0:r.find((function(e){return e===t.parentId})))&&r.find((function(e){return e===t.id}))?5:3}}),i.a.createElement("div",{className:"flowChartFlex",style:{margin:"root"===t.id?"":"50px 0"},key:t.id},i.a.createElement(Ll.ArcherElement,{id:t.id,relations:n},i.a.createElement("div",{className:t.leafType,id:u===t.id?"flowChartCurrentStep":""},t.leafType===D.DEC?"":t.label)),t.leafType===D.DEC&&i.a.createElement("div",{className:"condLabel"},t.label),i.a.createElement("div",{style:{display:"flex",justifyContent:"space-around",alignItems:"start",width:"100%"}},t.childs.map(e)))}(l))))}),Pl=function(){var e=Object(c.c)(Wa),t=Object(c.c)(ei),n=Object(c.c)($a),a=Object(c.c)(Qa),i=Object(c.c)(Ja),r=Object(c.c)(ci),o=Object(c.c)(ui),l=Object(c.c)(Xa),u=Object(c.b)(),d=function t(n,a,i){var r={id:"",label:"",leafType:n.type,parentId:a,childs:[]};if(!k.isNullOrUndefined(e))switch(n.type){case O.STEP:var o=e.sequenceStepCTOs.find((function(e){return e.sequenceStepTO.id===n.id}))||null;if(o){var c="_STEP_"+o.sequenceStepTO.id;r.id=a+c,r.label=o.sequenceStepTO.name,a.includes(c)||(i.push(r.id),r.childs.push(t(o.sequenceStepTO.goto,r.id,i)))}break;case O.DEC:var l=e.decisions.find((function(e){return e.id===n.id}))||null;if(l){var u="_DEC_"+l.id;r.id=a+u,r.label=l.name,a.includes(u)||(i.push(r.id),r.childs.push(t(l.ifGoTo,r.id,i)),r.childs.push(t(l.elseGoTo,r.id,i)));break}break;case O.ERROR:r.id=a+"_ERROR";break;case O.FIN:r.id=a+"_FIN";break;case O.IDLE:r.id=a+"_IDLE"}return r};return{nodeModelTree:function(e){var t=[],n={id:"root",label:"",leafType:e.type,childs:[]};switch(e.type){case O.STEP:t.push(n.id),n.label=e.value.sequenceStepTO.name,n.childs.push(d(e.value.sequenceStepTO.goto,n.id,t));break;case O.DEC:t.push(n.id),n.label=e.value.name,n.childs.push(d(e.value.ifGoTo,n.id,t)),n.childs.push(d(e.value.elseGoTo,n.id,t))}return n}(function(){var t={isLoop:!1,type:O.STEP,value:new vc};if(e){var n=function(e){var t={type:O.ERROR,value:{type:O.ERROR},isLoop:!1};if(!k.isNullOrUndefined(e)){var n=e.sequenceStepCTOs.find((function(e){return e.sequenceStepTO.root})),a=e.decisions.find((function(e){return e.root}));n&&!a&&(t.type=O.STEP,t.value=n),a&&!n&&(t.type=O.DEC,t.value=a)}return t}(e);n.value.actions&&(t.value.sequenceStepTO.goto={type:O.STEP,id:n.value.sequenceStepTO.id}),n.value.elseGoTo&&(t.value.sequenceStepTO.goto={type:O.DEC,id:n.value.id}),t.isLoop=!1}return t}()),nodeModelChainTree:function(e){var t=[],n={id:"",label:"",leafType:e.type,childs:[]};return t.push(n.id),e.value.chainLink&&(n.id=e.value.chainLink.id.toString(),n.label=e.value.chainLink.name,n.childs.push(function e(t,n,i){var r={id:"",label:"",leafType:t.type,parentId:n,childs:[]};if(!k.isNullOrUndefined(a))switch(t.type){case D.LINK:var o=a.links.find((function(e){return e.chainLink.id===t.id}))||null;if(o){var c="_LINK_"+o.chainLink.id;r.id=n+c,r.label=o.chainLink.name,n.includes(c)||(i.push(r.id),r.childs.push(e(o.chainLink.goto,r.id,i)))}break;case D.DEC:var l=a.decisions.find((function(e){return e.id===t.id}))||null;if(l){var u="_DEC_"+l.id;r.id=n+u,r.label=l.name,n.includes(u)||(i.push(r.id),r.childs.push(e(l.ifGoTo,r.id,i)),r.childs.push(e(l.elseGoTo,r.id,i)));break}break;case D.ERROR:r.id=n+"_ERROR";break;case D.FIN:r.id=n+"_FIN"}return r}(e.value.chainLink.goto,n.id,t))),n}(function(e){var t={type:D.ERROR,value:{type:D.ERROR},isLoop:!1};if(!k.isNullOrUndefined(e)){var n=e.links.find((function(e){return e.chainLink.root}));n&&(t.type=D.LINK,t.value=n)}return t}(a)),currentStepId:r,calcSteps:k.deepCopy(n),calcLinkIds:null===i||void 0===i?void 0:i.linkIds,lineColor:function(){if(!t)return"#FF00FF";switch(t.type){case O.ERROR:return"var(--color-error)";case O.FIN:return"var(--color-green)";case O.IDLE:return"var(--color-blue)"}},chainLineColor:function(){if(!i)return"#FF00FF";switch(i.terminal.type){case D.ERROR:return"var(--color-error)";case D.FIN:return"var(--color-green)"}},currentLinkId:o,sequence:e,chain:a,chainName:(null===a||void 0===a?void 0:a.chain.name)||"",sequenceName:(null===e||void 0===e?void 0:e.sequenceTO.name)||"",viewLevel:l,setViewLevelToSequence:function(){u(hi.setViewLevel(ba.sequence))},setViewLevelToChain:function(){u(hi.setViewLevel(ba.chain))}}},Bl=(n(109),function(e){var t=e.header,n=e.bodyData,a=e.addFunction,r=e.tableHeight,o=function(e,t){return i.a.createElement("td",{id:t.toString(),key:t},e)},c=function(e,t){return i.a.createElement(Mr,{iconName:e.icon,size:ur.small,className:"margin-right-xs",onClick:e.callback,key:t,disabled:e.disable})},l=function(e,t,n){return i.a.createElement("tr",{key:e,className:n},new Array(t).map((function(e,t){return i.a.createElement("td",{key:t})})))};return i.a.createElement("table",null,i.a.createElement("thead",null,i.a.createElement("tr",null,t.map(o))),i.a.createElement("tbody",{style:{height:r}},n.map((function(e,t){return i.a.createElement("tr",{key:t,className:e.trClass,onClick:e.onClick},e.data.map(o),e.actions.length>0&&i.a.createElement("td",{className:"flex flex-end"},e.actions.map((function(e,t){return c(e,t)}))))})),a&&i.a.createElement("tr",null,i.a.createElement("td",null,c({icon:mn.plus,callback:a},0))),function(){var e,t=n.length;a&&t++;for(var i=(null===(e=n[0])||void 0===e?void 0:e.data.length)||1,r=[],o=t;o<=10;o++)r.push(l(o.toString(),i,"carv2Tr"));return r}()))}),Hl=function(e){var t=e.activeTab,n=e.setActiveTab,a=e.showCalcChainTab,r=e.showCalcSequenceTab,o=e.showChainModelTab,l=e.showSequenceModelTabs,u=e.showErrorTab,d=Object(c.c)(Cr),s=[{label:"Calculated",condition:a||r,tabs:[{label:"Chain",identifier:pu.chain,condition:a},{label:"Sequence",identifier:pu.sequence,condition:r},{label:"Error Actions",identifier:pu.errorAction,condition:u}]},{label:"Chain Model",condition:o,tabs:[{label:"Decision",identifier:pu.chainDecisions},{label:"Links",identifier:pu.chainLinks}]},function(){var e=[{label:"Decision",identifier:pu.decision},{label:"Steps",identifier:pu.step}];return d!==Ei.EDIT_SEQUENCE_STEP&&d!==Ei.EDIT_SEQUENCE_STEP_ACTION||e.push({label:"Actions",identifier:pu.action}),d!==Ei.EDIT_SEQUENCE_DECISION&&d!==Ei.EDIT_SEQUENCE_DECISION_CONDITION||e.push({label:"Condition",identifier:pu.condition}),{label:"Sequence Model",condition:l,tabs:e}}(),{label:"Models",tabs:[{label:"Chain",identifier:pu.chainModel},{label:"Sequence",identifier:pu.sequenceModels},{label:"Data Setup",identifier:pu.dataSetup}]}];return i.a.createElement("div",{className:"tabs",key:function(){var e=a?"chain":"";return e+=l?"seqModel":"",e+=o?"chainModel":"",e+=r?"seq":""}()},s.map((function(e,a){return(void 0===e.condition||e.condition)&&i.a.createElement(Ul,{label:e.label,key:a},e.tabs.map((function(e,a){return(void 0===e.condition||e.condition)&&i.a.createElement(Ml,{label:e.label,isActive:t===e.identifier,onClick:function(){return n(e.identifier)},key:a})})))})))},Vl=["TYPE","DATA","TARGET","SOURCE"],Wl=function(e,t,n,a){return{data:[e,t,n,a],trClass:"carv2Tr",actions:[]}},zl=function(e,t){var n,a=t.find((function(t){return t.data.id===e.dataFk})),i=a?a.data.name:"Could not find Data!";void 0!==a&&e.actionType===Tn.ADD&&(i=i+": "+(null===(n=a.data.instances.find((function(t){return t.id===e.instanceFk})))||void 0===n?void 0:n.name)||"Could not find instance!");return i},Ql=["INDEX","NAME","SEQUENCE","DATASETUP","TERMINAL"],Zl=function(e,t,n,a){var i,r=e.name||"Link name not found!",o=(null===(i=e.sequence.sequenceModel)||void 0===i?void 0:i.sequenceTO.name)||"Sequence name not found!",c=e.sequenceConfiguration.name||"Sequence Configuration name not found!",l="carv2Tr";return t===a&&(l="carv2TrMarked"),{trClass:"clickable "+l,data:[(t+1).toString(),r,o,c,e.sequence.terminal.type.toString()],actions:[],onClick:n}},Kl=["INDEX","NAME","TYPE","ERROR"],Jl=function(e,t,n,a,r,o,c){var l=r&&r<=n?"carv2TrTerminalError":"carv2Tr";"TERMINAL"===t.type&&c&&(l="carv2TrTerminal"+c.type),n===a&&("TERMINAL"===t.type?l+=" davitTrTerminalMarked":l="carv2TrMarked");var u=t.errors.length>0;return{actions:[],data:[n.toString(),Yl(t,e,c),t.type,u?i.a.createElement($t.a,{icon:mn.warning}):""],trClass:"clickable "+l,onClick:o}};function Yl(e,t,n){var a,i;switch(e.type){case"STEP":return(null===t||void 0===t||null===(a=t.sequenceStepCTOs.find((function(t){return t.sequenceStepTO.id===e.modelElementFk})))||void 0===a?void 0:a.sequenceStepTO.name)||"Step not found!";case"DECISION":return(null===t||void 0===t||null===(i=t.decisions.find((function(t){return t.id===e.modelElementFk})))||void 0===i?void 0:i.name)||"Decision not found!";case"INIT":return"Initial step";case"TERMINAL":return(null===n||void 0===n?void 0:n.type)||"Terminal name not found!";default:return"ModelElement type has type ".concat(e.type," which is not known")}}var Xl=["NAME","ACTIONS"],$l=function(e,t,n){return{trClass:"carv2Tr",data:[e.name],actions:[{icon:mn.wrench,callback:t},{icon:mn.handPointer,callback:n}]}};function eu(e,t,n){var a,i,r="could not find goto";switch(e.type){case D.ERROR:case D.FIN:r=e.type;break;case D.LINK:r=(null===(a=t.find((function(t){return t.chainLink.id===e.id})))||void 0===a?void 0:a.chainLink.name)||r;break;case D.DEC:r=(null===(i=n.find((function(t){return t.id===e.id})))||void 0===i?void 0:i.name)||r}return r}var tu=["NAME","IF GOTO","ELSE GOTO","ACTIONS"],nu=function(e,t,n,a){return{trClass:"carv2Tr",data:[e.name,eu(e.ifGoTo,t,n),eu(e.elseGoTo,t,n)],actions:[{icon:mn.wrench,callback:a}]}},au=["NAME","SEQUENCE","DATASETUP","GOTO","ACTIONS","START"],iu=function(e,t,n,a){return{trClass:"carv2Tr",data:[e.chainLink.name,e.sequence.sequenceTO.name,e.sequenceConfiguration.name,eu(e.chainLink.goto,t,n),e.chainLink.root?"start":""],actions:[{icon:mn.wrench,callback:a}]}},ru=["NAME","ACTIONS"],ou=function(e,t,n){return{trClass:"carv2Tr",data:[e.name],actions:[{icon:mn.wrench,callback:t},{icon:mn.handPointer,callback:n}]}},cu=["NAME","ACTIONS"],lu=function(e,t,n){return{data:[e.name],trClass:"carv2Tr",actions:[{icon:mn.wrench,callback:t},{icon:mn.handPointer,callback:n}]}},uu=["ACTOR","DATA","INSTANCE","ACTIONS"],du=function(e,t,n,a,i){return{trClass:i?"carv2TrMarked":"carv2Tr",data:[e,t,n],actions:[{icon:mn.wrench,callback:a}]}},su=["NAME","IF GOTO","ELSE GOTO","ACTIONS","START"],fu=function(e,t,n){return{trClass:"carv2Tr",data:[e.name,mu(e.ifGoTo,(null===t||void 0===t?void 0:t.sequenceStepCTOs)||[],(null===t||void 0===t?void 0:t.decisions)||[]),mu(e.elseGoTo,(null===t||void 0===t?void 0:t.sequenceStepCTOs)||[],(null===t||void 0===t?void 0:t.decisions)||[]),e.root?"start":""],actions:[{icon:mn.wrench,callback:n}]}};function mu(e,t,n){var a,i,r="could not find goto";switch(e.type){case O.ERROR:case O.FIN:case O.IDLE:r=e.type;break;case O.STEP:r=(null===(a=t.find((function(t){return t.sequenceStepTO.id===e.id})))||void 0===a?void 0:a.sequenceStepTO.name)||r;break;case O.DEC:r=(null===(i=n.find((function(t){return t.id===e.id})))||void 0===i?void 0:i.name)||r}return r}var vu=["NAME","GOTO","START","ACTIONS"],Eu=function(e,t,n){return{data:[e.sequenceStepTO.name,function(e,t,n){var a,i,r="could not find goto";switch(e.type){case O.ERROR:case O.FIN:case O.IDLE:r=e.type;break;case O.STEP:r=(null===(a=t.find((function(t){return t.sequenceStepTO.id===e.id})))||void 0===a?void 0:a.sequenceStepTO.name)||r;break;case O.DEC:r=(null===(i=n.find((function(t){return t.id===e.id})))||void 0===i?void 0:i.name)||r}return r}(e.sequenceStepTO.goto,(null===t||void 0===t?void 0:t.sequenceStepCTOs)||[],(null===t||void 0===t?void 0:t.decisions)||[]),e.sequenceStepTO.root?"start":""],trClass:"carv2Tr",actions:[{icon:mn.wrench,callback:n}]}};var pu,hu=["INDEX","TYPE","DATA","TARGET","SOURCE","ACTIONS"],Su=function(e,t,n,a,i,r,o,c,l,u){return{data:[e.toString(),t,n,a,i],trClass:u?"carv2TrMarked":"carv2Tr",actions:[{icon:mn.angleUp,callback:c,disable:0===e},{icon:mn.angleDown,callback:o,disable:e>=l-1},{icon:mn.wrench,callback:r}]}};!function(e){e.condition="condition",e.action="action",e.errorAction="errorAction",e.step="step",e.decision="decision",e.sequence="sequence",e.chain="chain",e.chainLinks="chainLinks",e.chainDecisions="chainDecisions",e.sequenceModels="sequenceModels",e.chainModel="chainModels",e.dataSetup="dataSetup"}(pu||(pu={}));var Cu=function(){var e=gu(),t=e.showChainModelTab,n=e.showSequenceModelTabs,a=e.showCalcChainTab,r=e.showCalcSequenceTab,o=e.showErrorTab,c=e.activeTab,l=e.setActiveTab,u=e.activeTableData,d=e.tableHeight,s=e.parentRef;return i.a.createElement("div",{className:"sequenceTable padding-tiny",ref:s},i.a.createElement("div",{className:"tableBorder"},i.a.createElement(Hl,{showChainModelTab:t,showSequenceModelTabs:n,showCalcChainTab:a,showCalcSequenceTab:r,activeTab:c,setActiveTab:l,showErrorTab:o}),i.a.createElement(Bl,Object.assign({},u,{tableHeight:d}))))},gu=function(){var e=Object(c.c)(Cr),t=Object(c.c)(Wa),n=Object(c.c)(Fr),i=Object(c.c)(Ya),r=Object(c.c)(Ja),o=Object(c.c)(Wn),l=Object(c.c)(Kn),u=Object(c.c)(za),d=Object(c.c)(zn),s=Object(c.c)(Za),f=Object(c.c)(Ka),m=Object(c.c)(qr),v=Object(c.c)(jr),p=Object(c.c)(wr),h=Object(c.c)(ni),S=Object(a.useState)(pu.sequence),C=Object(E.a)(S,2),g=C[0],b=C[1];Object(a.useEffect)((function(){var t=void 0;switch(e){case Ei.VIEW:t=u?pu.chain:pu.sequence;break;case Ei.EDIT_CHAIN:t=pu.chainModel;break;case Ei.EDIT_CHAIN_DECISION:case Ei.EDIT_CHAIN_DECISION_CONDITION:t=pu.chainDecisions;break;case Ei.EDIT_SEQUENCE:t=pu.step;break;case Ei.EDIT_SEQUENCE_DECISION:case Ei.EDIT_SEQUENCE_DECISION_CONDITION:t=pu.condition;break;case Ei.EDIT_SEQUENCE_STEP:case Ei.EDIT_SEQUENCE_STEP_ACTION:t=pu.action}t&&b(t)}),[e,u]);var O=function(e){var t,n=Object(c.b)();return t=e.map((function(e){return ou(e,(function(){return n(xr.setMode.editSequenceConfiguration(e.id))}),(function(){n(hi.setCurrentSequenceConfigurationById(e.id)),n(xr.setMode.view())}))})),{header:ru,bodyData:t}}(l),T=function(e){var t=Object(c.b)(),n=[];return e&&(n=e.map((function(e){return lu(e,(function(){return t(xr.setMode.editSequence(e.id))}),(function(){t(hi.setCurrentSequenceById(e.id)),t(xr.setMode.view())}))}))),{header:cu,bodyData:n}}(o),D=function(e){var t=Object(c.b)(),n=[];return null!==e&&(n=e.decisions.map((function(n){return fu(n,e,(function(){return t(xr.setMode.editDecision(n))}))}))),{header:su,bodyData:n}}(t),N=function(e,t){var n=Object(c.b)(),a=Object(c.c)(wr),i=e,r=Object(c.c)(Bn),o=Object(c.c)(Hn),l=[];return null!==t&&(i=Yi.find(t.decisionFk)),null!==i&&(l=i.conditions.map((function(e){var t,c,l=(null===(t=r.find((function(t){return t.actor.id===e.actorFk})))||void 0===t?void 0:t.actor.name)||"Could not find actor",u=o.find((function(t){return t.data.id===e.dataFk})),d="Could not find data",s="Could not find data";u&&(d=(null===u||void 0===u?void 0:u.data.name)||"Could not find data",s=(null===u||void 0===u||null===(c=u.data.instances.find((function(t){return t.id===e.instanceFk})))||void 0===c?void 0:c.name)||"Could not find instance");return du(l,d,s,(function(){return n(xr.setMode.editCondition(i,e))}),e.id===(null===a||void 0===a?void 0:a.id))}))),{header:uu,bodyData:l}}(v,p),I=function(e){var t=Object(c.b)(),n=[];return null!==e&&(n=e.sequenceStepCTOs.map((function(n){return Eu(n,e,(function(){return t(xr.setMode.editStep(n))}))}))),{header:vu,bodyData:n}}(t),y=function(e){var t=Object(c.c)(Hn),n=Object(c.c)(Bn),a=Object(c.c)(qr),i=Object(c.c)(Cr),r=Object(c.b)(),o=[],l=function(e,t,n){var a=n?e+1:e-1,o=k.deepCopy(t),c=o.actions[e];c.index=a;var l=o.actions[a];l.index=e,o.actions[e]=l,o.actions[a]=c,r(Qi.save(o)),r(hi.setCurrentSequenceById(o.sequenceStepTO.sequenceFk)),i===Ei.EDIT_SEQUENCE_STEP&&r(Qi.update(o))};return null!==e&&(o=e.actions.map((function(i,o){var c,u,d,s=t.find((function(e){return e.data.id===i.dataFk})),f="Could not find data name";s&&(f=s.data.name,i.actionType===Tn.ADD&&(f=f+": "+(null===(d=s.data.instances.find((function(e){return e.id===i.instanceFk})))||void 0===d?void 0:d.name)||"Could not find instance name"));var m=(null===(c=n.find((function(e){return e.actor.id===i.receivingActorFk})))||void 0===c?void 0:c.actor.name)||"",v=(null===(u=n.find((function(e){return e.actor.id===i.sendingActorFk})))||void 0===u?void 0:u.actor.name)||"";return Su(o,i.actionType,f,m,v,(function(){r(xr.setMode.editAction(i))}),(function(){o<e.actions.length-1&&l(o,e,!0)}),(function(){o>0&&l(o,e,!1)}),e.actions.length,i.id===(null===a||void 0===a?void 0:a.id))}))),{header:hu,bodyData:o}}(function(){var a=null;if(e===Ei.EDIT_SEQUENCE_STEP_ACTION){if(m){var i=null===t||void 0===t?void 0:t.sequenceStepCTOs.find((function(e){return e.sequenceStepTO.id===(null===m||void 0===m?void 0:m.sequenceStepFk)}));i&&(a=i)}}else a=n;return a}()),A=function(e){var t=Object(c.b)(),n=[];return e&&(n=e.map((function(e){return $l(e,(function(){return t(xr.setMode.editChain(e))}),(function(){t(hi.setCurrentChain(e)),t(xr.setMode.view())}))}))),{bodyData:n,header:Xl}}(d),F=function(e,t,n){var a=Object(c.b)(),i=[];return null!==e&&(i=n.map((function(e){return nu(e,t,n,(function(){return a(xr.setMode.editChainDecision(e))}))}))),{header:tu,bodyData:i}}(r,s,f),q=function(e,t){var n,a=Object(c.b)();return n=e.map((function(n){return iu(n,e,t,(function(){return a(xr.setMode.editChainLink(n.chainLink))}))})),{header:au,bodyData:n}}(s,f),j=function(e,t){var n=Object(c.b)(),a=Object(c.c)(ei),i=Object(c.c)(si),r=Object(c.c)(oi),o=e.map((function(e,o){return Jl(t,e,o,r,i,(function(){return n(hi.setCurrentStepIndex(o))}),a)}));return{header:Kl,bodyData:o}}(i,t),w=function(e){var t=Object(c.b)(),n=Object(c.c)(li),a=[];return null!==e&&(a=e.calcLinks.map((function(e,a){return Zl(e,a,(function(){return t(hi.setCurrentLinkIndex(a))}),n)}))),{header:Ql,bodyData:a}}(r),x=function(e){var t=Object(c.c)(Hn),n=Object(c.c)(Bn),a=e.map((function(e){var a,i,r=zl(e,t),o=(null===(a=n.find((function(t){return t.actor.id===e.receivingActorFk})))||void 0===a?void 0:a.actor.name)||"",c=(null===(i=n.find((function(t){return t.actor.id===e.sendingActorFk})))||void 0===i?void 0:i.actor.name)||"";return Wl(e.actionType,r,o,c)}));return{header:Vl,bodyData:a}}(h),R=Object(a.useRef)(null),L=Object(a.useState)(0),_=Object(E.a)(L,2),M=_[0],U=_[1];return Object(a.useEffect)((function(){var e=function(){R&&R.current&&U(R.current.offsetHeight-120)};return e(),window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[R]),{showChainModelTab:!k.isNullOrUndefined(u),showSequenceModelTabs:!k.isNullOrUndefined(t),showCalcChainTab:!k.isNullOrUndefined(r),showCalcSequenceTab:i.length>0,showErrorTab:h.length>0,activeTab:g,setActiveTab:b,activeTableData:function(){switch(g){case pu.chain:return w;case pu.chainDecisions:return F;case pu.chainLinks:return q;case pu.action:return y;case pu.step:return I;case pu.decision:return D;case pu.condition:return N;case pu.sequence:return j;case pu.sequenceModels:return T;case pu.chainModel:return A;case pu.dataSetup:return O;case pu.errorAction:return x;default:return{header:[],bodyData:[]}}}(),tableHeight:M,parentRef:R}},bu=(n(110),{home:"/",actor:"/component",data:"/data",table:"/table",flowChart:"/flowChart"});function Ou(){var e=Object(c.b)();return Object(a.useEffect)((function(){e(va()),e(Qt.loadActorZoomFromBackend()),e(Qt.loadDataZoomFromBackend())}),[e]),i.a.createElement(l.a,null,i.a.createElement(u.c,null,i.a.createElement(u.a,{exact:!0,path:bu.home},i.a.createElement("div",{className:"davitGridContainer"},i.a.createElement(Nl,null),i.a.createElement(jl,null),i.a.createElement(xl,null),i.a.createElement(Fl,null),i.a.createElement(Gl,null),i.a.createElement(Cu,null),i.a.createElement(hn,null))),i.a.createElement(u.a,{exact:!0,path:bu.actor},i.a.createElement("div",{className:"componentPage"},i.a.createElement(jl,null))),i.a.createElement(u.a,{exact:!0,path:bu.data},i.a.createElement("div",{className:"componentPage"},i.a.createElement(xl,null))),i.a.createElement(u.a,{exact:!0,path:bu.table},i.a.createElement("div",{className:"componentPage"},i.a.createElement(Cu,null))),i.a.createElement(u.a,{exact:!0,path:bu.flowChart},i.a.createElement("div",{className:"componentPage"},i.a.createElement(Gl,null)))))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Tu,ku=Object(m.c)().concat((function(){return function(e){return function(t){if(!t.source){var n=Object.assign({source:"another tab"},t);localStorage.setItem("redux-local-tab-sync",JSON.stringify(n)+"__"+new Date)}e(t)}}})),Du=Object(m.a)({reducer:{global:Yt,masterData:Pn,edit:Sr,sequenceModel:Ha},middleware:ku});window.addEventListener("storage",(Tu=Du,function(){var e=localStorage.getItem("redux-local-tab-sync");if(e){var t=e.split("__")[0],n=JSON.parse(t);delete n.source,Tu.dispatch(n)}}));n(112);o.a.render(i.a.createElement(c.a,{store:Du},i.a.createElement(Lr,null,i.a.createElement(Ou,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}]),[[62,1,2]]]);
//# sourceMappingURL=main.c957ffdf.chunk.js.map